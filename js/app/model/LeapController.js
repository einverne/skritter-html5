define(["backbone"],function(){var e=Backbone.Model.extend({initialize:function(){e.controller=new Leap.Controller,e.canvasSize=Skritter.settings.get("canvasSize"),e.oldPt={},e.points=[],e.waitingCounter=0},disable:function(){e.controller.removeAllListeners(),e.controller.disconnect()},enable:function(t){e.canvasSize=Skritter.settings.get("canvasSize"),e.waitingCounter=0,t&&(e.controller=new Leap.Controller(t)),e.controller.on("animationFrame",_.bind(this.loop,this)),e.controller.connect()},loop:function(t){if(t.pointables.length>0){var n=t.pointables[0],r=n.tipPosition[0]+150,i=Math.abs(n.tipPosition[1]-400),s=n.tipPosition[2],o;r>=0&&r<=300&&i>=0&&i<=250&&s>-75?(r=r*e.canvasSize/300,i=i*e.canvasSize/250,this.triggerMove(new createjs.Point(r,i)),e.oldPt&&(o=Skritter.fn.getDistance({x:r,y:i},e.oldPt)),e.oldPt=new createjs.Point(r,i),o>=12?(e.waitingCounter=0,e.points.push(new createjs.Point(r,i))):(e.waitingCounter>30&&(e.points.length>=5&&this.triggerStrokeComplete(e.points),e.points=[]),e.waitingCounter++)):this.triggerMove(new createjs.Point(-30,-30))}},triggerStrokeComplete:function(e){this.trigger("strokeComplete",e)},triggerMove:function(e){this.trigger("move",e)}});return e});