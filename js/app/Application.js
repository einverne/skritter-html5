/*
 * $Id: base64.js,v 2.12 2013/05/06 07:54:20 dankogai Exp dankogai $
 *
 *  Licensed under the MIT license.
 *    http://opensource.org/licenses/mit-license
 *
 *  References:
 *    http://en.wikipedia.org/wiki/Base64
 */

/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
 */

/**
 * @license
 * Lo-Dash 2.2.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 * Build: `lodash -o ./dist/lodash.compat.js`
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 * @license EaselJS
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2011-2013 gskinner.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 */

/*!
 * @license TweenJS
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2011-2013 gskinner.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 */

/*! Hammer.JS - v1.0.5 - 2013-04-07
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */

/*!
 * @license PreloadJS
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2011-2013 gskinner.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 */

/*! IndexedDBShim - v0.1.2 - 2013-07-11 */

/**
* bootstrap.js v3.0.0 by @fat and @mdo
* Copyright 2013 Twitter Inc.
* http://www.apache.org/licenses/LICENSE-2.0
*/

(function(e){if(e.Base64)return;var t="2.1.2",n;typeof module!="undefined"&&module.exports&&(n=require("buffer").Buffer);var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){var t={};for(var n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(r),s=String.fromCharCode,o=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?s(192|t>>>6)+s(128|t&63):s(224|t>>>12&15)+s(128|t>>>6&63)+s(128|t&63)}var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return s(240|t>>>18&7)+s(128|t>>>12&63)+s(128|t>>>6&63)+s(128|t&63)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,a=function(e){return e.replace(u,o)},f=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),i=[r.charAt(n>>>18),r.charAt(n>>>12&63),t>=2?"=":r.charAt(n>>>6&63),t>=1?"=":r.charAt(n&63)];return i.join("")},l=e.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,f)},c=n?function(e){return(new n(e)).toString("base64")}:function(e){return l(a(e))},h=function(e,t){return t?c(e).replace(/[+\/]/g,function(e){return e=="+"?"-":"_"}).replace(/=/g,""):c(e)},p=function(e){return h(e,!0)},d=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),v=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return s((n>>>10)+55296)+s((n&1023)+56320);case 3:return s((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return s((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},m=function(e){return e.replace(d,v)},g=function(e){var t=e.length,n=t%4,r=(t>0?i[e.charAt(0)]<<18:0)|(t>1?i[e.charAt(1)]<<12:0)|(t>2?i[e.charAt(2)]<<6:0)|(t>3?i[e.charAt(3)]:0),o=[s(r>>>16),s(r>>>8&255),s(r&255)];return o.length-=[0,0,2,1][n],o.join("")},y=e.atob||function(e){return e.replace(/[\s\S]{1,4}/g,g)},b=n?function(e){return(new n(e,"base64")).toString()}:function(e){return m(y(e))},w=function(e){return b(e.replace(/[-_]/g,function(e){return e=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};e.Base64={VERSION:t,atob:y,btoa:l,fromBase64:w,toBase64:h,utob:a,encode:h,encodeURI:p,btou:m,decode:w};if(typeof Object.defineProperty=="function"){var E=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",E(function(){return w(this)})),Object.defineProperty(String.prototype,"toBase64",E(function(e){return h(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",E(function(){return h(this,!0)}))}}})(this),define("base64",function(){}),function(e,t){function H(e){var t=e.length,n=w.type(e);return w.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function j(e){var t=B[e]={};return w.each(e.match(S)||[],function(e,n){t[n]=!0}),t}function q(e,n,r,i){if(w.acceptData(e)){var s,o,u=w.expando,a=e.nodeType,f=a?w.cache:e,l=a?e[u]:e[u]&&u;if(l&&f[l]&&(i||f[l].data)||r!==t||"string"!=typeof n)return l||(l=a?e[u]=c.pop()||w.guid++:u),f[l]||(f[l]=a?{}:{toJSON:w.noop}),("object"==typeof n||"function"==typeof n)&&(i?f[l]=w.extend(f[l],n):f[l].data=w.extend(f[l].data,n)),o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[w.camelCase(n)]=r),"string"==typeof n?(s=o[n],null==s&&(s=o[w.camelCase(n)])):s=o,s}}function R(e,t,n){if(w.acceptData(e)){var r,i,s=e.nodeType,o=s?w.cache:e,u=s?e[w.expando]:w.expando;if(o[u]){if(t&&(r=n?o[u]:o[u].data)){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in r?t=[t]:(t=w.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!z(r):!w.isEmptyObject(r))return}(n||(delete o[u].data,z(o[u])))&&(s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null)}}}function U(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(I,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:F.test(r)?w.parseJSON(r):r}catch(s){}w.data(e,n,r)}else r=t}return r}function z(e){var t;for(t in e)if(("data"!==t||!w.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ht(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ut.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return w.nodeName(e,"table")&&w.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _t(e){return e.type=(null!==w.find.attr(e,"type"))+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function Ht(e,t){if(1===t.nodeType&&w.hasData(e)){var n,r,i,s=w._data(e),o=w._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)w.event.add(t,n,u[n][r])}o.data&&(o.data=w.extend({},o.data))}}function Bt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!w.support.noCloneEvent&&t[w.expando]){i=w._data(t);for(r in i.events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}"script"===n&&t.text!==e.text?(_t(t).text=e.text,Dt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;null!=(s=r[o]);o++)!n||w.nodeName(s,n)?u.push(s):w.merge(u,jt(s,n));return n===t||n&&w.nodeName(e,n)?w.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===w.css(e,"display")||!w.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=w._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(s[o]=w._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&"none"!==n||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=w.css(e,n+Zt[s],!0,i)),r?("content"===n&&(o-=w.css(e,"padding"+Zt[s],!0,i)),"margin"!==n&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=w.css(e,"padding"+Zt[s],!0,i),"padding"!==n&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Rt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Jt.test(i))return i;r=o&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=o,n=Qt[e];return n||(n=fn(e,t),"none"!==n&&n||(It=(It||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach()),Qt[e]=n),n}function fn(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(w.isArray(t))w.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==w.type(t))r(e,t);else for(i in t)vn(e+"["+i+"]",t[i],n,r)}function _n(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(S)||[];if(w.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,n,r,i){function u(a){var f;return s[a]=!0,w.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||o||s[l]?o?!(f=l):t:(n.dataTypes.unshift(l),u(l),!1)}),f}var s={},o=e===An;return u(n.dataTypes[0])||!s["*"]&&u("*")}function Pn(e,n){var r,i,s=w.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&w.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function Bn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=w.now()}function Zn(e,t,n){var r,i=(Gn[t]||[]).concat(Gn["*"]),s=0,o=i.length;for(;o>s;s++)if(r=i[s].call(n,t,e))return r}function er(e,t,n){var r,i,s=0,o=Qn.length,u=w.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(tr(l,f.opts.specialEasing);o>s;s++)if(r=Qn[s].call(f,e,l,f.opts))return r;return w.map(l,Zn,f),w.isFunction(f.opts.start)&&f.opts.start.call(e,f),w.fx.timer(w.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(n in e)if(r=w.camelCase(n),i=t[r],s=e[n],w.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=w.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function nr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&nn(e),p=w._data(e,"fxshow");n.queue||(u=w._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,w.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],"inline"===w.css(e,"display")&&"none"===w.css(e,"float")&&(w.support.inlineBlockNeedsLayout&&"inline"!==an(e.nodeName)?c.zoom=1:c.display="inline-block")),n.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],$n.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(h?"hide":"show"))continue;l[r]=p&&p[r]||w.style(e,r)}if(!w.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=w._data(e,"fxshow",{}),s&&(p.hidden=!h),h?w(e).show():f.done(function(){w(e).hide()}),f.done(function(){var t;w._removeData(e,"fxshow");for(t in l)w.style(e,t,l[t])});for(r in l)o=Zn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return w.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.location,o=e.document,u=o.documentElement,a=e.jQuery,f=e.$,l={},c=[],h="1.10.2",p=c.concat,d=c.push,v=c.slice,m=c.indexOf,g=l.toString,y=l.hasOwnProperty,b=h.trim,w=function(e,t){return new w.fn.init(e,t,r)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,O=/^-ms-/,M=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()},D=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(P(),w.ready())},P=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",D,!1),e.removeEventListener("load",D,!1)):(o.detachEvent("onreadystatechange",D),e.detachEvent("onload",D))};w.fn=w.prototype={jquery:h,constructor:w,init:function(e,n,r){var i,s;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),N.test(i[1])&&w.isPlainObject(n))for(i in n)w.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(s=o.getElementById(i[2]),s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||w.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(w.isPlainObject(r)||(n=w.isArray(r)))?(n?(n=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},u[i]=w.extend(l,o,r)):r!==t&&(u[i]=r));return u},w.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=f),t&&e.jQuery===w&&(e.jQuery=a),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?!--w.readyWait:!w.isReady){if(!o.body)return setTimeout(w.ready);w.isReady=!0,e!==!0&&--w.readyWait>0||(n.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===w.type(e)},isArray:Array.isArray||function(e){return"array"===w.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[g.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==w.type(e)||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(w.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=N.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=w.trim(n),n&&C.test(n.replace(L,"@").replace(A,"]").replace(k,"")))?Function("return "+n)():(w.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(O,"ms-").replace(M,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=H(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("﻿ ")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(H(Object(e))?w.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=H(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return p.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),w.isFunction(e)?(r=v.call(arguments,2),i=function(){return e.apply(n||this,r.concat(v.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===w.type(r)){s=!0;for(a in r)w.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,w.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),w.ready.promise=function(t){if(!n)if(n=w.Deferred(),"complete"===o.readyState)setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",D,!1),e.addEventListener("load",D,!1);else{o.attachEvent("onreadystatechange",D),e.attachEvent("onload",D);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function s(){if(!w.isReady){try{r.doScroll("left")}catch(e){return setTimeout(s,50)}P(),w.ready()}}()}return n.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=w(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,w;if((t?t.ownerDocument||t:E)!==h&&c(t),t=t||h,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(9===a){if(o=t.getElementById(u),!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){if(m=p=b,g=t,w=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,w=l.join(",")}if(w)try{return H.apply(n,g.querySelectorAll(w)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){(!n||(r=X.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=V.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length));for(o in s.filter)!(r=G[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&"parentNode"===r,o=x++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||s)if(l=t[b]||(t[b]={}),(f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else if(f=l[r]=[c],f[1]=e(t,n,u)||i,f[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:wt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;i>a;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=s.filter[e[a].type].apply(null,e[a].matches),n[b]){for(r=++a;i>r;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(W,"$1"),n,r>a&&St(e.slice(a,r)),i>r&&St(e=e.slice(r)),i>r&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=null!=p,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=null==x?1:Math.random()||.1;for(E&&(f=a!==h&&a,i=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=D.call(c));g=wt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&1===h.length){if(u=h[0]=h[0].slice(0),u.length>2&&"ID"===(f=u[0]).type&&r.getById&&9===t.nodeType&&d&&s.relative[u[1].type]){if(t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){if(f=u[o],s.relative[l=f.type])break;if((c=s.find[l])&&(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t))){if(u.splice(o,1),e=i.length&&gt(u),!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=RegExp("^"+I+"*,"+I+"*"),V=RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=RegExp(I+"*[+~]"),J=RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=RegExp(z),Q=RegExp("^"+R+"$"),G={ID:RegExp("^#("+q+")"),CLASS:RegExp("^\\.("+q+")"),TAG:RegExp("^("+q.replace("w","w*")+")"),ATTR:RegExp("^"+U),PSEUDO:RegExp("^"+z),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:RegExp("^(?:"+F+")$","i"),needsContext:RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{H.apply(_=B.call(E.childNodes),E.childNodes),_[E.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=ot.support={},c=ot.setDocument=function(e){var n=e?e.ownerDocument||e:E,i=n.defaultView;return n!==h&&9===n.nodeType&&n.documentElement?(h=n,p=n.documentElement,d=!u(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ft(function(e){return p.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==A&&d?n.getElementsByClassName(e):t},m=[],v=[],(r.qsa=Y.test(n.querySelectorAll))&&(ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&RegExp(v.join("|")),m=m.length&&RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,t){if(e===t)return k=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||y(E,e)?-1:t===n||y(E,t)?1:l?j.call(l,e)-j.call(l,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(e===t)return k=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:l?j.call(l,e)-j.call(l,t):0;if(s===o)return ct(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===E?-1:a[i]===E?1:0},n):h},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']"),!(!r.matchesSelector||!d||m&&m.test(t)||v&&v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;if(k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L),k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[b]||(c[b]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(h.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(F,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var B={};w.Callbacks=function(e){e="string"==typeof e?B[e]||j(e):w.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){for(r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;a&&s>o;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){w.each(t,function(t,n){var r=w.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&w.each(arguments,function(e,t){var r;while((r=w.inArray(t,a,r))>-1)a.splice(r,1),n&&(s>=r&&s--,o>=r&&o--)}),this},has:function(e){return e?w.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||i&&!f||(t=t||[],t=[e,t.slice?t.slice():t],n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,s){var o=s[0],u=w.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=v.call(arguments),r=n.length,i=1!==r||e&&w.isFunction(e.promise)?r:0,s=1===i?e:w.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?v.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&w.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),w.support=function(t){var n,r,s,u,a,f,l,c,h,p=o.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;u=o.createElement("select"),f=u.appendChild(o.createElement("option")),s=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==p.className,t.leadingWhitespace=3===p.firstChild.nodeType,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!s.value,t.optSelected=f.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),a=o.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style.backgroundClip;for(h in w(t))break;return t.ownLast="0"!==h,w(function(){var n,r,s,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=o.getElementsByTagName("body")[0];a&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===p.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,r=p.appendChild(o.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=r=null)}),n=u=a=f=r=s=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length&&(s=w.data(u),1===u.nodeType&&!w._data(u,"parsedAttrs"))){for(r=u.attributes;r.length>o;o++)i=r[o].name,0===i.indexOf("data-")&&(i=w.camelCase(i.slice(5)),U(u,i,s[i]));w._data(u,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?U(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=w._data(e,n),r&&(!i||w.isArray(r)?i=w._data(e,n,w.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?w.queue(this[0],e):n===t?this:this.each(function(){var t=w.queue(this,e,n);w._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=w.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=w._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var W,X,V=/[\t\r\n\f]/g,$=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Q=/^(?:checked|selected)$/i,G=w.support.getSetAttribute,Y=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(S)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(V," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=w.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(S)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(V," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,r=0,s=w(this),o=e.match(S)||[];while(t=o[r++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(n===i||"boolean"===n)&&(this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(V," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=w.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=i?e.call(this,n,w(this).val()):e,null==s?s="":"number"==typeof s?s+="":w.isArray(s)&&(s=w.map(s,function(e){return null==e?"":e+""})),r=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace($,""):null==n?"":n)}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(w.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&w.nodeName(n.parentNode,"optgroup"))){if(t=w(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=w.makeArray(t),o=i.length;while(o--)r=i[o],(r.selected=w.inArray(w(r).val(),s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?w.prop(e,n,r):(1===u&&w.isXMLDoc(e)||(n=n.toLowerCase(),s=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:W)),r===t?s&&"get"in s&&null!==(o=s.get(e,n))?o:(o=w.find.attr(e,n),null==o?t:o):null!==r?s&&"set"in s&&(o=s.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r):(w.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(S);if(s&&1===e.nodeType)while(n=s[i++])r=w.propFix[n]||n,w.expr.match.bool.test(n)?Y&&G||!Q.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&"radio"===t&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!w.isXMLDoc(e),o&&(n=w.propFix[n]||n,s=w.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?w.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,n){var r=w.expr.attrHandle[n]||w.find.attr;w.expr.attrHandle[n]=Y&&G||!Q.test(n)?function(e,n,i){var s=w.expr.attrHandle[n],o=i?t:(w.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return w.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[w.camelCase("default-"+n)]?n.toLowerCase():null}}),Y&&G||(w.attrHooks.value={set:function(e,n,r){return w.nodeName(e,"input")?(e.defaultValue=n,t):W&&W.set(e,n,r)}}),G||(W={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},w.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:W.set},w.attrHooks.contenteditable={set:function(e,t,n){W.set(e,""===t?!1:t,n)}},w.each(["width","height"],function(e,n){w.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,n){return w.isArray(n)?e.checked=w.inArray(w(e).val(),n)>=0:t}},w.support.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;w.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=w._data(e);if(y){r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=w.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof w===i||e&&w.event.triggered===e.type?t:w.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(S)||[""],f=n.length;while(f--)u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),v&&(c=w.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=w.event.special[v]||{},p=w.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:m.join(".")},l),(d=a[v])||(d=a[v]=[],d.delegateCount=0,c.setup&&c.setup.call(e,s,m,h)!==!1||(e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),w.event.global[v]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=w.hasData(e)&&w._data(e);if(m&&(l=m.events)){t=(t||"").match(S)||[""],f=t.length;while(f--)if(u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||w.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)w.event.remove(e,p+t[f],n,r,!0);w.isEmptyObject(l)&&(delete m.handle,w._removeData(e,"events"))}},trigger:function(n,r,i,s){var u,a,f,l,c,h,p,d=[i||o],v=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(f=h=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(v+w.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=0>v.indexOf(":")&&"on"+v,n=n[w.expando]?n:new w.Event(v,"object"==typeof n&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:w.makeArray(r,[n]),c=w.event.special[v]||{},s||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!s&&!c.noBubble&&!w.isWindow(i)){for(l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||o)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(w._data(f,"events")||{})[n.type]&&w._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&w.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();if(n.type=v,!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&w.acceptData(i)&&a&&i[v]&&!w.isWindow(i)){h=i[a],h&&(i[a]=null),w.event.triggered=v;try{i[v]()}catch(g){}w.event.triggered=t,h&&(i[a]=h)}return n.result}},dispatch:function(e){e=w.event.fix(e);var n,r,i,s,o,u=[],a=v.call(arguments),f=(w._data(this,"events")||{})[e.type]||[],l=w.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=w.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?w(r,this).index(f)>=0:w.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new w.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,u=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===ot()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return w.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},w.Event=function(e,n){return this instanceof w.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,n&&w.extend(this,n),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0,t):new w.Event(e,n)},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!w.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){return w.nodeName(this,"form")?!1:(w.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=w.nodeName(n,"input")||w.nodeName(n,"button")?n.form:t;r&&!w._data(r,"submitBubbles")&&(w.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),w._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return w.nodeName(this,"form")?!1:(w.event.remove(this,"._submit"),t)}}),w.support.changeBubbles||(w.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(w.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)})),!1):(w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=st;else if(!i)return this;return 1===s&&(u=i,i=function(e){return w().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=st),this.each(function(){w.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?w.event.trigger(e,n,r,!0):t}});var ut=/^.[^:#\[\.,]*$/,at=/^(?:parents|prev(?:Until|All))/,ft=w.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;i>t;t++)if(w.contains(r[t],this))return!0}));for(t=0;i>t;t++)w.find(e,r[t],n);return n=this.pushStack(i>1?w.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e||[],!0))},filter:function(e){return this.pushStack(ht(this,e||[],!1))},is:function(e){return!!ht(this,"string"==typeof e&&ft.test(e)?w(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||"string"!=typeof e?w(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?"string"==typeof e?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(lt[e]||(i=w.unique(i)),at.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!w(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(o),Ot=At.appendChild(o.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Mt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?w.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||w.cleanData(jt(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&w.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(vt,""):t;if(!("string"!=typeof e||St.test(e)||!w.support.htmlSerialize&&mt.test(e)||!w.support.leadingWhitespace&&gt.test(e)||Lt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(w.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=p.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,d=e[0],v=w.isFunction(d);if(v||!(1>=l||"string"!=typeof d||w.support.checkClone)&&Tt.test(d))return this.each(function(r){var i=c.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(l&&(a=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,1===a.childNodes.length&&(a=r),r)){for(o=w.map(jt(a,"script"),_t),s=o.length;l>f;f++)i=a,f!==h&&(i=w.clone(i,!0,!0),s&&w.merge(o,jt(i,"script"))),t.call(this[f],i,f);if(s)for(u=o[o.length-1].ownerDocument,w.map(o,Dt),f=0;s>f;f++)i=o[f],Nt.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(u,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(kt,"")));a=r=null}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var n,r=0,i=[],s=w(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),w(s[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,s,o,u,a=w.contains(e.ownerDocument,e);if(w.support.html5Clone||w.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild)),!(w.support.noCloneEvent&&w.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(r=jt(s),u=jt(e),o=0;null!=(i=u[o]);++o)r[o]&&Bt(i,r[o]);if(t)if(n)for(u=u||jt(e),r=r||jt(s),o=0;null!=(i=u[o]);o++)Ht(i,r[o]);else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;c>d;d++)if(s=e[d],s||0===s)if("object"===w.type(s))w.merge(p,s.nodeType?[s]:s);else if(Et.test(s)){u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!w.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0])),!w.support.tbody){s="table"!==a||wt.test(s)?"<table>"!==l[1]||wt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)w.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}w.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(s));u&&h.removeChild(u),w.support.appendChecked||w.grep(jt(p,"input"),Ft),d=0;while(s=p[d++])if((!r||-1===w.inArray(s,r))&&(o=w.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u),n)){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=w.expando,f=w.cache,l=w.support.deleteExpando,h=w.event.special;for(;null!=(n=e[u]);u++)if((t||w.acceptData(n))&&(s=n[a],o=s&&f[s])){if(o.events)for(r in o.events)h[r]?w.event.remove(n,r):w.removeEvent(n,r,o.handle);f[s]&&(delete f[s],l?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,c.push(s))}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=RegExp("^("+E+")(.*)$","i"),Jt=RegExp("^("+E+")(?!px)[a-z%]+$","i"),Kt=RegExp("^([+-])=("+E+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];w.fn.extend({css:function(e,n){return w.access(this,function(e,n,r){var i,s,o={},u=0;if(w.isArray(n)){for(s=qt(e),i=n.length;i>u;u++)o[n[u]]=w.css(e,n[u],!1,s);return o}return r!==t?w.style(e,n,r):w.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=w.camelCase(n),f=e.style;if(n=w.cssProps[a]||(w.cssProps[a]=tn(f,a)),u=w.cssHooks[n]||w.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(w.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||w.cssNumber[a]||(r+="px"),w.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=w.camelCase(n);return n=w.cssProps[a]||(w.cssProps[a]=tn(e.style,a)),u=w.cssHooks[n]||w.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),"normal"===o&&n in Yt&&(o=Yt[n]),""===r||r?(s=parseFloat(o),r===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||w.contains(e.ownerDocument,e)||(a=w.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):o.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),w.each(["height","width"],function(e,n){w.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(w.css(e,"display"))?w.swap(e,Gt,function(){return un(e,n,i)}):un(e,n,i):t},set:function(e,t,r){var i=r&&qt(e);return sn(e,t,r?on(e,n,r,w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,i),i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===w.trim(s.replace(Ut,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i)}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,n){return n?w.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,n){w.cssHooks[n]={get:function(e,r){return r?(r=Rt(e,n),Jt.test(r)?w(e).position()[n]+"px":r):t}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!w.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||w.css(e,"display"))},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(w.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),w.param=function(e,n){var r,i=[],s=function(e,t){t=w.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=w.ajaxSettings&&w.ajaxSettings.traditional),w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,gn,yn=w.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=w.fn.load,Ln={},An={},On="*/".concat("*");try{gn=s.href}catch(Mn){gn=o.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],w.fn.load=function(e,n,r){if("string"!=typeof e&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),w.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&w.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,w.ajaxSettings),t):Pn(w.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;2!==b&&(b=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,r&&(E=Hn(c,x,r)),E=Bn(c,E,x,l),l?(c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(w.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(w.etag[s]=S)),204===e||"HEAD"===c.type?T="nocontent":304===e?T="notmodified":(T=E.state,g=E.data,y=E.error,l=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--w.active||w.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=w.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?w(h):w.event,d=w.Deferred(),v=w.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),N(0,t),this}};if(d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(S)||[""],null==c.crossDomain&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=w.param(c.data,c.traditional)),Dn(Ln,c,n,x),2===b)return x;a=c.global,a&&0===w.active++&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&2!==b){E="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);if(f=Dn(An,c,n,x)){x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(2>b))throw T;N(-1,T)}}else N(-1,"No Transport");return x}return x.abort()},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,n){return w.get(e,t,n,"script")}}),w.each(["get","post"],function(e,n){w[n]=function(e,r,i,s){return w.isFunction(r)&&(s=s||i,i=r,r=t),w.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||w("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||w.expando+"_"+yn++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=w.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||w.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&w.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=w.ajaxSettings.xhr(),w.support.cors=!!qn&&"withCredentials"in qn,qn=w.support.ajax=!!qn,qn&&w.ajaxTransport(function(n){if(!n.crossDomain||w.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=w.noop,Un&&delete In[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Rn,Un&&(In||(In={},w(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Jn.exec(t),s=i&&i[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||"px"!==s&&+r)&&Jn.exec(w.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,w.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};w.Animation=w.extend(er,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),w.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=w.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[w.cssProps[e.prop]]||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=er(this,w.extend({},e),s);(i||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=w.timers,o=w._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};return r.duration=w.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){w.isFunction(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=rr.prototype.init,w.fx.tick=function(){var e,n=w.timers,r=0;for(Xn=w.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||w.fx.stop(),Xn=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Vn||(Vn=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Vn),Vn=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(u)return n=u.documentElement,w.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");"static"===r&&(e.style.position="relative");var i=w(e),s=i.offset(),o=w.css(e,"top"),u=w.css(e,"left"),a=("absolute"===r||"fixed"===r)&&w.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),w.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},w.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===w.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u;while(e&&!w.nodeName(e,"html")&&"static"===w.css(e,"position"))e=e.offsetParent;return e||u})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);w.fn[e]=function(i){return w.access(this,function(e,i,s){var o=sr(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?w(o).scrollLeft():s,r?s:w(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,n){w.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){w.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return w.access(this,function(n,r,i){var s;return w.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?w.css(n,r,u):w.style(n,r,i,u)},n,o?i:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=w:(e.jQuery=e.$=w,"function"==typeof define&&define.amd&&define("jquery",[],function(){return w}))}(window),function(){function e(e,t,n){n=(n||0)-1;for(var r=e?e.length:0;++n<r;)if(e[n]===t)return n;return-1}function t(t,n){var r=typeof n;if(t=t.l,"boolean"==r||null==n)return t[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:w+n;return t=(t=t[r])&&t[i],"object"==r?t&&-1<e(t,n)?0:-1:t?0:-1}function n(e){var t=this.l,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:w+e,t=t[n]||(t[n]={});"object"==n?(t[r]||(t[r]=[])).push(e):t[r]=!0}}function r(e){return e.charCodeAt(0)}function i(e,t){var n=e.m,r=t.m;if(n!==r){if(n>r||typeof n=="undefined")return 1;if(n<r||typeof r=="undefined")return-1}return e.n-t.n}function s(e){var t=-1,r=e.length,i=e[0],s=e[0|r/2],o=e[r-1];if(i&&typeof i=="object"&&s&&typeof s=="object"&&o&&typeof o=="object")return!1;for(i=a(),i["false"]=i["null"]=i["true"]=i.undefined=!1,s=a(),s.k=e,s.l=i,s.push=n;++t<r;)s.push(e[t]);return s}function o(e){return"\\"+Z[e]}function u(){return m.pop()||[]}function a(){return g.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,"undefined":!1,o:null}}function f(e){return typeof e.toString!="function"&&typeof (e+"")=="string"}function l(){}function c(e){e.length=0,m.length<S&&m.push(e)}function h(e){var t=e.l;t&&h(t),e.k=e.l=e.m=e.object=e.number=e.string=e.o=null,g.length<S&&g.push(e)}function p(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1;n=n-t||0;for(var i=Array(0>n?0:n);++r<n;)i[r]=e[t+r];return i}function d(n){function m(e){return e&&typeof e=="object"&&!$n(e)&&wn.call(e,"__wrapped__")?e:new g(e)}function g(e,t){this.__chain__=!!t,this.__wrapped__=e}function S(e,t,n,r,i){if(n){var s=n(e);if(typeof s!="undefined")return s}if(!Et(e))return e;var o=kn.call(e);if(!J[o]||!Xn.nodeClass&&f(e))return e;var a=zn[o];switch(o){case q:case R:return new a(+e);case W:case $:return new a(e);case V:return s=a(e.source,A.exec(e)),s.lastIndex=e.lastIndex,s}if(o=$n(e),t){var l=!r;r||(r=u()),i||(i=u());for(var h=r.length;h--;)if(r[h]==e)return i[h];s=o?a(e.length):{}}else s=o?p(e):ir({},e);return o&&(wn.call(e,"index")&&(s.index=e.index),wn.call(e,"input")&&(s.input=e.input)),t?(r.push(e),i.push(s),(o?rr:ur)(e,function(e,o){s[o]=S(e,t,n,r,i)}),l&&(c(r),c(i)),s):s}function Z(e,t,n){if(typeof e!="function")return Jt;if(typeof t=="undefined")return e;var r=e.__bindData__||Xn.funcNames&&!e.name;if(typeof r=="undefined"){var i=P&&yn.call(e);Xn.funcNames||!i||O.test(i)||(r=!0),(Xn.funcNames||!r)&&(r=!Xn.funcDecomp||P.test(i),Vn(e,r))}if(!0!==r&&r&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return Xt(e,t)}function tt(e,t,n,r){r=(r||0)-1;for(var i=e?e.length:0,s=[];++r<i;){var o=e[r];if(o&&typeof o=="object"&&typeof o.length=="number"&&($n(o)||mt(o))){t||(o=tt(o,t,n));var u=-1,a=o.length,f=s.length;for(s.length+=a;++u<a;)s[f++]=o[u]}else n||s.push(o)}return s}function nt(e,t,n,r,i,s){if(n){var o=n(e,t);if(typeof o!="undefined")return!!o}if(e===t)return 0!==e||1/e==1/t;if(e===e&&!(e&&Y[typeof e]||t&&Y[typeof t]))return!1;if(null==e||null==t)return e===t;var a=kn.call(e),l=kn.call(t);if(a==F&&(a=X),l==F&&(l=X),a!=l)return!1;switch(a){case q:case R:return+e==+t;case W:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case V:case $:return e==un(t)}if(l=a==I,!l){if(wn.call(e,"__wrapped__")||wn.call(t,"__wrapped__"))return nt(e.__wrapped__||e,t.__wrapped__||t,n,r,i,s);if(a!=X||!Xn.nodeClass&&(f(e)||f(t)))return!1;var a=!Xn.argsObject&&mt(e)?sn:e.constructor,h=!Xn.argsObject&&mt(t)?sn:t.constructor;if(a!=h&&!(wt(a)&&a instanceof a&&wt(h)&&h instanceof h))return!1}for(h=!i,i||(i=u()),s||(s=u()),a=i.length;a--;)if(i[a]==e)return s[a]==t;var p=0,o=!0;if(i.push(e),s.push(t),l){if(a=e.length,p=t.length,o=p==e.length,!o&&!r)return o;for(;p--;)if(l=a,h=t[p],r)for(;l--&&!(o=nt(e[l],h,n,r,i,s)););else if(!(o=nt(e[p],h,n,r,i,s)))break;return o}return or(t,function(t,u,a){return wn.call(a,u)?(p++,o=wn.call(e,u)&&nt(e[u],t,n,r,i,s)):void 0}),o&&!r&&or(e,function(e,t,n){return wn.call(n,t)?o=-1<--p:void 0}),h&&(c(i),c(s)),o}function it(e,t,n,r,i){($n(t)?At:ur)(t,function(t,s){var o,u,a=t,f=e[s];if(t&&((u=$n(t))||ar(t))){for(a=r.length;a--;)if(o=r[a]==t){f=i[a];break}if(!o){var l;n&&(a=n(f,t),l=typeof a!="undefined")&&(f=a),l||(f=u?$n(f)?f:[]:ar(f)?f:{}),r.push(t),i.push(f),l||it(f,t,n,r,i)}}else n&&(a=n(f,t),typeof a=="undefined"&&(a=t)),typeof a!="undefined"&&(f=a);e[s]=f})}function ut(n,r,i){var o=-1,a=pt(),f=n?n.length:0,l=[],p=!r&&f>=E&&a===e,d=i||p?u():l;if(p){var v=s(d);v?(a=t,d=v):(p=!1,d=i?d:(c(d),l))}for(;++o<f;){var v=n[o],m=i?i(v,o,n):v;(r?!o||d[d.length-1]!==m:0>a(d,m))&&((i||p)&&d.push(m),l.push(v))}return p?(c(d.k),h(d)):i&&c(d),l}function at(e){return function(t,n,r){var i={};if(n=m.createCallback(n,r,3),$n(t)){r=-1;for(var s=t.length;++r<s;){var o=t[r];e(i,o,n(o,r,t),t)}}else rr(t,function(t,r,s){e(i,t,n(t,r,s),s)});return i}}function ft(e,t,n,r,i,s){var o=1&t,u=2&t,a=4&t,f=8&t,l=16&t,c=32&t,h=e;if(!u&&!wt(e))throw new an;l&&!n.length&&(t&=-17,l=n=!1),c&&!r.length&&(t&=-33,c=r=!1);var p=e&&e.__bindData__;if(p)return!o||1&p[1]||(p[4]=i),!o&&1&p[1]&&(t|=8),!a||4&p[1]||(p[5]=s),l&&Sn.apply(p[2]||(p[2]=[]),n),c&&Sn.apply(p[3]||(p[3]=[]),r),p[1]|=t,ft.apply(null,p);if(!o||u||a||c||!(Xn.fastBind||On&&l))v=function(){var p=arguments,d=o?i:this;return(a||l||c)&&(p=qn.call(p),l&&Ln.apply(p,n),c&&Sn.apply(p,r),a&&p.length<s)?(t|=16,ft(e,f?t:-4&t,p,null,i,s)):(u&&(e=d[h]),this instanceof v?(d=ct(e.prototype),p=e.apply(d,p),Et(p)?p:d):e.apply(d,p))};else{if(l){var d=[i];Sn.apply(d,n)}var v=l?On.apply(e,d):On.call(e,i)}return Vn(v,qn.call(arguments)),v}function lt(){G.h=j,G.b=G.c=G.g=G.i="",G.e="t",G.j=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)G[n]=e[n];t=G.a,G.d=/^[^,]+/.exec(t)[0],e=tn,t="return function("+t+"){",n=G;var r="var n,t="+n.d+",E="+n.e+";if(!t)return E;"+n.i+";";n.b?(r+="var u=t.length;n=-1;if("+n.b+"){",Xn.unindexedChars&&(r+="if(s(t)){t=t.split('')}"),r+="while(++n<u){"+n.g+";}}else{"):Xn.nonEnumArgs&&(r+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+n.g+";}}else{"),Xn.enumPrototypes&&(r+="var G=typeof t=='function';"),Xn.enumErrorProps&&(r+="var F=t===k||t instanceof Error;");var i=[];if(Xn.enumPrototypes&&i.push('!(G&&n=="prototype")'),Xn.enumErrorProps&&i.push('!(F&&(n=="message"||n=="name"))'),n.j&&n.f)r+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",i.length&&(r+="if("+i.join("&&")+"){"),r+=n.g+";",i.length&&(r+="}"),r+="}";else if(r+="for(n in t){",n.j&&i.push("m.call(t, n)"),i.length&&(r+="if("+i.join("&&")+"){"),r+=n.g+";",i.length&&(r+="}"),r+="}",Xn.nonEnumShadows){for(r+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)r+="n='"+n.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",n.j||(r+="||(!x[n]&&t[n]!==A[n])"),r+="){"+n.g+"}";r+="}"}return(n.b||Xn.nonEnumArgs)&&(r+="}"),r+=n.c+";return E",e("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",t+r+"}")(Z,U,ln,wn,b,mt,$n,xt,G.f,cn,Y,Wn,$,hn,kn)}function ct(e){return Et(e)?Mn(e):{}}function ht(e){return Zn[e]}function pt(){var t=(t=m.indexOf)===It?e:t;return t}function dt(e){var t,n;return!e||kn.call(e)!=X||(t=e.constructor,wt(t)&&!(t instanceof t))||!Xn.argsClass&&mt(e)||!Xn.nodeClass&&f(e)?!1:Xn.ownLast?(or(e,function(e,t,r){return n=wn.call(r,t),!1}),!1!==n):(or(e,function(e,t){n=t}),typeof n=="undefined"||wn.call(e,n))}function vt(e){return er[e]}function mt(e){return e&&typeof e=="object"&&typeof e.length=="number"&&kn.call(e)==F||!1}function gt(e,t,n){var r=Kn(e),i=r.length;for(t=Z(t,n,3);i--&&(n=r[i],!1!==t(e[n],n,e)););return e}function yt(e){var t=[];return or(e,function(e,n){wt(e)&&t.push(n)}),t.sort()}function bt(e){for(var t=-1,n=Kn(e),r=n.length,i={};++t<r;){var s=n[t];i[e[s]]=s}return i}function wt(e){return typeof e=="function"}function Et(e){return!!e&&!!Y[typeof e]}function St(e){return typeof e=="number"||kn.call(e)==W}function xt(e){return typeof e=="string"||kn.call(e)==$}function Tt(e){for(var t=-1,n=Kn(e),r=n.length,i=Yt(r);++t<r;)i[t]=e[n[t]];return i}function Nt(e,t,n){var r=-1,i=pt(),s=e?e.length:0,o=!1;return n=(0>n?Bn(0,s+n):n)||0,$n(e)?o=-1<i(e,t,n):typeof s=="number"?o=-1<(xt(e)?e.indexOf(t,n):i(e,t,n)):rr(e,function(e){return++r<n?void 0:!(o=e===t)}),o}function Ct(e,t,n){var r=!0;if(t=m.createCallback(t,n,3),$n(e)){n=-1;for(var i=e.length;++n<i&&(r=!!t(e[n],n,e)););}else rr(e,function(e,n,i){return r=!!t(e,n,i)});return r}function kt(e,t,n){var r=[];if(t=m.createCallback(t,n,3),$n(e)){n=-1;for(var i=e.length;++n<i;){var s=e[n];t(s,n,e)&&r.push(s)}}else rr(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Lt(e,t,n){if(t=m.createCallback(t,n,3),!$n(e)){var r;return rr(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r}n=-1;for(var i=e.length;++n<i;){var s=e[n];if(t(s,n,e))return s}}function At(e,t,n){if(t&&typeof n=="undefined"&&$n(e)){n=-1;for(var r=e.length;++n<r&&!1!==t(e[n],n,e););}else rr(e,t,n);return e}function Ot(e,t,n){var r=e,i=e?e.length:0;if(t=t&&typeof n=="undefined"?t:Z(t,n,3),$n(e))for(;i--&&!1!==t(e[i],i,e););else{if(typeof i!="number")var s=Kn(e),i=s.length;else Xn.unindexedChars&&xt(e)&&(r=e.split(""));rr(e,function(e,n,o){return n=s?s[--i]:--i,t(r[n],n,o)})}return e}function Mt(e,t,n){var r=-1,i=e?e.length:0,s=Yt(typeof i=="number"?i:0);if(t=m.createCallback(t,n,3),$n(e))for(;++r<i;)s[r]=t(e[r],r,e);else rr(e,function(e,n,i){s[++r]=t(e,n,i)});return s}function _t(e,t,n){var i=-1/0,s=i;if(!t&&$n(e)){n=-1;for(var o=e.length;++n<o;){var u=e[n];u>s&&(s=u)}}else t=!t&&xt(e)?r:m.createCallback(t,n,3),rr(e,function(e,n,r){n=t(e,n,r),n>i&&(i=n,s=e)});return s}function Dt(e,t,n,r){var i=3>arguments.length;if(t=Z(t,r,4),$n(e)){var s=-1,o=e.length;for(i&&(n=e[++s]);++s<o;)n=t(n,e[s],s,e)}else rr(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function Pt(e,t,n,r){var i=3>arguments.length;return t=Z(t,r,4),Ot(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function Ht(e){var t=-1,n=e?e.length:0,r=Yt(typeof n=="number"?n:0);return At(e,function(e){var n=Qt(++t);r[t]=r[n],r[n]=e}),r}function Bt(e,t,n){var r;if(t=m.createCallback(t,n,3),$n(e)){n=-1;for(var i=e.length;++n<i&&!(r=t(e[n],n,e)););}else rr(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function jt(n){var r=-1,i=pt(),o=n?n.length:0,u=tt(arguments,!0,!0,1),a=[],f=o>=E&&i===e;if(f){var l=s(u);l?(i=t,u=l):f=!1}for(;++r<o;)l=n[r],0>i(u,l)&&a.push(l);return f&&h(u),a}function Ft(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&null!=t){var s=-1;for(t=m.createCallback(t,n,3);++s<i&&t(e[s],s,e);)r++}else if(r=t,null==r||n)return e?e[0]:v;return p(e,0,jn(Bn(0,r),i))}function It(t,n,r){if(typeof r=="number"){var i=t?t.length:0;r=0>r?Bn(0,i+r):r||0}else if(r)return r=Rt(t,n),t[r]===n?r:-1;return e(t,n,r)}function qt(e,t,n){if(typeof t!="number"&&null!=t){var r=0,i=-1,s=e?e.length:0;for(t=m.createCallback(t,n,3);++i<s&&t(e[i],i,e);)r++}else r=null==t||n?1:Bn(0,t);return p(e,r)}function Rt(e,t,n,r){var i=0,s=e?e.length:i;for(n=n?m.createCallback(n,r,1):Jt,t=n(t);i<s;)r=i+s>>>1,n(e[r])<t?i=r+1:s=r;return i}function Ut(e,t,n,r){return typeof t!="boolean"&&null!=t&&(n=(r=n)&&r[t]===e?null:t,t=!1),null!=n&&(n=m.createCallback(n,r,3)),ut(e,t,n)}function zt(){for(var e=1<arguments.length?arguments:arguments[0],t=-1,n=e?_t(hr(e,"length")):0,r=Yt(0>n?0:n);++t<n;)r[t]=hr(e,t);return r}function Wt(e,t){for(var n=-1,r=e?e.length:0,i={};++n<r;){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function Xt(e,t){return 2<arguments.length?ft(e,17,qn.call(arguments,2),null,t):ft(e,1,null,null,t)}function Vt(e,t,n){function r(){l&&mn(l),o=l=c=v,(d||p!==t)&&(h=En(),u=e.apply(f,s))}function i(){var n=t-(En()-a);0<n?l=Nn(i,n):(o&&mn(o),n=c,o=l=c=v,n&&(h=En(),u=e.apply(f,s)))}var s,o,u,a,f,l,c,h=0,p=!1,d=!0;if(!wt(e))throw new an;if(t=Bn(0,t)||0,!0===n)var m=!0,d=!1;else Et(n)&&(m=n.leading,p="maxWait"in n&&(Bn(t,n.maxWait)||0),d="trailing"in n?n.trailing:d);return function(){if(s=arguments,a=En(),f=this,c=d&&(l||!m),!1===p)var n=m&&!l;else{o||m||(h=a);var v=p-(a-h);0<v?o||(o=Nn(r,v)):(o&&(o=mn(o)),h=a,u=e.apply(f,s))}return l||t===p||(l=Nn(i,t)),n&&(u=e.apply(f,s)),u}}function $t(e){if(!wt(e))throw new an;var t=qn.call(arguments,1);return Nn(function(){e.apply(v,t)},1)}function Jt(e){return e}function Kt(e,t){var n=e,r=!t||wt(n);t||(n=g,t=e,e=m),At(yt(t),function(i){var s=e[i]=t[i];r&&(n.prototype[i]=function(){var t=this.__wrapped__,r=[t];return Sn.apply(r,arguments),r=s.apply(e,r),t&&typeof t=="object"&&t===r?this:(r=new n(r),r.__chain__=this.__chain__,r)})})}function Qt(e,t,n){var r=null==e,i=null==t;return null==n&&(typeof e=="boolean"&&i?(n=e,e=1):i||typeof t!="boolean"||(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0,r=In(),n||e%1||t%1?jn(e+r*(t-e+parseFloat("1e-"+((r+"").length-1))),t):e+gn(r*(t-e+1))}function Gt(){return this.__wrapped__}n=n?st.defaults(et.Object(),n,st.pick(et,B)):et;var Yt=n.Array,Zt=n.Boolean,en=n.Date,tn=n.Function,nn=n.Math,rn=n.Number,sn=n.Object,on=n.RegExp,un=n.String,an=n.TypeError,fn=[],ln=n.Error.prototype,cn=sn.prototype,hn=un.prototype,pn=n._,dn=on("^"+un(cn.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),vn=nn.ceil,mn=n.clearTimeout,gn=nn.floor,yn=tn.prototype.toString,bn=dn.test(bn=sn.getPrototypeOf)&&bn,wn=cn.hasOwnProperty,En=dn.test(En=en.now)&&En||function(){return+(new en)},Sn=fn.push,xn=cn.propertyIsEnumerable,Tn=n.setImmediate,Nn=n.setTimeout,Cn=fn.splice,kn=cn.toString,Ln=fn.unshift,An=function(){try{var e={},t=dn.test(t=sn.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),On=dn.test(On=kn.bind)&&On,Mn=dn.test(Mn=sn.create)&&Mn,_n=dn.test(_n=Yt.isArray)&&_n,Dn=n.isFinite,Pn=n.isNaN,Hn=dn.test(Hn=sn.keys)&&Hn,Bn=nn.max,jn=nn.min,Fn=n.parseInt,In=nn.random,qn=fn.slice,Rn=dn.test(n.attachEvent),Un=On&&!/\n|true/.test(On+Rn),zn={};zn[I]=Yt,zn[q]=Zt,zn[R]=en,zn[z]=tn,zn[X]=sn,zn[W]=rn,zn[V]=on,zn[$]=un;var Wn={};Wn[I]=Wn[R]=Wn[W]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Wn[q]=Wn[$]={constructor:!0,toString:!0,valueOf:!0},Wn[U]=Wn[z]=Wn[V]={constructor:!0,toString:!0},Wn[X]={constructor:!0},function(){for(var e=j.length;e--;){var t,n=j[e];for(t in Wn)wn.call(Wn,t)&&!wn.call(Wn[t],n)&&(Wn[t][n]=!1)}}(),g.prototype=m.prototype;var Xn=m.support={};!function(){function e(){this.x=1}var t={0:1,length:1},r=[];e.prototype={valueOf:1};for(var i in new e)r.push(i);for(i in arguments);Xn.argsClass=kn.call(arguments)==F,Xn.argsObject=arguments.constructor==sn&&!(arguments instanceof Yt),Xn.enumErrorProps=xn.call(ln,"message")||xn.call(ln,"name"),Xn.enumPrototypes=xn.call(e,"prototype"),Xn.fastBind=On&&!Un,Xn.funcDecomp=!dn.test(n.p)&&P.test(d),Xn.funcNames=typeof tn.name=="string",Xn.nonEnumArgs=0!=i,Xn.nonEnumShadows=!/valueOf/.test(r),Xn.ownLast="x"!=r[0],Xn.spliceObjects=(fn.splice.call(t,0,1),!t[0]),Xn.unindexedChars="xx"!="x"[0]+sn("x")[0];try{Xn.nodeClass=kn.call(document)!=X||!!({toString:0}+"")}catch(s){Xn.nodeClass=!0}}(1),m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:M,variable:"",imports:{_:m}},Mn||(ct=function(e){if(Et(e)){l.prototype=e;var t=new l;l.prototype=null}return t||{}});var Vn=An?function(e,t){Q.value=t,An(e,"__bindData__",Q)}:l;Xn.argsClass||(mt=function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&wn.call(e,"callee")||!1});var $n=_n||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&kn.call(e)==I||!1},Jn=lt({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),Kn=Hn?function(e){return Et(e)?Xn.enumPrototypes&&typeof e=="function"||Xn.nonEnumArgs&&e.length&&mt(e)?Jn(e):Hn(e):[]}:Jn,Qn={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:Kn,g:"if(e(t[n],n,g)===false)return E"},Gn={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:Kn,g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Yn={i:"if(!B[typeof t])return E;"+Qn.i,b:!1},Zn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},er=bt(Zn),tr=on("("+Kn(er).join("|")+")","g"),nr=on("["+Kn(Zn).join("")+"]","g"),rr=lt(Qn),ir=lt(Gn,{i:Gn.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),sr=lt(Gn),or=lt(Qn,Yn,{j:!1}),ur=lt(Qn,Yn);wt(/x/)&&(wt=function(e){return typeof e=="function"&&kn.call(e)==z});var ar=bn?function(e){if(!e||kn.call(e)!=X||!Xn.argsClass&&mt(e))return!1;var t=e.valueOf,n=typeof t=="function"&&(n=bn(t))&&bn(n);return n?e==n||bn(e)==n:dt(e)}:dt,fr=at(function(e,t,n){wn.call(e,n)?e[n]++:e[n]=1}),lr=at(function(e,t,n){(wn.call(e,n)?e[n]:e[n]=[]).push(t)}),cr=at(function(e,t,n){e[n]=t}),hr=Mt;Un&&rt&&typeof Tn=="function"&&($t=function(e){if(!wt(e))throw new an;return Tn.apply(n,arguments)});var pr=8==Fn(x+"08")?Fn:function(e,t){return Fn(xt(e)?e.replace(_,""):e,t||0)};return m.after=function(e,t){if(!wt(t))throw new an;return function(){return 1>--e?t.apply(this,arguments):void 0}},m.assign=ir,m.at=function(e){var t=arguments,n=-1,r=tt(t,!0,!1,1),t=t[2]&&t[2][t[1]]===e?1:r.length,i=Yt(t);for(Xn.unindexedChars&&xt(e)&&(e=e.split(""));++n<t;)i[n]=e[r[n]];return i},m.bind=Xt,m.bindAll=function(e){for(var t=1<arguments.length?tt(arguments,!0,!1,1):yt(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=ft(e[i],1,null,null,e)}return e},m.bindKey=function(e,t){return 2<arguments.length?ft(t,19,qn.call(arguments,2),null,e):ft(t,3,null,null,e)},m.chain=function(e){return e=new g(e),e.__chain__=!0,e},m.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r},m.compose=function(){for(var e=arguments,t=e.length;t--;)if(!wt(e[t]))throw new an;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},m.countBy=fr,m.createCallback=function(e,t,n){var r=typeof e;if(null==e||"function"==r)return Z(e,t,n);if("object"!=r)return function(t){return t[e]};var i=Kn(e),s=i[0],o=e[s];return 1!=i.length||o!==o||Et(o)?function(t){for(var n=i.length,r=!1;n--&&(r=nt(t[i[n]],e[i[n]],null,!0)););return r}:function(e){return e=e[s],o===e&&(0!==o||1/o==1/e)}},m.curry=function(e,t){return t=typeof t=="number"?t:+t||e.length,ft(e,4,null,null,null,t)},m.debounce=Vt,m.defaults=sr,m.defer=$t,m.delay=function(e,t){if(!wt(e))throw new an;var n=qn.call(arguments,2);return Nn(function(){e.apply(v,n)},t)},m.difference=jt,m.filter=kt,m.flatten=function(e,t,n,r){return typeof t!="boolean"&&null!=t&&(n=(r=n)&&r[t]===e?null:t,t=!1),null!=n&&(e=Mt(e,n,r)),tt(e,t)},m.forEach=At,m.forEachRight=Ot,m.forIn=or,m.forInRight=function(e,t,n){var r=[];or(e,function(e,t){r.push(t,e)});var i=r.length;for(t=Z(t,n,3);i--&&!1!==t(r[i--],r[i],e););return e},m.forOwn=ur,m.forOwnRight=gt,m.functions=yt,m.groupBy=lr,m.indexBy=cr,m.initial=function(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&null!=t){var s=i;for(t=m.createCallback(t,n,3);s--&&t(e[s],s,e);)r++}else r=null==t||n?1:t||r;return p(e,0,jn(Bn(0,i-r),i))},m.intersection=function(n){for(var r=arguments,i=r.length,o=-1,a=u(),f=-1,l=pt(),p=n?n.length:0,d=[],v=u();++o<i;){var m=r[o];a[o]=l===e&&(m?m.length:0)>=E&&s(o?r[o]:v)}e:for(;++f<p;){var g=a[0],m=n[f];if(0>(g?t(g,m):l(v,m))){for(o=i,(g||v).push(m);--o;)if(g=a[o],0>(g?t(g,m):l(r[o],m)))continue e;d.push(m)}}for(;i--;)(g=a[i])&&h(g);return c(a),c(v),d},m.invert=bt,m.invoke=function(e,t){var n=qn.call(arguments,2),r=-1,i=typeof t=="function",s=e?e.length:0,o=Yt(typeof s=="number"?s:0);return At(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o},m.keys=Kn,m.map=Mt,m.max=_t,m.memoize=function(e,t){function n(){var r=n.cache,i=t?t.apply(this,arguments):w+arguments[0];return wn.call(r,i)?r[i]:r[i]=e.apply(this,arguments)}if(!wt(e))throw new an;return n.cache={},n},m.merge=function(e){var t=arguments,n=2;if(!Et(e))return e;if("number"!=typeof t[2]&&(n=t.length),3<n&&"function"==typeof t[n-2])var r=Z(t[--n-1],t[n--],2);else 2<n&&"function"==typeof t[n-1]&&(r=t[--n]);for(var t=qn.call(arguments,1,n),i=-1,s=u(),o=u();++i<n;)it(e,t[i],r,s,o);return c(s),c(o),e},m.min=function(e,t,n){var i=1/0,s=i;if(!t&&$n(e)){n=-1;for(var o=e.length;++n<o;){var u=e[n];u<s&&(s=u)}}else t=!t&&xt(e)?r:m.createCallback(t,n,3),rr(e,function(e,n,r){n=t(e,n,r),n<i&&(i=n,s=e)});return s},m.omit=function(e,t,n){var r=pt(),i=typeof t=="function",s={};if(i)t=m.createCallback(t,n,3);else var o=tt(arguments,!0,!1,1);return or(e,function(e,n,u){(i?!t(e,n,u):0>r(o,n))&&(s[n]=e)}),s},m.once=function(e){var t,n;if(!wt(e))throw new an;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},m.pairs=function(e){for(var t=-1,n=Kn(e),r=n.length,i=Yt(r);++t<r;){var s=n[t];i[t]=[s,e[s]]}return i},m.partial=function(e){return ft(e,16,qn.call(arguments,1))},m.partialRight=function(e){return ft(e,32,null,qn.call(arguments,1))},m.pick=function(e,t,n){var r={};if(typeof t!="function")for(var i=-1,s=tt(arguments,!0,!1,1),o=Et(e)?s.length:0;++i<o;){var u=s[i];u in e&&(r[u]=e[u])}else t=m.createCallback(t,n,3),or(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r},m.pluck=hr,m.pull=function(e){for(var t=arguments,n=0,r=t.length,i=e?e.length:0;++n<r;)for(var s=-1,o=t[n];++s<i;)e[s]===o&&(Cn.call(e,s--,1),i--);return e},m.range=function(e,t,n){e=+e||0,n=typeof n=="number"?n:+n||1,null==t&&(t=e,e=0);var r=-1;t=Bn(0,vn((t-e)/(n||1)));for(var i=Yt(t);++r<t;)i[r]=e,e+=n;return i},m.reject=function(e,t,n){return t=m.createCallback(t,n,3),kt(e,function(e,n,r){return!t(e,n,r)})},m.remove=function(e,t,n){var r=-1,i=e?e.length:0,s=[];for(t=m.createCallback(t,n,3);++r<i;)n=e[r],t(n,r,e)&&(s.push(n),Cn.call(e,r--,1),i--);return s},m.rest=qt,m.shuffle=Ht,m.sortBy=function(e,t,n){var r=-1,s=e?e.length:0,o=Yt(typeof s=="number"?s:0);for(t=m.createCallback(t,n,3),At(e,function(e,n,i){var s=o[++r]=a();s.m=t(e,n,i),s.n=r,s.o=e}),s=o.length,o.sort(i);s--;)e=o[s],o[s]=e.o,h(e);return o},m.tap=function(e,t){return t(e),e},m.throttle=function(e,t,n){var r=!0,i=!0;if(!wt(e))throw new an;return!1===n?r=!1:Et(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),K.leading=r,K.maxWait=t,K.trailing=i,Vt(e,t,K)},m.times=function(e,t,n){e=-1<(e=+e)?e:0;var r=-1,i=Yt(e);for(t=Z(t,n,1);++r<e;)i[r]=t(r);return i},m.toArray=function(e){return e&&typeof e.length=="number"?Xn.unindexedChars&&xt(e)?e.split(""):p(e):Tt(e)},m.transform=function(e,t,n,r){var i=$n(e);return t=Z(t,r,4),null==n&&(i?n=[]:(r=e&&e.constructor,n=ct(r&&r.prototype))),(i?rr:ur)(e,function(e,r,i){return t(n,e,r,i)}),n},m.union=function(){return ut(tt(arguments,!0,!0))},m.uniq=Ut,m.values=Tt,m.where=kt,m.without=function(e){return jt(e,qn.call(arguments,1))},m.wrap=function(e,t){if(!wt(t))throw new an;return function(){var n=[e];return Sn.apply(n,arguments),t.apply(this,n)}},m.zip=zt,m.zipObject=Wt,m.collect=Mt,m.drop=qt,m.each=At,m.q=Ot,m.extend=ir,m.methods=yt,m.object=Wt,m.select=kt,m.tail=qt,m.unique=Ut,m.unzip=zt,Kt(m),m.clone=function(e,t,n,r){return typeof t!="boolean"&&null!=t&&(r=n,n=t,t=!1),S(e,t,typeof n=="function"&&Z(n,r,1))},m.cloneDeep=function(e,t,n){return S(e,!0,typeof t=="function"&&Z(t,n,1))},m.contains=Nt,m.escape=function(e){return null==e?"":un(e).replace(nr,ht)},m.every=Ct,m.find=Lt,m.findIndex=function(e,t,n){var r=-1,i=e?e.length:0;for(t=m.createCallback(t,n,3);++r<i;)if(t(e[r],r,e))return r;return-1},m.findKey=function(e,t,n){var r;return t=m.createCallback(t,n,3),ur(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r},m.findLast=function(e,t,n){var r;return t=m.createCallback(t,n,3),Ot(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r},m.findLastIndex=function(e,t,n){var r=e?e.length:0;for(t=m.createCallback(t,n,3);r--;)if(t(e[r],r,e))return r;return-1},m.findLastKey=function(e,t,n){var r;return t=m.createCallback(t,n,3),gt(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r},m.has=function(e,t){return e?wn.call(e,t):!1},m.identity=Jt,m.indexOf=It,m.isArguments=mt,m.isArray=$n,m.isBoolean=function(e){return!0===e||!1===e||kn.call(e)==q},m.isDate=function(e){return e?typeof e=="object"&&kn.call(e)==R:!1},m.isElement=function(e){return e?1===e.nodeType:!1},m.isEmpty=function(e){var t=!0;if(!e)return t;var n=kn.call(e),r=e.length;return n==I||n==$||(Xn.argsClass?n==F:mt(e))||n==X&&typeof r=="number"&&wt(e.splice)?!r:(ur(e,function(){return t=!1}),t)},m.isEqual=function(e,t,n,r){return nt(e,t,typeof n=="function"&&Z(n,r,2))},m.isFinite=function(e){return Dn(e)&&!Pn(parseFloat(e))},m.isFunction=wt,m.isNaN=function(e){return St(e)&&e!=+e},m.isNull=function(e){return null===e},m.isNumber=St,m.isObject=Et,m.isPlainObject=ar,m.isRegExp=function(e){return e&&Y[typeof e]?kn.call(e)==V:!1},m.isString=xt,m.isUndefined=function(e){return typeof e=="undefined"},m.lastIndexOf=function(e,t,n){var r=e?e.length:0;for(typeof n=="number"&&(r=(0>n?Bn(0,r+n):jn(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},m.mixin=Kt,m.noConflict=function(){return n._=pn,this},m.parseInt=pr,m.random=Qt,m.reduce=Dt,m.reduceRight=Pt,m.result=function(e,t){if(e){var n=e[t];return wt(n)?e[t]():n}},m.runInContext=d,m.size=function(e){var t=e?e.length:0;return typeof t=="number"?t:Kn(e).length},m.some=Bt,m.sortedIndex=Rt,m.template=function(e,t,n){var r=m.templateSettings;e||(e=""),n=sr({},n,r);var i,s=sr({},n.imports,r.imports),r=Kn(s),s=Tt(s),u=0,a=n.interpolate||D,f="__p+='",a=on((n.escape||D).source+"|"+a.source+"|"+(a===M?L:D).source+"|"+(n.evaluate||D).source+"|$","g");e.replace(a,function(t,n,r,s,a,l){return r||(r=s),f+=e.slice(u,l).replace(H,o),n&&(f+="'+__e("+n+")+'"),a&&(i=!0,f+="';"+a+";__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),u=l+t.length,t}),f+="';\n",a=n=n.variable,a||(n="obj",f="with("+n+"){"+f+"}"),f=(i?f.replace(T,""):f).replace(N,"$1").replace(C,"$1;"),f="function("+n+"){"+(a?"":n+"||("+n+"={});")+"var __t,__p='',__e=_.escape"+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}";try{var l=tn(r,"return "+f).apply(v,s)}catch(c){throw c.source=f,c}return t?l(t):(l.source=f,l)},m.unescape=function(e){return null==e?"":un(e).replace(tr,vt)},m.uniqueId=function(e){var t=++y;return un(null==e?"":e)+t},m.all=Ct,m.any=Bt,m.detect=Lt,m.findWhere=Lt,m.foldl=Dt,m.foldr=Pt,m.include=Nt,m.inject=Dt,ur(m,function(e,t){m.prototype[t]||(m.prototype[t]=function(){var t=[this.__wrapped__],n=this.__chain__;return Sn.apply(t,arguments),t=e.apply(m,t),n?new g(t,n):t})}),m.first=Ft,m.last=function(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&null!=t){var s=i;for(t=m.createCallback(t,n,3);s--&&t(e[s],s,e);)r++}else if(r=t,null==r||n)return e?e[i-1]:v;return p(e,Bn(0,i-r))},m.sample=function(e,t,n){var r=e?e.length:0;return typeof r!="number"?e=Tt(e):Xn.unindexedChars&&xt(e)&&(e=e.split("")),null==t||n?e?e[Qt(r-1)]:v:(e=Ht(e),e.length=jn(Bn(0,t),e.length),e)},m.take=Ft,m.head=Ft,ur(m,function(e,t){var n="sample"!==t;m.prototype[t]||(m.prototype[t]=function(t,r){var i=this.__chain__,s=e(this.__wrapped__,t,r);return i||null!=t&&(!r||n&&typeof t=="function")?new g(s,i):s})}),m.VERSION="2.2.1",m.prototype.chain=function(){return this.__chain__=!0,this},m.prototype.toString=function(){return un(this.__wrapped__)},m.prototype.value=Gt,m.prototype.valueOf=Gt,rr(["join","pop","shift"],function(e){var t=fn[e];m.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new g(n,e):n}}),rr(["push","reverse","sort","unshift"],function(e){var t=fn[e];m.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),rr(["concat","slice","splice"],function(e){var t=fn[e];m.prototype[e]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)}}),Xn.spliceObjects||rr(["pop","shift","splice"],function(e){var t=fn[e],n="splice"==e;m.prototype[e]=function(){var e=this.__chain__,r=this.__wrapped__,i=t.apply(r,arguments);return 0===r.length&&delete r[0],e||n?new g(i,e):i}}),m}var v,m=[],g=[],y=0,b={},w=+(new Date)+"",E=75,S=40,x=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",T=/\b__p\+='';/g,N=/\b(__p\+=)''\+/g,C=/(__e\(.*?\)|\b__t\))\+'';/g,L=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,A=/\w*$/,O=/^function[ \n\r\t]+\w/,M=/<%=([\s\S]+?)%>/g,_=RegExp("^["+x+"]*0+(?=.$)"),D=/($^)/,P=/\bthis\b/,H=/['\n\r\t\u2028\u2029\\]/g,B="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),F="[object Arguments]",I="[object Array]",q="[object Boolean]",R="[object Date]",U="[object Error]",z="[object Function]",W="[object Number]",X="[object Object]",V="[object RegExp]",$="[object String]",J={};J[z]=!1,J[F]=J[I]=J[q]=J[R]=J[W]=J[X]=J[V]=J[$]=!0;var K={leading:!1,maxWait:0,trailing:!1},Q={configurable:!1,enumerable:!1,value:null,writable:!1},G={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:!1},Y={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},Z={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},et=Y[typeof window]&&window||this,tt=Y[typeof exports]&&exports&&!exports.nodeType&&exports,nt=Y[typeof module]&&module&&!module.nodeType&&module,rt=nt&&nt.exports===tt&&tt,it=Y[typeof global]&&global;!it||it.global!==it&&it.window!==it||(et=it);var st=d();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(et._=st,define("lodash",[],function(){return st})):tt&&nt?rt?(nt.exports=st)._=st:tt._=st:et._=st}.call(this),define("Api",["base64","jquery","lodash"],function(){function e(e,t){this.clientId=e,this.clientSecret=t,this.domain=null,this.root=null,this.token=null,this.version=null,$.ajaxSetup({beforeSend:function(n){n.setRequestHeader("AUTHORIZATION","basic "+Base64.encode(e+":"+t))}})}return e.prototype.authenticateUser=function(e,t,n){var r=$.ajax({url:this.root+"."+this.domain+"/api/v"+this.version+"/oauth2/token",type:"POST",data:{suppress_response_codes:!0,grant_type:"password",client_id:this.clientId,username:e,password:t}});r.done(function(e){n(e)}),r.fail(function(e){console.error(e),n(e)})},e.prototype.getDateInfo=function(e){var t=$.ajax({url:this.root+"."+this.domain+"/api/v"+this.version+"/dateinfo",type:"GET",cache:!1,data:{bearer_token:Skritter.user.get("access_token")}});t.done(function(t){e(t)}),t.fail(function(t){console.error(t),e(t)})},e.prototype.requestBatch=function(e,t){var n=$.ajax({url:this.root+"."+this.domain+"/api/v"+this.version+"/batch?bearer_token="+this.token,type:"POST",data:JSON.stringify(e)});n.done(function(e){t(e.Batch)}),n.fail(function(e){console.error(e),t(e)})},e.prototype.getBatch=function(e,t,n){var r=this,i=0,s=function(e){var o=$.ajax({url:r.root+"."+r.domain+"/api/v"+r.version+"/batch/"+e,type:"GET",cache:!1,data:{bearer_token:r.token}});o.done(function(r){i=0;var o=r.Batch,u=[],a=o.Requests;for(var f in a)_.merge(u,a[f].response,function(e,t){return _.isArray(e)?e.concat(t):undefined});var l=0;for(var c in a)l+=a[c].responseSize;u.responseSize=l,t(u),o.runningRequests>0||a.length>0?setTimeout(function(){s(e)},2e3):n()}),o.fail(function(t){i<5?(i++,setTimeout(function(){s(e)},5e3)):console.error(t)})};s(e)},e.prototype.getItems=function(e,t){var n=this,r=[],i=function(s){var o=$.ajax({url:n.root+"."+n.domain+"/api/v"+n.version+"/items",type:"GET",cache:!1,data:{bearer_token:n.token,ids:s.join("|")}});o.done(function(n){r=r.concat(n.Items),e.length>0?i(e.splice(0,99)):t(r)}),o.fail(function(e){console.error(e),t(e)})};i(e.splice(0,99))},e.prototype.getProgressStats=function(e,t){e.bearer_token=Skritter.user.get("access_token");var n=$.ajax({url:Skritter.settings.get("apiRoot")+"."+Skritter.settings.get("apiDomain")+"/api/v0/progstats",type:"GET",cache:!1,data:e});n.done(function(e){t(e.ProgressStats)}),n.fail(function(e){console.error(e),t(e)})},e.prototype.getReviewErrors=function(e,t){var n=this,r=[],i=function(s){var o=$.ajax({url:n.root+"."+n.domain+"/api/v"+n.version+"/reviews/errors",type:"GET",cache:!1,data:{bearer_token:n.token,cursor:s,offset:e}});o.done(function(e){r=r.concat(e.ReviewErrors),e.cursor?setTimeout(function(){i(e.cursor)},2e3):t(r)}),o.fail(function(e){console.error(e),t(e)})};i()},e.prototype.getSimpTradMap=function(e){var t=$.ajax({url:this.root+"."+this.domain+"/api/v"+this.version+"/simptradmap",type:"GET",cache:!1,data:{bearer_token:this.token}});t.done(function(t){e(t)}),t.fail(function(t){console.error(t),e(t)})},e.prototype.getSRSConfigs=function(e){var t=$.ajax({url:this.root+"."+this.domain+"/api/v"+this.version+"/srsconfigs",type:"GET",cache:!1,data:{bearer_token:this.token}});t.done(function(t){e(t.SRSConfigs)}),t.fail(function(t){console.error(t),e(t)})},e.prototype.getUser=function(e,t){var n=$.ajax({url:this.root+"."+this.domain+"/api/v"+this.version+"/users/"+e,type:"GET",cache:!1,data:{bearer_token:this.token,detailed:!0}});n.done(function(e){t(e.User)}),n.fail(function(e){console.error(e),t(e)})},e.prototype.getVocabLists=function(e,t){var n=this,r=[],i=function(s){var o=$.ajax({url:n.root+"."+n.domain+"/api/v"+n.version+"/vocablists",type:"GET",cache:!1,data:{bearer_token:n.token,sort:e,cursor:s}});o.done(function(e){r=r.concat(e.VocabLists),e.cursor?setTimeout(function(){i(e.cursor)},2e3):t(r,e.cursor)}),o.fail(function(e){console.error(e),t(e)})};i()},e.prototype.getVocabList=function(e,t){var n=$.ajax({url:this.root+"."+this.domain+"/api/v"+this.version+"/vocablists/"+e,type:"GET",cache:!1,data:{bearer_token:this.token}});n.done(function(e){t(e.VocabList)}),n.fail(function(e){console.error(e),t(e)})},e.prototype.getVocabListSection=function(e,t,n){var r=$.ajax({url:this.root+"."+this.domain+"/api/v"+this.version+"/vocablists/"+e+"/sections/"+t,type:"GET",cache:!1,data:{bearer_token:this.token}});r.done(function(e){n(e.VocabListSection)}),r.fail(function(e){console.error(e),n(e)})},e.prototype.postReviews=function(e,t,n){var r=this,i=[],s=function(o){var u=$.ajax({url:r.root+"."+r.domain+"/api/v"+r.version+"/reviews?bearer_token="+r.token+"&date="+t,type:"POST",cache:!1,data:JSON.stringify(o)});u.done(function(t){i=i.concat(o),e.length>0?s(e.splice(0,499)):n(i,t)}),u.fail(function(e){console.error(e),n(e)})};s(e.splice(0,499))},e}),define("Functions",[],function(){var e=function(e){var t=["B","KB","MB","GB","TB"];if(e===0)return"";var n=parseFloat(Math.floor(Math.log(e)/Math.log(1024)));return(e/Math.pow(1024,n)).toFixed(2)+" "+t[n]},t=function(e){var t=e[0],n=e[e.length-1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)*(180/Math.PI)},n=function(e,t,n,r){var i=t,s=0,o=0,u=n;for(var a in e){var f=e[a].x,l=e[a].y;f-r<i&&(i=f-r),l+r>s&&(s=l+r),f+r>o&&(o=f+r),l-r<u&&(u=l-r)}var c=o-i,h=s-u,p={x:c/2,y:h/2};return{x:i,y:u,w:c,h:h,c:p}},r=function(e,t){var n=t.x-e.x;n*=n;var r=t.y-e.y;return r*=r,Math.sqrt(n+r)},i=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,s=r*r+i*i,o=((n.x-e.x)*r+(n.y-e.y)*i)/parseFloat(s);o>1?o=1:o<0&&(o=0);var u=e.x+o*r,a=e.y+o*i,f=u-n.x,l=a-n.y;return Math.sqrt(f*f+l*l)},s=function(e,t,n){n=n?n:18;var i=r(e,t);return i<15?n*=1:i<20?n*=.95:i<25?n*=.9:i<30?n*=.85:i<35?n*=.8:n*=.75,n},o=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},u=function(e){var t=new Date;return e?t.getTime():Math.round(t.getTime()/1e3)},a=function(e,t,n){e=""+e,t=""+t,n=""+n;var r=t.split("");for(var i in r){var s=new RegExp(r[i],"gi");e=e.replace(s,n)}return e},f=function(e,t,n){t=""+t;var r=e+"";while(r.length<n)r=t+""+r;return r};return{bytesToSize:e,getAngle:t,getBoundingRectangle:n,getDistance:r,getLineDeviation:i,getPressurizedStrokeSize:s,getRandomInt:o,getUnixTime:u,maskCharacters:a,pad:f}}),define("require.text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.10",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("require.text!template/home-in.html",[],function(){return'<div id="home-view">\r\n    <div class="navbar navbar-inverse navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                </button>\r\n                <a id="application-name" class="navbar-brand" href="#">{application}</a>\r\n                <a id="login-button" class="navbar-text lr-padding" href="#study">Study</a>\r\n                <a id="vocab-button" class="navbar-text lr-padding" href="#vocab">Vocab</a>\r\n                <a id="options-button" class="navbar-text lr-padding" href="#options">Options</a>\r\n            </div>\r\n            <div class="collapse navbar-collapse">\r\n                <ul class="nav navbar-nav">\r\n                    <li><a href="http://www.skritter.com/blog">Blog</a></li>\r\n                    <li><a href="http://www.skritter.com/forum">Forum</a></li>\r\n                    <li><a href="http://www.skritter.com/faq">Help</a></li>\r\n                    <li><a href="#logout">Log Out</a></li>\r\n                </ul>\r\n            </div><!--/.nav-collapse -->\r\n        </div>\r\n    </div>\r\n\r\n    <div class="container"></div>\r\n</div>'}),define("require.text!template/home-out.html",[],function(){return'<div id="home-view">\r\n    <div class="navbar navbar-inverse navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                </button>\r\n                <a id="application-name" class="navbar-brand" href="#">Project name</a>\r\n                <a id="login-button" class="navbar-text" href="#login">Log In</a>\r\n            </div>\r\n            <div class="collapse navbar-collapse">\r\n                <ul class="nav navbar-nav">\r\n                    <li><a href="http://www.skritter.com/blog">Blog</a></li>\r\n                    <li><a href="http://www.skritter.com/forum">Forum</a></li>\r\n                    <li><a href="http://www.skritter.com/faq">Help</a></li>\r\n                </ul>\r\n            </div><!--/.nav-collapse -->\r\n        </div>\r\n    </div>\r\n\r\n    <div class="container">\r\n        <div class="center-text">\r\n            <h1>Welcome to Skritter HTML5!</h1>\r\n            <p class="lead">Something else more useful should probably go here.</p>\r\n        </div>\r\n    </div>\r\n</div>'}),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.1.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=!t&&!n;!n&&typeof t=="object"&&(n=this),e&&((r={})[e._listenId]=e);for(var s in r)e=r[s],e.off(t,n,this),(i||u.isEmpty(e._events))&&delete this._listeningTo[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=u.uniqueId("l"));return i[s]=t,!r&&typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=u.defaults({},n,u.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},F(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t,n=u.extend({validate:!0},n);if(r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},F(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;F(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||j();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t,{validationError:n})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var v=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};u.extend(v.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.extend({merge:!1},t,g))},remove:function(e,t){var n=!u.isArray(e);e=n?[e]:u.clone(e),t||(t={});var r,i,s,o;for(r=0,i=e.length;r<i;r++){o=e[r]=this.get(e[r]);if(!o)continue;delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),this._removeReference(o)}return n?e[0]:e},set:function(e,t){t=u.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!u.isArray(e);e=n?e?[e]:[]:u.clone(e);var r,i,s,o,a,f,l,c=t.at,h=this.model,d=this.comparator&&c==null&&t.sort!==!1,v=u.isString(this.comparator)?this.comparator:null,g=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!d&&w&&S?[]:!1;for(r=0,i=e.length;r<i;r++){a=e[r],a instanceof p?s=o=a:s=a[h.prototype.idAttribute];if(f=this.get(s))S&&(b[f.cid]=!0),E&&(a=a===o?o.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),d&&!l&&f.hasChanged(v)&&(l=!0)),e[r]=f;else if(w){o=e[r]=this._prepareModel(a,t);if(!o)continue;g.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o)}x&&x.push(f||o)}if(S){for(r=0,i=this.length;r<i;++r)b[(o=this.models[r]).cid]||y.push(o);y.length&&this.remove(y,t)}if(g.length||x&&x.length){d&&(l=!0),this.length+=g.length;if(c!=null)for(r=0,i=g.length;r<i;r++)this.models.splice(c+r,0,g[r]);else{x&&(this.models.length=0);var T=x||g;for(r=0,i=T.length;r<i;r++)this.models.push(T[r])}}l&&this.sort({silent:!0});if(!t.silent){for(r=0,i=g.length;r<i;r++)(o=g[r]).trigger("add",o,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e=this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,u.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,u.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return i.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t=t?u.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(y,function(e){v.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var b=["groupBy","countBy","sortBy"];u.each(b,function(e){v.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var w=o.View=function(e){this.cid=u.uniqueId("view"),e||(e={}),u.extend(this,u.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},E=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];u.extend(w.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(E),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||j()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&x&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var x=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/,H=/[?#].*$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),u.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(H,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var B=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=v.extend=N.extend=w.extend=O.extend=B;var j=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["jquery","lodash","require.text"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),define("view/Home",["require.text!template/home-in.html","require.text!template/home-out.html","backbone"],function(e,t){var n=Backbone.View.extend({initialize:function(){},render:function(){return Skritter.user.isLoggedIn()?this.$el.html(e):this.$el.html(t),this.$("#application-name").text("Skritter"),this},events:{}});return n}),define("PinyinConverter",[],function(){var e={ang1:"āng",ang2:"áng",ang3:"ǎng",ang4:"àng",eng1:"ēng",eng2:"éng",eng3:"ěng",eng4:"èng",ing1:"īng",ing2:"íng",ing3:"ǐng",ing4:"ìng",ong1:"ōng",ong2:"óng",ong3:"ǒng",ong4:"òng",an1:"ān",an2:"án",an3:"ǎn",an4:"àn",en1:"ēn",en2:"én",en3:"ěn",en4:"èn",in1:"īn",in2:"ín",in3:"ǐn",in4:"ìn",un1:"ūn",un2:"ún",un3:"ǔn",un4:"ùn",er2:"ér",er3:"ěr",er4:"èr",ao1:"āo",ao2:"áo",ao3:"ǎo",ao4:"ào",ou1:"ōu",ou2:"óu",ou3:"ǒu",ou4:"òu",ai1:"āi",ai2:"ái",ai3:"ǎi",ai4:"ài",ei1:"ēi",ei2:"éi",ei3:"ěi",ei4:"èi",a1:"ā",a2:"á",a3:"ǎ",a4:"à",e1:"ē",e2:"é",e3:"ě",e4:"è",i1:"ī",i2:"í",i3:"ǐ",i4:"ì",o1:"ō",o2:"ó",o3:"ǒ",o4:"ò",u1:"ū",u2:"ú",u3:"ǔ",u4:"ù",v1:"ǖ",v2:"ǘ",v3:"ǚ",v4:"ǜ",v:"ü"},t=function(t){for(var n in e){var r=new RegExp(e[n],"g");t=t.replace(r,n)}return t},n=function(t){t=t.replace("5","");for(var n in e){var r=new RegExp(n,"g");t=t.replace(r,e[n])}return t};return{toNumber:t,toTone:n}}),define("require.text!template/info.html",[],function(){return'<div id="info-view">\r\n    <div class="navbar navbar-inverse navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <div id="close-button" class="navbar-brand">Close</div>\r\n                <div id="ban-button" class="navbar-text">{ban}</div>\r\n                <div id="star-button" class="navbar-text">{star}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="container">\r\n\r\n        <div class="row">\r\n            <div class="col-md-6">\r\n                <div id="description" class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Overview</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <h1 id="writing">你好</h1>\r\n                        <h3 id="reading">ni2hao3</h3>\r\n                        <h4 id="definition">hello, common greeting</h4>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-6">\r\n                <div id="stats" class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Stats</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <table class="table table-striped">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Part</th>\r\n                                    <th>Next</th>\r\n                                    <th>Last</th>\r\n                                    <th>Spent</th>\r\n                                    <th>Success</th>\r\n                                    <th>Learned</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr id="stat-rune"><td class="spart"></td><td class="snext"></td><td class="slast"></td><td class="sspent"></td><td class="ssuccess"></td><td class="slearned"></td></tr>\r\n                                <tr id="stat-tone"><td class="spart"></td><td class="snext"></td><td class="slast"></td><td class="sspent"></td><td class="ssuccess"></td><td class="slearned"></td></tr>\r\n                                <tr id="stat-rdng"><td class="spart"></td><td class="snext"></td><td class="slast"></td><td class="sspent"></td><td class="ssuccess"></td><td class="slearned"></td></tr>\r\n                                <tr id="stat-defn"><td class="spart"></td><td class="snext"></td><td class="slast"></td><td class="sspent"></td><td class="ssuccess"></td><td class="slearned"></td></tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="row">\r\n            <div class="col-md-6">\r\n                <div id="mnemonic-panel" class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Mnemonic</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <h4 id="mnemonic">The room where you handle public affairs</h4>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-6">\r\n                <div id="contained-panel" class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Contained</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        No contained characters.\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="row">\r\n            <div class="col-md-12">\r\n                <div id="sentence-panel" class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Sentence</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <h3 id="sentence"></h3>\r\n                        <h4 id="sentence-reading"></h4>\r\n                        <h4 id="sentence-translated"></h4>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n</div>'}),define("view/Info",["PinyinConverter","require.text!template/info.html","backbone"],function(e,t){var n=Backbone.View.extend({initialize:function(){n.items=null,n.vocab=null,n.sentence=null},render:function(){if(!Skritter.user.isLoggedIn()){document.location.hash="";return}this.$el.html(t),n.vocab.has("bannedParts")&&this.$("#ban-button").text("{banned}"),n.vocab.get("starred")&&this.$("#star-button").text("{starred}"),this.$("#writing").text(n.vocab.get("writing")),this.$("#reading").text(e.toTone(n.vocab.get("reading"))),this.$("#definition").text(n.vocab.get("definitions")[Skritter.user.getSetting("sourceLang")]),this.$("#sentence").text(n.sentence.get("writing")),this.$("#sentence-reading").text(e.toTone(n.sentence.get("reading"))),this.$("#sentence-translated").text(n.sentence.get("definitions")[Skritter.user.getSetting("sourceLang")]);var r=_.uniq(n.vocab.get("containedVocabIds"));if(r.length>0){this.$("#contained-panel .panel-body").html("");for(var i in r){var s=Skritter.study.vocabs.findWhere({id:r[i]}),o="<div class='contained-vocab'>";o+="<span class='writing'>"+s.get("writing")+"</span>",o+="<span class='reading'>"+e.toTone(s.get("reading"))+": </span>",o+="<span class='definition'>"+s.get("definitions").en+"</span>",o+="</div>",this.$("#contained-panel .panel-body").append(o)}}else this.$("#contained-panel").hide();for(var u in n.items.models){var a=n.items.models[u],f=a.get("part");this.$("#stat-"+f+" .spart").text(f),this.$("#stat-"+f+" .snext").text(a.get("next")-Skritter.fn.getUnixTime()),this.$("#stat-"+f+" .slast").text(Skritter.fn.getUnixTime()-a.get("last")),this.$("#stat-"+f+" .sspent").text(a.get("timeStudied"))}return this},events:{"click.Info #ban-button":"toggleBanned","click.Info #close-button":"goBack","click.Info #star-button":"toggleStarred"},goBack:function(){window.history.back()},load:function(e){n.items=Skritter.study.items.filterBy("id",e,!0),n.vocab=Skritter.study.vocabs.findWhere({id:e}),n.vocab.get("sentenceId")&&(n.sentence=Skritter.study.sentences.findWhere({id:n.vocab.get("sentenceId")}))},toggleBanned:function(){n.vocab.has("bannedParts")?(n.vocab.unset("bannedParts"),this.$("#ban-button").text("{ban}")):(n.vocab.set("bannedParts",["rune","tone","defn","rdng"]),this.$("#ban-button").text("{banned}"))},toggleStarred:function(){n.vocab.get("starred")?(n.vocab.set("starred",!1),this.$("#star-button").text("{star}")):(n.vocab.set("starred",!0),this.$("#star-button").text("{starred}"))}});return n}),define("require.text!template/login.html",[],function(){return'<div id="login-view" style="display:none;">\r\n\r\n    <div class="container">\r\n\r\n        <form class="form-signin">\r\n            <h2 class="form-signin-heading">Please log in</h2>\r\n            <input id="username" type="text" class="form-control" placeholder="Username" value="mcfarljwtest1" autofocus>\r\n            <input id="password" type="password" class="form-control" placeholder="Password" value="skrit123">\r\n            <button id="login-button" class="btn btn-lg btn-primary btn-block" type="button">Log In</button>\r\n            <button id="back-button" class="btn btn-lg btn-default btn-block" type="button">Go Back</button>    \r\n            <div class="error-message"></div>\r\n        </form>\r\n\r\n    </div> <!-- /container -->\r\n\r\n</div>'}),define("view/Login",["require.text!template/login.html","backbone"],function(e){var t=Backbone.View.extend({initialize:function(){},render:function(){return this.$el.html(e),this.$("#login-view").show(Skritter.settings.get("transitionSpeed")),this},events:{"click.Login #back-button":"goBack","click.Login #login-button":"login","keyup.Login #password":"handleEnter"},goBack:function(){document.location.hash=""},handleEnter:function(e){e.keyCode===13&&this.login()},login:function(){var e=this,t=this.$("#username").val(),n=this.$("#password").val();if(!t||t===""||!n||n===""){e.showErrorMessage("Username and password cannot be blank");return}Skritter.facade.show("logging in"),Skritter.user.login(t,n,function(t){t.statusCode!==200?(Skritter.facade.hide(),e.showErrorMessage(t.message)):Skritter.application.reload(function(){Skritter.facade.hide(),document.location.hash=""})})},showErrorMessage:function(e){this.$(".error-message").html("<div class='alert alert-warning'><button type='button' class='close' data-dismiss='alert'>&times;</button>"+e+"</div>")}});return t}),define("require.text!template/options.html",[],function(){return'<div id="options-view">\r\n    <div class="navbar navbar-inverse navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <a id="back-button" class="navbar-brand" href="#">Back</a>\r\n                <a id="save-button" class="navbar-text" href="#">Save</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="container">\r\n        <div class="row">\r\n            <div class="col-md-6">\r\n                <div id="study-settings" class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Study Settings</h3>\r\n                    </div>\r\n                    <div id="parts" class="panel-body">\r\n                        <h4>Parts</h4>\r\n                        <div class="btn-group" >\r\n                            <div class="checkbox">\r\n                                <label>\r\n                                    <input id="part-rune" type="checkbox"> Writing\r\n                                </label>\r\n                            </div>\r\n                            <div class="checkbox">\r\n                                <label>\r\n                                    <input id="part-tone" type="checkbox"> Tone\r\n                                </label>\r\n                            </div>\r\n                            <div class="checkbox">\r\n                                <label>\r\n                                    <input id="part-rdng" type="checkbox"> Reading\r\n                                </label>\r\n                            </div>\r\n                            <div class="checkbox">\r\n                                <label>\r\n                                    <input id="part-defn" type="checkbox"> Definition\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <h4>Audio</h4>\r\n                        <div id="audio" class="btn-group">\r\n                            <button id="audio-on" type="button" class="btn btn-default">On</button>\r\n                            <button id="audio-off" type="button" class="btn btn-default">Off</button>\r\n \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-6">\r\n                <div id="study-settings" class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Stroke Order</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <h4>Animation Speed</h4>\r\n                        <input id="animation-speed" name="animation-speed" type="range" min="1" max="100" value="50">\r\n                        <h4>Order Strictness</h4>\r\n                        <input id="order-strictness" name="order-strictness" type="range" min="1" max="100" value="75">\r\n                        <h4>Raw Squigs</h4>\r\n                        <div id="raw-squigs" class="btn-group">\r\n                            <button id="raw-squigs-on" type="button" class="btn btn-default">On</button>\r\n                            <button id="raw-squigs-off" type="button" class="btn btn-default">Off</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="row">\r\n            <div class="col-md-6 hidden">\r\n                <div id="leap-settings" class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Leap Motion</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-6"></div>\r\n        </div>\r\n    </div>\r\n    \r\n</div>'}),define("view/Options",["require.text!template/options.html","backbone"],function(e){var t=Backbone.View.extend({render:function(){return Skritter.user.isLoggedIn()||(document.location.hash=""),this.$el.html(e),this.load(),this},events:{"click.Options #save-button":"save","click.Options #audio":"toggleAudio","click.Options #raw-squigs":"toggleRawSquigs"},load:function(){var e=Skritter.user.getStudyParts();this.$("#part-rune").prop("checked",_.contains(e,"rune")),this.$("#part-tone").prop("checked",_.contains(e,"tone")),this.$("#part-defn").prop("checked",_.contains(e,"defn")),this.$("#part-rdng").prop("checked",_.contains(e,"rdng")),Skritter.user.get("audio")?this.toggleAudio(null,!0):this.toggleAudio(null,!1),Skritter.user.getSetting("squigs")?this.toggleRawSquigs(null,!0):this.toggleRawSquigs(null,!1),this.$("#animation-speed").attr("value",Skritter.user.getSetting("animationSpeed")*100),this.$("#order-strictness").attr("value",Skritter.user.getSetting("orderWeight")*100)},save:function(){var e=Skritter.user.get("settings").targetLang;e==="zh"?e="chineseStudyParts":e="japaneseStudyParts";var t=[];this.$("#part-defn").prop("checked")&&t.push("defn"),this.$("#part-rdng").prop("checked")&&t.push("rdng"),this.$("#part-rune").prop("checked")&&t.push("rune"),this.$("#part-tone").prop("checked")&&t.push("tone"),this.$("#audio .active")[0].id==="audio-on"?Skritter.user.set("audio",!0):Skritter.user.set("audio",!1),Skritter.user.setSetting(e,t),Skritter.user.setSetting("animationSpeed",this.$("#animation-speed").val()/100),Skritter.user.setSetting("orderWeight",this.$("#order-strictness").val()/100),this.$("#raw-squigs .active")[0].id==="raw-squigs-on"?Skritter.user.setSetting("squigs",!0):Skritter.user.setSetting("squigs",!1),Skritter.user.cache()},toggleAudio:function(e,t){var n=e?e.target.id:!1;n==="audio-on"||t?(this.$("#audio-on").addClass("active"),this.$("#audio-off").removeClass("active")):(this.$("#audio-off").addClass("active"),this.$("#audio-on").removeClass("active"))},toggleRawSquigs:function(e,t){var n=e?e.target.id:!1;n==="raw-squigs-on"||t?(this.$("#raw-squigs-on").addClass("active"),this.$("#raw-squigs-off").removeClass("active")):(this.$("#raw-squigs-off").addClass("active"),this.$("#raw-squigs-on").removeClass("active"))}});return t}),define("Scheduler",[],function(){function e(){this.config=Skritter.study.srsconfigs}return e.prototype.getInterval=function(e,t){var n=this.config.findWhere({lang:Skritter.user.getSetting("targetLang"),part:e.get("part")}),r,i=function(e){return Math.round(e*(.925+Math.random()*.15))};if(!e.has("last")){switch(t){case 1:r=n.get("initialWrongInterval");break;case 2:r=n.get("initialRightInterval")/5;break;case 3:r=n.get("initialRightInterval");break;case 4:r=n.get(0/0)}return i(r)}var s=Skritter.fn.getUnixTime()-e.get("last"),o,u=e.get("successes")/e.get("reviews"),a=e.get("next")-e.get("last");if(t===2)o=.9;else if(t===4)o=3.5;else{var f=t===1?n.get("wrongFactors"):n.get("rightFactors"),l=[2,1200,18e3,691200],c;for(var h in l)e.get("interval")>l[h]&&(c=h);o=f[c]}return t>2&&(o-=1,o*=s/a,o+=1),e.get("successes")===e.get("reviews")&&e.get("reviews")<5&&(o*=1.5),e.get("reviews")>8&&u<.5&&(o*=Math.pow(u,.7)),r=i(e.get("interval")*o),t===1?r>604800?r=604800:r<30&&(r=30):r>315569260?r=315569260:t===2&&r<300?r=300:r<30&&(r=30),r},e}),define("model/StudyReview",["backbone"],function(){var e=Backbone.Model.extend({initialize:function(){this.on("change",this.cache),this.cache()},cache:function(e){Skritter.storage.setItem("reviews",this.toJSON(),function(){typeof e=="function"&&e()})}});return e}),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype;t.type=null,t.target=null,t.currentTarget=null,t.eventPhase=0,t.bubbles=!1,t.cancelable=!1,t.timeStamp=0,t.defaultPrevented=!1,t.propagationStopped=!1,t.immediatePropagationStopped=!1,t.removed=!1,t.initialize=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=(new Date).getTime()},t.preventDefault=function(){this.defaultPrevented=!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){var e=function(){},t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent},t._listeners=null,t._captureListeners=null,t.initialize=function(){},t.addEventListener=function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t},t.on=function(e,t,n,r,i,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),r&&e.remove()},s)},t.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var s=0,o=i.length;o>s;s++)if(i[s]==t){1==o?delete r[e]:i.splice(s,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t){if("string"==typeof e){var n=this._listeners;if(!n||!n[e])return!1;e=new createjs.Event(e)}if(e.target=t||this,e.bubbles&&this.parent){for(var r=this,i=[r];r.parent;)i.push(r=r.parent);var s,o=i.length;for(s=o-1;s>=0&&!e.propagationStopped;s--)i[s]._dispatchEvent(e,1+(0==s));for(s=1;o>s&&!e.propagationStopped;s++)i[s]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;e.currentTarget=this,e.eventPhase=t,e.removed=!1,i=i.slice();for(var s=0;n>s&&!e.immediatePropagationStopped;s++){var o=i[s];o.handleEvent?o.handleEvent(e):o(e),e.removed&&(this.off(e.type,o,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){createjs.indexOf=function(e,t){for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1}}(),this.createjs=this.createjs||{},function(){var e=function(){throw"UID cannot be instantiated"};e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ticker cannot be instantiated."};e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.useRAF=!1,e.timingMode=null,e.maxDelta=0,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){!e._inited&&e.init(),e._addEventListener.apply(e,arguments)},e._paused=!1,e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.setInterval(e._interval))},e.reset=function(){if(e._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(e._timerId)}else clearTimeout(e._timerId);e.removeAllEventListeners("tick")},e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval},e.getMeasuredTickTime=function(t){var n=0,r=e._tickTimes;if(r.length<1)return-1;t=Math.min(r.length,t||0|e.getFPS());for(var i=0;t>i;i++)n+=r[i];return r/t},e.getMeasuredFPS=function(t){var n=e._times;return n.length<2?-1:(t=Math.min(n.length-1,t||0|e.getFPS()),1e3/((n[0]-n[t])/t))},e.setPaused=function(t){e._paused=t},e.getPaused=function(){return e._paused},e.getTime=function(t){return e._getTime()-e._startTime-(t?e._pausedTime:0)},e.getEventTime=function(t){return(e._lastTime||e._startTime)-(t?e._pausedTime:0)},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleSynch=function(){var t=e._getTime()-e._startTime;e._timerId=null,e._setupTick(),t-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(null==e._timerId){var t=e.timingMode||e.useRAF&&e.RAF_SYNCHED;if(t==e.RAF_SYNCHED||t==e.RAF){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(n)return e._timerId=n(t==e.RAF?e._handleRAF:e._handleSynch),e._raf=!0,void 0}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e._getTime()-e._startTime,n=t-e._lastTime,r=e._paused;if(e._ticks++,r&&(e._pausedTicks++,e._pausedTime+=n),e._lastTime=t,e.hasEventListener("tick")){var i=new createjs.Event("tick"),s=e.maxDelta;i.delta=s&&n>s?s:n,i.paused=r,i.time=t,i.runTime=t-e._pausedTime,e.dispatchEvent(i)}for(e._tickTimes.unshift(e._getTime()-t);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(t);e._times.length>100;)e._times.pop()};var t=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return t&&t.call(performance)||(new Date).getTime()},createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s,o,u,a,f){this.initialize(e,t,n,r,i,s,o,u,a,f)},t=e.prototype=new createjs.Event;t.stageX=0,t.stageY=0,t.rawX=0,t.rawY=0,t.nativeEvent=null,t.pointerID=0,t.primary=!1,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t.Event_initialize=t.initialize,t.initialize=function(e,t,n,r,i,s,o,u,a,f){this.Event_initialize(e,t,n),this.stageX=r,this.stageY=i,this.nativeEvent=s,this.pointerID=o,this.primary=u,this.rawX=null==a?r:a,this.rawY=null==f?i:f},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},t.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s){this.initialize(e,t,n,r,i,s)},t=e.prototype;e.identity=null,e.DEG_TO_RAD=Math.PI/180,t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.alpha=1,t.shadow=null,t.compositeOperation=null,t.initialize=function(e,t,n,r,i,s){return this.a=null==e?1:e,this.b=t||0,this.c=n||0,this.d=null==r?1:r,this.tx=i||0,this.ty=s||0,this},t.prepend=function(e,t,n,r,i,s){var o=this.tx;if(1!=e||0!=t||0!=n||1!=r){var u=this.a,a=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*r,this.c=a*e+this.d*n,this.d=a*t+this.d*r}return this.tx=o*e+this.ty*n+i,this.ty=o*t+this.ty*r+s,this},t.append=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return this.a=e*o+t*a,this.b=e*u+t*f,this.c=n*o+r*a,this.d=n*u+r*f,this.tx=i*o+s*a+this.tx,this.ty=i*u+s*f+this.ty,this},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty),this.prependProperties(e.alpha,e.shadow,e.compositeOperation),this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty),this.appendProperties(e.alpha,e.shadow,e.compositeOperation),this},t.prependTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return(f||l)&&(this.tx-=f,this.ty-=l),o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.prepend(h*r,p*r,-p*i,h*i,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n)):this.prepend(h*r,p*r,-p*i,h*i,t,n),this},t.appendTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n),this.append(h*r,p*r,-p*i,h*i,0,0)):this.append(h*r,p*r,-p*i,h*i,t,n),(f||l)&&(this.tx-=f*this.a+l*this.c,this.ty-=f*this.b+l*this.d),this},t.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,s=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=s*t-this.ty*n,this.ty=s*n+this.ty*t,this},t.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},t.translate=function(e,t){return this.tx+=e,this.ty+=t,this},t.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},t.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},t.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},t.transformPoint=function(e,t,n){return n=n||{},n.x=e*this.a+t*this.c+this.tx,n.y=e*this.b+t*this.d+this.ty,n},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a);return n==r?(t.rotation=r/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=r/e.DEG_TO_RAD),t},t.reinitialize=function(e,t,n,r,i,s,o,u,a){return this.initialize(e,t,n,r,i,s),this.alpha=null==o?1:o,this.shadow=u,this.compositeOperation=a,this},t.copy=function(e){return this.reinitialize(e.a,e.b,e.c,e.d,e.tx,e.ty,e.alpha,e.shadow,e.compositeOperation)},t.appendProperties=function(e,t,n){return this.alpha*=e,this.shadow=t||this.shadow,this.compositeOperation=n||this.compositeOperation,this},t.prependProperties=function(e,t,n){return this.alpha*=e,this.shadow=this.shadow||t,this.compositeOperation=this.compositeOperation||n,this},t.clone=function(){return(new e).copy(this)},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,createjs.Matrix2D=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.initialize(e,t)},t=e.prototype;t.x=0,t.y=0,t.initialize=function(e,t){return this.x=null==e?0:e,this.y=null==t?0:t,this},t.copy=function(e){return this.initialize(e.x,e.y)},t.clone=function(){return new e(this.x,this.y)},t.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;t.x=0,t.y=0,t.width=0,t.height=0,t.initialize=function(e,t,n,r){return this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this},t.copy=function(e){return this.initialize(e.x,e.y,e.width,e.height)},t.clone=function(){return new e(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s,o){this.initialize(e,t,n,r,i,s,o)},t=e.prototype;t.target=null,t.overLabel=null,t.outLabel=null,t.downLabel=null,t.play=!1,t._isPressed=!1,t._isOver=!1,t.initialize=function(e,t,n,r,i,s,o){e.addEventListener&&(this.target=e,e.cursor="pointer",this.overLabel=null==n?"over":n,this.outLabel=null==t?"out":t,this.downLabel=null==r?"down":r,this.play=i,this.setEnabled(!0),this.handleEvent({}),s&&(o&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(o)),e.hitArea=s))},t.setEnabled=function(e){var t=this.target;e?(t.addEventListener("rollover",this),t.addEventListener("rollout",this),t.addEventListener("mousedown",this),t.addEventListener("pressup",this)):(t.removeEventListener("rollover",this),t.removeEventListener("rollout",this),t.removeEventListener("mousedown",this),t.removeEventListener("pressup",this))},t.toString=function(){return"[ButtonHelper]"},t.handleEvent=function(e){var t,n=this.target,r=e.type;"mousedown"==r?(this._isPressed=!0,t=this.downLabel):"pressup"==r?(this._isPressed=!1,t=this._isOver?this.overLabel:this.outLabel):"rollover"==r?(this._isOver=!0,t=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,t=this._isPressed?this.overLabel:this.outLabel),this.play?n.gotoAndPlay&&n.gotoAndPlay(t):n.gotoAndStop&&n.gotoAndStop(t)},createjs.ButtonHelper=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;e.identity=null,t.color=null,t.offsetX=0,t.offsetY=0,t.blur=0,t.initialize=function(e,t,n,r){this.color=e,this.offsetX=t,this.offsetY=n,this.blur=r},t.toString=function(){return"[Shadow]"},t.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},e.identity=new e("transparent",0,0,0),createjs.Shadow=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.EventDispatcher;t.complete=!0,t.framerate=0,t._animations=null,t._frames=null,t._images=null,t._data=null,t._loadCount=0,t._frameHeight=0,t._frameWidth=0,t._numFrames=0,t._regX=0,t._regY=0,t.initialize=function(e){var t,n,r,i;if(null!=e){if(this.framerate=e.framerate||0,e.images&&(n=e.images.length)>0)for(i=this._images=[],t=0;n>t;t++){var s=e.images[t];if("string"==typeof s){var o=s;s=new Image,s.src=o}i.push(s),s.getContext||s.complete||(this._loadCount++,this.complete=!1,function(e){s.onload=function(){e._handleImageLoad()}}(this))}if(null!=e.frames)if(e.frames instanceof Array)for(this._frames=[],i=e.frames,t=0,n=i.length;n>t;t++){var u=i[t];this._frames.push({image:this._images[u[4]?u[4]:0],rect:new createjs.Rectangle(u[0],u[1],u[2],u[3]),regX:u[5]||0,regY:u[6]||0})}else r=e.frames,this._frameWidth=r.width,this._frameHeight=r.height,this._regX=r.regX||0,this._regY=r.regY||0,this._numFrames=r.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(r=e.animations)){this._data={};var a;for(a in r){var f={name:a},l=r[a];if("number"==typeof l)i=f.frames=[l];else if(l instanceof Array)if(1==l.length)f.frames=[l[0]];else for(f.speed=l[3],f.next=l[2],i=f.frames=[],t=l[0];t<=l[1];t++)i.push(t);else{f.speed=l.speed,f.next=l.next;var c=l.frames;i=f.frames="number"==typeof c?[c]:c.slice(0)}(f.next===!0||void 0===f.next)&&(f.next=a),(f.next===!1||i.length<2&&f.next==a)&&(f.next=null),f.speed||(f.speed=1),this._animations.push(a),this._data[a]=f}}}},t.getNumFrames=function(e){if(null==e)return this._frames?this._frames.length:this._numFrames;var t=this._data[e];return null==t?0:t.frames.length},t.getAnimations=function(){return this._animations.slice(0)},t.getAnimation=function(e){return this._data[e]},t.getFrame=function(e){var t;return this._frames&&(t=this._frames[e])?t:null},t.getFrameBounds=function(e,t){var n=this.getFrame(e);return n?(t||new createjs.Rectangle).initialize(-n.regX,-n.regY,n.rect.width,n.rect.height):null},t.toString=function(){return"[SpriteSheet]"},t.clone=function(){var t=new e;return t.complete=this.complete,t._animations=this._animations,t._frames=this._frames,t._images=this._images,t._data=this._data,t._frameHeight=this._frameHeight,t._frameWidth=this._frameWidth,t._numFrames=this._numFrames,t._loadCount=this._loadCount,t},t._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},t._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var e=0,t=this._frameWidth,n=this._frameHeight,r=0,i=this._images;r<i.length;r++){for(var s=i[r],o=0|(s.width+1)/t,u=0|(s.height+1)/n,a=this._numFrames>0?Math.min(this._numFrames-e,o*u):o*u,f=0;a>f;f++)this._frames.push({image:s,rect:new createjs.Rectangle(f%o*t,(0|f/o)*n,t,n),regX:this._regX,regY:this._regY});e+=a}this._numFrames=e}},createjs.SpriteSheet=e}(),this.createjs=this.createjs||{},function(){function e(e,t,n){this.f=e,this.params=t,this.path=null==n?!0:n}e.prototype.exec=function(e){this.f.apply(e,this.params)};var t=function(){this.initialize()},n=t.prototype;t.getRGB=function(e,t,n,r){return null!=e&&null==n&&(r=t,n=255&e,t=255&e>>8,e=255&e>>16),null==r?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+r+")"},t.getHSL=function(e,t,n,r){return null==r?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+r+")"},t.Command=e,t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"];var r=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");if(r.getContext){var i=t._ctx=r.getContext("2d");t.beginCmd=new e(i.beginPath,[],!1),t.fillCmd=new e(i.fill,[],!1),t.strokeCmd=new e(i.stroke,[],!1),r.width=r.height=1}n._strokeInstructions=null,n._strokeStyleInstructions=null,n._strokeIgnoreScale=!1,n._fillInstructions=null,n._fillMatrix=null,n._instructions=null,n._oldInstructions=null,n._activeInstructions=null,n._active=!1,n._dirty=!1,n.initialize=function(){this.clear(),this._ctx=t._ctx},n.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},n.draw=function(e){this._dirty&&this._updateInstructions();for(var t=this._instructions,n=0,r=t.length;r>n;n++)t[n].exec(e)},n.drawAsPath=function(e){this._dirty&&this._updateInstructions();for(var t,n=this._instructions,r=0,i=n.length;i>r;r++)((t=n[r]).path||0==r)&&t.exec(e)},n.moveTo=function(t,n){return this._activeInstructions.push(new e(this._ctx.moveTo,[t,n])),this},n.lineTo=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.lineTo,[t,n])),this},n.arcTo=function(t,n,r,i,s){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.arcTo,[t,n,r,i,s])),this},n.arc=function(t,n,r,i,s,o){return this._dirty=this._active=!0,null==o&&(o=!1),this._activeInstructions.push(new e(this._ctx.arc,[t,n,r,i,s,o])),this},n.quadraticCurveTo=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.quadraticCurveTo,[t,n,r,i])),this},n.bezierCurveTo=function(t,n,r,i,s,o){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.bezierCurveTo,[t,n,r,i,s,o])),this},n.rect=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.rect,[t,n,r,i])),this},n.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new e(this._ctx.closePath,[]))),this},n.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=this._fillMatrix=null,this._active=this._dirty=this._strokeIgnoreScale=!1,this},n.beginFill=function(t){return this._active&&this._newPath(),this._fillInstructions=t?[new e(this._setProp,["fillStyle",t],!1)]:null,this._fillMatrix=null,this},n.beginLinearGradientFill=function(t,n,r,i,s,o){this._active&&this._newPath();for(var u=this._ctx.createLinearGradient(r,i,s,o),f=0,l=t.length;l>f;f++)u.addColorStop(n[f],t[f]);return this._fillInstructions=[new e(this._setProp,["fillStyle",u],!1)],this._fillMatrix=null,this},n.beginRadialGradientFill=function(t,n,r,i,s,o,u,f){this._active&&this._newPath();for(var l=this._ctx.createRadialGradient(r,i,s,o,u,f),c=0,h=t.length;h>c;c++)l.addColorStop(n[c],t[c]);return this._fillInstructions=[new e(this._setProp,["fillStyle",l],!1)],this._fillMatrix=null,this},n.beginBitmapFill=function(t,n,r){this._active&&this._newPath(),n=n||"";var i=this._ctx.createPattern(t,n);return this._fillInstructions=[new e(this._setProp,["fillStyle",i],!1)],this._fillMatrix=r?[r.a,r.b,r.c,r.d,r.tx,r.ty]:null,this},n.endFill=function(){return this.beginFill()},n.setStrokeStyle=function(n,r,i,s,o){return this._active&&this._newPath(),this._strokeStyleInstructions=[new e(this._setProp,["lineWidth",null==n?"1":n],!1),new e(this._setProp,["lineCap",null==r?"butt":isNaN(r)?r:t.STROKE_CAPS_MAP[r]],!1),new e(this._setProp,["lineJoin",null==i?"miter":isNaN(i)?i:t.STROKE_JOINTS_MAP[i]],!1),new e(this._setProp,["miterLimit",null==s?"10":s],!1)],this._strokeIgnoreScale=o,this},n.beginStroke=function(t){return this._active&&this._newPath(),this._strokeInstructions=t?[new e(this._setProp,["strokeStyle",t],!1)]:null,this},n.beginLinearGradientStroke=function(t,n,r,i,s,o){this._active&&this._newPath();for(var u=this._ctx.createLinearGradient(r,i,s,o),f=0,l=t.length;l>f;f++)u.addColorStop(n[f],t[f]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",u],!1)],this},n.beginRadialGradientStroke=function(t,n,r,i,s,o,u,f){this._active&&this._newPath();for(var l=this._ctx.createRadialGradient(r,i,s,o,u,f),c=0,h=t.length;h>c;c++)l.addColorStop(n[c],t[c]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",l],!1)],this},n.beginBitmapStroke=function(t,n){this._active&&this._newPath(),n=n||"";var r=this._ctx.createPattern(t,n);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.endStroke=function(){return this.beginStroke(),this},n.curveTo=n.quadraticCurveTo,n.drawRect=n.rect,n.drawRoundRect=function(e,t,n,r,i){return this.drawRoundRectComplex(e,t,n,r,i,i,i,i),this},n.drawRoundRectComplex=function(t,n,r,i,s,o,u,f){var l=(i>r?r:i)/2,c=0,h=0,p=0,d=0;0>s&&(s*=c=-1),s>l&&(s=l),0>o&&(o*=h=-1),o>l&&(o=l),0>u&&(u*=p=-1),u>l&&(u=l),0>f&&(f*=d=-1),f>l&&(f=l),this._dirty=this._active=!0;var v=this._ctx.arcTo,m=this._ctx.lineTo;return this._activeInstructions.push(new e(this._ctx.moveTo,[t+r-o,n]),new e(v,[t+r+o*h,n-o*h,t+r,n+o,o]),new e(m,[t+r,n+i-u]),new e(v,[t+r+u*p,n+i+u*p,t+r-u,n+i,u]),new e(m,[t+f,n+i]),new e(v,[t-f*d,n+i+f*d,t,n+i-f,f]),new e(m,[t,n+s]),new e(v,[t-s*c,n-s*c,t+s,n,s]),new e(this._ctx.closePath)),this},n.drawCircle=function(e,t,n){return this.arc(e,t,n,0,2*Math.PI),this},n.drawEllipse=function(t,n,r,i){this._dirty=this._active=!0;var s=.5522848,o=r/2*s,u=i/2*s,f=t+r,l=n+i,c=t+r/2,h=n+i/2;return this._activeInstructions.push(new e(this._ctx.moveTo,[t,h]),new e(this._ctx.bezierCurveTo,[t,h-u,c-o,n,c,n]),new e(this._ctx.bezierCurveTo,[c+o,n,f,h-u,f,h]),new e(this._ctx.bezierCurveTo,[f,h+u,c+o,l,c,l]),new e(this._ctx.bezierCurveTo,[c-o,l,t,h+u,t,h])),this},n.inject=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(t,[n])),this},n.drawPolyStar=function(t,n,r,i,s,o){this._dirty=this._active=!0,null==s&&(s=0),s=1-s,null==o?o=0:o/=180/Math.PI;var u=Math.PI/i;this._activeInstructions.push(new e(this._ctx.moveTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));for(var f=0;i>f;f++)o+=u,1!=s&&this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r*s,n+Math.sin(o)*r*s])),o+=u,this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));return this},n.decodePath=function(e){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],r=[2,2,4,6,0],i=0,s=e.length,o=[],u=0,a=0,f=t.BASE_64;s>i;){var l=e.charAt(i),c=f[l],h=c>>3,p=n[h];if(!p||3&c)throw"bad path data (@"+i+"): "+l;var d=r[h];h||(u=a=0),o.length=0,i++;for(var v=(1&c>>2)+2,m=0;d>m;m++){var g=f[e.charAt(i)],y=g>>5?-1:1;g=(31&g)<<6|f[e.charAt(i+1)],3==v&&(g=g<<6|f[e.charAt(i+2)]),g=y*g/10,m%2?u=g+=u:a=g+=a,o[m]=g,i+=v}p.apply(this,o)}return this},n.clone=function(){var e=new t;return e._instructions=this._instructions.slice(),e._activeInstructions=this._activeInstructions.slice(),e._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(e._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(e._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(e._strokeStyleInstructions=this._strokeStyleInstructions.slice()),e._active=this._active,e._dirty=this._dirty,e._fillMatrix=this._fillMatrix,e._strokeIgnoreScale=this._strokeIgnoreScale,e},n.toString=function(){return"[Graphics]"},n.mt=n.moveTo,n.lt=n.lineTo,n.at=n.arcTo,n.bt=n.bezierCurveTo,n.qt=n.quadraticCurveTo,n.a=n.arc,n.r=n.rect,n.cp=n.closePath,n.c=n.clear,n.f=n.beginFill,n.lf=n.beginLinearGradientFill,n.rf=n.beginRadialGradientFill,n.bf=n.beginBitmapFill,n.ef=n.endFill,n.ss=n.setStrokeStyle,n.s=n.beginStroke,n.ls=n.beginLinearGradientStroke,n.rs=n.beginRadialGradientStroke,n.bs=n.beginBitmapStroke,n.es=n.endStroke,n.dr=n.drawRect,n.rr=n.drawRoundRect,n.rc=n.drawRoundRectComplex,n.dc=n.drawCircle,n.de=n.drawEllipse,n.dp=n.drawPolyStar,n.p=n.decodePath,n._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(t.beginCmd),this._appendInstructions(this._fillInstructions),this._appendInstructions(this._strokeInstructions),this._appendInstructions(this._strokeInstructions&&this._strokeStyleInstructions),this._appendInstructions(this._activeInstructions),this._fillInstructions&&this._appendDraw(t.fillCmd,this._fillMatrix),this._strokeInstructions&&this._appendDraw(t.strokeCmd,this._strokeIgnoreScale&&[1,0,0,1,0,0])},n._appendInstructions=function(e){e&&this._instructions.push.apply(this._instructions,e)},n._appendDraw=function(t,n){n?this._instructions.push(new e(this._ctx.save,[],!1),new e(this._ctx.transform,n,!1),t,new e(this._ctx.restore,[],!1)):this._instructions.push(t)},n._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},n._setProp=function(e,t){this[e]=t},createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype=new createjs.EventDispatcher;e.suppressCrossDomainErrors=!1;var n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(e._hitTestCanvas=n,e._hitTestContext=n.getContext("2d"),n.width=n.height=1),e._nextCacheID=1,t.alpha=1,t.cacheCanvas=null,t.id=-1,t.mouseEnabled=!0,t.name=null,t.parent=null,t.regX=0,t.regY=0,t.rotation=0,t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.shadow=null,t.visible=!0,t.x=0,t.y=0,t.compositeOperation=null,t.snapToPixel=!1,t.filters=null,t.cacheID=0,t.mask=null,t.hitArea=null,t.cursor=null,t._cacheOffsetX=0,t._cacheOffsetY=0,t._cacheScale=1,t._cacheDataURLID=0,t._cacheDataURL=null,t._matrix=null,t._rectangle=null,t._bounds=null,t.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D,this._rectangle=new createjs.Rectangle},t.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},t.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var r,i=this._cacheScale,s=this._cacheOffsetX,o=this._cacheOffsetY;return(r=this._applyFilterBounds(s,o,0,0))&&(s=r.x,o=r.y),e.drawImage(n,s,o,n.width/i,n.height/i),!0},t.updateContext=function(e){var t,n=this.mask,r=this;n&&n.graphics&&!n.graphics.isEmpty()&&(t=n.getMatrix(n._matrix),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),n.graphics.drawAsPath(e),e.clip(),t.invert(),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)),t=r._matrix.identity().appendTransform(r.x,r.y,r.scaleX,r.scaleY,r.rotation,r.skewX,r.skewY,r.regX,r.regY),createjs.Stage._snapToPixelEnabled&&r.snapToPixel?e.transform(t.a,t.b,t.c,t.d,0|t.tx+.5,0|t.ty+.5):e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.globalAlpha*=r.alpha,r.compositeOperation&&(e.globalCompositeOperation=r.compositeOperation),r.shadow&&this._applyShadow(e,r.shadow)},t.cache=function(e,t,n,r,i){i=i||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=n,this._cacheHeight=r,this._cacheOffsetX=e,this._cacheOffsetY=t,this._cacheScale=i,this.updateCache()},t.updateCache=function(t){var n,r=this.cacheCanvas,i=this._cacheScale,s=this._cacheOffsetX*i,o=this._cacheOffsetY*i,u=this._cacheWidth,f=this._cacheHeight;if(!r)throw"cache() must be called before updateCache()";var l=r.getContext("2d");(n=this._applyFilterBounds(s,o,u,f))&&(s=n.x,o=n.y,u=n.width,f=n.height),u=Math.ceil(u*i),f=Math.ceil(f*i),u!=r.width||f!=r.height?(r.width=u,r.height=f):t||l.clearRect(0,0,u+1,f+1),l.save(),l.globalCompositeOperation=t,l.setTransform(i,0,0,i,-s,-o),this.draw(l,!0),this._applyFilters(),l.restore(),this.cacheID=e._nextCacheID++},t.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},t.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},t.getStage=function(){for(var e=this;e.parent;)e=e.parent;return e instanceof createjs.Stage?e:null},t.localToGlobal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.globalToLocal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.invert(),n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.localToLocal=function(e,t,n){var r=this.localToGlobal(e,t);return n.globalToLocal(r.x,r.y)},t.setTransform=function(e,t,n,r,i,s,o,u,a){return this.x=e||0,this.y=t||0,this.scaleX=null==n?1:n,this.scaleY=null==r?1:r,this.rotation=i||0,this.skewX=s||0,this.skewY=o||0,this.regX=u||0,this.regY=a||0,this},t.getMatrix=function(e){var t=this;return(e?e.identity():new createjs.Matrix2D).appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY).appendProperties(t.alpha,t.shadow,t.compositeOperation)},t.getConcatenatedMatrix=function(e){e?e.identity():e=new createjs.Matrix2D;for(var t=this;null!=t;)e.prependTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY).prependProperties(t.alpha,t.shadow,t.compositeOperation),t=t.parent;return e},t.hitTest=function(t,n){var r=e._hitTestContext;r.setTransform(1,0,0,1,-t,-n),this.draw(r);var i=this._testHit(r);return r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),i},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var e=this.cacheCanvas;if(e){var t=this._cacheScale;return this._rectangle.initialize(this._cacheOffsetX,this._cacheOffsetY,e.width/t,e.height/t)}return null},t.getTransformedBounds=function(){return this._getBounds()},t.setBounds=function(e,t,n,r){null==e&&(this._bounds=e),this._bounds=(this._bounds||new createjs.Rectangle).initialize(e,t,n,r)},t.clone=function(){var t=new e;return this.cloneProps(t),t},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t.cloneProps=function(e){e.alpha=this.alpha,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e._bounds=this._bounds,e.mouseEnabled=this.mouseEnabled,e.compositeOperation=this.compositeOperation},t._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},t._tick=function(e){var t=this._listeners;if(t&&t.tick){var n=new createjs.Event("tick");n.params=e,this._dispatchEvent(n,this,2)}},t._testHit=function(t){try{var n=t.getImageData(0,0,1,1).data[3]>1}catch(r){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},t._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,r=this.cacheCanvas.height,i=0;e>i;i++)this.filters[i].applyFilter(t,0,0,n,r)},t._applyFilterBounds=function(e,t,n,r){var i,s,o=this.filters;if(o&&(s=o.length)){for(var u=0;s>u;u++){var a=this.filters[u],f=a.getBounds&&a.getBounds();f&&(i||(i=this._rectangle.initialize(e,t,n,r)),i.x+=f.x,i.y+=f.y,i.width+=f.width,i.height+=f.height)}return i}},t._getBounds=function(e,t){return this._transformBounds(this.getBounds(),e,t)},t._transformBounds=function(e,t,n){if(!e)return e;var r=e.x,i=e.y,s=e.width,o=e.height,u=n?this._matrix.identity():this.getMatrix(this._matrix);(r||i)&&u.appendTransform(0,0,1,1,0,0,0,-r,-i),t&&u.prependMatrix(t);var a=s*u.a,f=s*u.b,l=o*u.c,c=o*u.d,h=u.tx,p=u.ty,d=h,v=h,m=p,g=p;return(r=a+h)<d?d=r:r>v&&(v=r),(r=a+l+h)<d?d=r:r>v&&(v=r),(r=l+h)<d?d=r:r>v&&(v=r),(i=f+p)<m?m=i:i>g&&(g=i),(i=f+c+p)<m?m=i:i>g&&(g=i),(i=c+p)<m?m=i:i>g&&(g=i),e.initialize(d,m,v-d,g-m)},createjs.DisplayObject=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype=new createjs.DisplayObject;t.children=null,t.mouseChildren=!0,t.DisplayObject_initialize=t.initialize,t.initialize=function(){this.DisplayObject_initialize(),this.children=[]},t.isVisible=function(){var e=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(0),r=0,i=n.length;i>r;r++){var s=n[r];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},t.addChild=function(e){if(null==e)return e;var t=arguments.length;if(t>1){for(var n=0;t>n;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e},t.addChildAt=function(e,t){var n=arguments.length,r=arguments[n-1];if(0>r||r>this.children.length)return arguments[n-2];if(n>2){for(var i=0;n-1>i;i++)this.addChildAt(arguments[i],r+i);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e},t.removeChild=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;t>r;r++)n=n&&this.removeChild(arguments[r]);return n}return this.removeChildAt(createjs.indexOf(this.children,e))},t.removeChildAt=function(e){var t=arguments.length;if(t>1){for(var n=[],r=0;t>r;r++)n[r]=arguments[r];n.sort(function(e,t){return t-e});for(var i=!0,r=0;t>r;r++)i=i&&this.removeChildAt(n[r]);return i}if(0>e||e>this.children.length-1)return!1;var s=this.children[e];return s&&(s.parent=null),this.children.splice(e,1),!0},t.removeAllChildren=function(){for(var e=this.children;e.length;)e.pop().parent=null},t.getChildAt=function(e){return this.children[e]},t.getChildByName=function(e){for(var t=this.children,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},t.sortChildren=function(e){this.children.sort(e)},t.getChildIndex=function(e){return createjs.indexOf(this.children,e)},t.getNumChildren=function(){return this.children.length},t.swapChildrenAt=function(e,t){var n=this.children,r=n[e],i=n[t];r&&i&&(n[e]=i,n[t]=r)},t.swapChildren=function(e,t){for(var n,r,i=this.children,s=0,o=i.length;o>s&&(i[s]==e&&(n=s),i[s]==t&&(r=s),null==n||null==r);s++);s!=o&&(i[n]=t,i[r]=e)},t.setChildIndex=function(e,t){var n=this.children,r=n.length;if(!(e.parent!=this||0>t||t>=r)){for(var i=0;r>i&&n[i]!=e;i++);i!=r&&i!=t&&(n.splice(i,1),n.splice(t,0,e))}},t.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},t.hitTest=function(e,t){return null!=this.getObjectUnderPoint(e,t)},t.getObjectsUnderPoint=function(e,t){var n=[],r=this.localToGlobal(e,t);return this._getObjectsUnderPoint(r.x,r.y,n),n},t.getObjectUnderPoint=function(e,t){var n=this.localToGlobal(e,t);return this._getObjectsUnderPoint(n.x,n.y)},t.DisplayObject_getBounds=t.getBounds,t.getBounds=function(){return this._getBounds(null,!0)},t.getTransformedBounds=function(){return this._getBounds()},t.clone=function(t){var n=new e;if(this.cloneProps(n),t)for(var r=n.children=[],i=0,s=this.children.length;s>i;i++){var o=this.children[i].clone(t);o.parent=n,r.push(o)}return n},t.toString=function(){return"[Container (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];n._tick&&n._tick(e)}this.DisplayObject__tick(e)},t._getObjectsUnderPoint=function(t,n,r,i){for(var s=createjs.DisplayObject._hitTestContext,o=this._matrix,u=this.children.length,f=u-1;f>=0;f--){var l=this.children[f],c=i&&l.hitArea;if(l.visible&&(c||l.isVisible())&&(!i||l.mouseEnabled))if(!c&&l instanceof e){var h=l._getObjectsUnderPoint(t,n,r,i);if(!r&&h)return h}else{if(l.getConcatenatedMatrix(o),c&&(o.appendTransform(c.x,c.y,c.scaleX,c.scaleY,c.rotation,c.skewX,c.skewY,c.regX,c.regY),o.alpha=c.alpha),s.globalAlpha=o.alpha,s.setTransform(o.a,o.b,o.c,o.d,o.tx-t,o.ty-n),(c||l).draw(s),!this._testHit(s))continue;if(s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),!r)return i&&!this.mouseChildren?this:l;r.push(l)}}return null},t._getBounds=function(e,t){var n=this.DisplayObject_getBounds();if(n)return this._transformBounds(n,e,t);var r,i,s,o,u=t?this._matrix.identity():this.getMatrix(this._matrix);e&&u.prependMatrix(e);for(var a=this.children.length,f=0;a>f;f++){var l=this.children[f];if(l.visible&&(n=l._getBounds(u))){var c=n.x,h=n.y,p=c+n.width,d=h+n.height;(r>c||null==r)&&(r=c),(p>i||null==i)&&(i=p),(s>h||null==s)&&(s=h),(d>o||null==o)&&(o=d)}}return null==i?null:this._rectangle.initialize(r,s,i-r,o-s)},createjs.Container=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.Container;e._snapToPixelEnabled=!1,t.autoClear=!0,t.canvas=null,t.mouseX=0,t.mouseY=0,t.snapToPixelEnabled=!1,t.mouseInBounds=!1,t.tickOnUpdate=!0,t.mouseMoveOutside=!1,t.nextStage=null,t._pointerData=null,t._pointerCount=0,t._primaryPointerID=null,t._mouseOverIntervalID=null,t.Container_initialize=t.initialize,t.initialize=function(e){this.Container_initialize(),this.canvas="string"==typeof e?document.getElementById(e):e,this._pointerData={},this.enableDOMEvents(!0)},t.update=function(){if(this.canvas){this.tickOnUpdate&&(this.dispatchEvent("tickstart"),this._tick(arguments.length?arguments:null),this.dispatchEvent("tickend")),this.dispatchEvent("drawstart"),e._snapToPixelEnabled=this.snapToPixelEnabled,this.autoClear&&this.clear();var t=this.canvas.getContext("2d");t.save(),this.updateContext(t),this.draw(t,!1),t.restore(),this.dispatchEvent("drawend")}},t.handleEvent=function(e){"tick"==e.type&&this.update(e)},t.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},t.toDataURL=function(e,t){t||(t="image/png");var n,r=this.canvas.getContext("2d"),i=this.canvas.width,s=this.canvas.height;if(e){n=r.getImageData(0,0,i,s);var o=r.globalCompositeOperation;r.globalCompositeOperation="destination-over",r.fillStyle=e,r.fillRect(0,0,i,s)}var u=this.canvas.toDataURL(t);return e&&(r.clearRect(0,0,i+1,s+1),r.putImageData(n,0,0),r.globalCompositeOperation=o),u},t.enableMouseOver=function(e){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==e&&this._testMouseOver(!0)),null==e)e=20;else if(0>=e)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},t.enableDOMEvents=function(e){null==e&&(e=!0);var t,n,r=this._eventListeners;if(!e&&r){for(t in r)n=r[t],n.t.removeEventListener(t,n.f,!1);this._eventListeners=null}else if(e&&!r&&this.canvas){var i=window.addEventListener?window:document,s=this;r=this._eventListeners={},r.mouseup={t:i,f:function(e){s._handleMouseUp(e)}},r.mousemove={t:i,f:function(e){s._handleMouseMove(e)}},r.dblclick={t:i,f:function(e){s._handleDoubleClick(e)}},r.mousedown={t:this.canvas,f:function(e){s._handleMouseDown(e)}};for(t in r)n=r[t],n.t.addEventListener(t,n.f,!1)}},t.clone=function(){var t=new e(null);return this.cloneProps(t),t},t.toString=function(){return"[Stage (name="+this.name+")]"},t._getElementRect=function(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var r=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),i=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(e):e.currentStyle,o=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth),u=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),a=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),f=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:t.left+r+o,right:t.right+r-a,top:t.top+i+u,bottom:t.bottom+i-f}},t._getPointerData=function(e){var t=this._pointerData[e];return t||(t=this._pointerData[e]={x:0,y:0},null==this._primaryPointerID&&(this._primaryPointerID=e)),t},t._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},t._handlePointerMove=function(e,t,n,r){if(this.canvas){var i=this._getPointerData(e),s=i.inBounds;if(this._updatePointerPosition(e,t,n,r),s||i.inBounds||this.mouseMoveOutside){-1==e&&i.inBounds==!s&&this._dispatchMouseEvent(this,s?"mouseleave":"mouseenter",!1,e,i,t),this._dispatchMouseEvent(this,"stagemousemove",!1,e,i,t),this._dispatchMouseEvent(i.target,"pressmove",!0,e,i,t);var o=i.event;o&&o.hasEventListener("mousemove")&&o.dispatchEvent(new createjs.MouseEvent("mousemove",!1,!1,i.x,i.y,t,e,e==this._primaryPointerID,i.rawX,i.rawY),oTarget),this.nextStage&&this.nextStage._handlePointerMove(e,t,n,r)}}},t._updatePointerPosition=function(e,t,n,r){var i=this._getElementRect(this.canvas);n-=i.left,r-=i.top;var s=this.canvas.width,o=this.canvas.height;n/=(i.right-i.left)/s,r/=(i.bottom-i.top)/o;var u=this._getPointerData(e);(u.inBounds=n>=0&&r>=0&&s-1>=n&&o-1>=r)?(u.x=n,u.y=r):this.mouseMoveOutside&&(u.x=0>n?0:n>s-1?s-1:n,u.y=0>r?0:r>o-1?o-1:r),u.posEvtObj=t,u.rawX=n,u.rawY=r,e==this._primaryPointerID&&(this.mouseX=u.x,this.mouseY=u.y,this.mouseInBounds=u.inBounds)},t._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},t._handlePointerUp=function(e,t,n){var r=this._getPointerData(e);this._dispatchMouseEvent(this,"stagemouseup",!1,e,r,t);var i=r.target;i&&(this._getObjectsUnderPoint(r.x,r.y,null,!0)==i&&this._dispatchMouseEvent(i,"click",!0,e,r,t),this._dispatchMouseEvent(i,"pressup",!0,e,r,t));var s=r.event;s&&s.hasEventListener("mouseup")&&s.dispatchEvent(new createjs.MouseEvent("mouseup",!1,!1,r.x,r.y,t,e,e==this._primaryPointerID,r.rawX,r.rawY),i),n?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):r.event=r.target=null,this.nextStage&&this.nextStage._handlePointerUp(e,t,n)},t._handleMouseDown=function(e){this._handlePointerDown(-1,e)},t._handlePointerDown=function(e,t,n,r){null!=r&&this._updatePointerPosition(e,t,n,r);var i=this._getPointerData(e);this._dispatchMouseEvent(this,"stagemousedown",!1,e,i,t),i.target=this._getObjectsUnderPoint(i.x,i.y,null,!0),this._dispatchMouseEvent(i.target,"mousedown",!0,e,i,t),this.nextStage&&this.nextStage._handlePointerDown(e,t,n,r)},t._testMouseOver=function(e){if(-1==this._primaryPointerID&&(e||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var t,n,r,i,s=this._getPointerData(-1),o=s.posEvtObj,u=-1,a="";(e||this.mouseInBounds&&o&&o.target==this.canvas)&&(t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var f=this._mouseOverTarget||[],l=f[f.length-1],c=this._mouseOverTarget=[];for(n=t;n;)c.unshift(n),null!=n.cursor&&(a=n.cursor),n=n.parent;for(this.canvas.style.cursor=a,r=0,i=c.length;i>r&&c[r]==f[r];r++)u=r;for(l!=t&&this._dispatchMouseEvent(l,"mouseout",!0,-1,s,o),r=f.length-1;r>u;r--)this._dispatchMouseEvent(f[r],"rollout",!1,-1,s,o);for(r=c.length-1;r>u;r--)this._dispatchMouseEvent(c[r],"rollover",!1,-1,s,o);l!=t&&this._dispatchMouseEvent(t,"mouseover",!0,-1,s,o)}},t._handleDoubleClick=function(e){var t=this._getPointerData(-1),n=this._getObjectsUnderPoint(t.x,t.y,null,!0);this._dispatchMouseEvent(n,"dblclick",!0,-1,t,e),this.nextStage&&this.nextStage._handleDoubleClick(e)},t._dispatchMouseEvent=function(e,t,n,r,i,s){if(e&&(n||e.hasEventListener(t))){var o=new createjs.MouseEvent(t,n,!1,i.x,i.y,s,r,r==this._primaryPointerID,i.rawX,i.rawY);e.dispatchEvent(o)}},createjs.Stage=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.image=null,t.snapToPixel=!0,t.sourceRect=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),"string"==typeof e?(this.image=new Image,this.image.src=e):this.image=e},t.isVisible=function(){var e=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.sourceRect;return n?e.drawImage(this.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height):e.drawImage(this.image,0,0),!0},t.DisplayObject_getBounds=t.getBounds,t.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;var t=this.sourceRect||this.image,n=this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return n?this._rectangle.initialize(0,0,t.width,t.height):null},t.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this.cloneProps(t),t},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.initialize(e,t)},t=e.prototype=new createjs.DisplayObject;t.currentFrame=0,t.currentAnimation=null,t.paused=!0,t.spriteSheet=null,t.snapToPixel=!0,t.offset=0,t.currentAnimationFrame=0,t.framerate=0,t._advanceCount=0,t._animation=null,t._currentFrame=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e,t){this.DisplayObject_initialize(),this.spriteSheet=e,t&&this.gotoAndPlay(t)},t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(0|this._currentFrame);if(!n)return!1;var r=n.rect;return e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(e){var t=this._animation&&this._animation.speed||1,n=this.framerate||this.spriteSheet.framerate,r=n&&null!=e?e/(1e3/n):1;this._animation?this.currentAnimationFrame+=r*t:this._currentFrame+=r*t,this._normalizeFrame()},t.DisplayObject_getBounds=t.getBounds,t.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},t.clone=function(){var t=new e(this.spriteSheet);return this.cloneProps(t),t},t.toString=function(){return"[Sprite (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){this.paused||this.advance(e&&e[0]&&e[0].delta),this.DisplayObject__tick(e)},t._normalizeFrame=function(){var e,t=this._animation,n=this.paused,r=this._currentFrame,i=this.currentAnimationFrame;if(t)if(e=t.frames.length,(0|i)>=e){var s=t.next;if(!this._dispatchAnimationEnd(t,r,n,s,e-1)){if(s)return this._goto(s,i-e);this.paused=!0,i=this.currentAnimationFrame=t.frames.length-1,this._currentFrame=t.frames[i]}}else this._currentFrame=t.frames[0|i];else if(e=this.spriteSheet.getNumFrames(),r>=e&&!this._dispatchAnimationEnd(t,r,n,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();this.currentFrame=0|this._currentFrame},t._dispatchAnimationEnd=function(e,t,n,r,i){var s=e?e.name:null;if(this.hasEventListener("animationend")){var o=new createjs.Event("animationend");o.name=s,o.next=r,this.dispatchEvent(o)}return!n&&this.paused&&(this.currentAnimationFrame=i),this.paused!=n||this._animation!=e||this._currentFrame!=t},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.currentFrame=this.currentFrame,e._currentFrame=this._currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e._animation=this._animation,e.currentAnimationFrame=this.currentAnimationFrame,e.framerate=this.framerate},t._goto=function(e,t){if(isNaN(e)){var n=this.spriteSheet.getAnimation(e);n&&(this.currentAnimationFrame=t||0,this._animation=n,this.currentAnimation=e,this._normalizeFrame())}else this.currentAnimationFrame=0,this.currentAnimation=this._animation=null,this._currentFrame=e,this._normalizeFrame()},createjs.Sprite=e}(),this.createjs=this.createjs||{},function(){var e="BitmapAnimation is deprecated in favour of Sprite. See VERSIONS file for info on changes.";if(!createjs.Sprite)throw e;(createjs.BitmapAnimation=function(t){console.log(e),this.initialize(t)}).prototype=new createjs.Sprite}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.graphics=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.graphics=e?e:new createjs.Graphics},t.isVisible=function(){var e=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e),!0)},t.clone=function(t){var n=new e(t&&this.graphics?this.graphics.clone():this.graphics);return this.cloneProps(n),n},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.DisplayObject,n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(e._workingContext=n.getContext("2d"),n.width=n.height=1),e.H_OFFSETS={start:0,left:0,center:-0.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-0.01,middle:-0.4,alphabetic:-0.8,ideographic:-0.85,bottom:-1},t.text="",t.font=null,t.color=null,t.textAlign="left",t.textBaseline="top",t.maxWidth=null,t.outline=0,t.lineHeight=0,t.lineWidth=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e,t,n){this.DisplayObject_initialize(),this.text=e,this.font=t,this.color=n},t.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.color||"#000";return this.outline?(e.strokeStyle=n,e.lineWidth=1*this.outline):e.fillStyle=n,this._drawText(this._prepContext(e)),!0},t.getMeasuredWidth=function(){return this._prepContext(e._workingContext).measureText(this.text).width},t.getMeasuredLineHeight=function(){return 1.2*this._prepContext(e._workingContext).measureText("M").width},t.getMeasuredHeight=function(){return this._drawText(null,{}).height},t.DisplayObject_getBounds=t.getBounds,t.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;if(null==this.text||""==this.text)return null;var n=this._drawText(null,{}),r=this.maxWidth&&this.maxWidth<n.width?this.maxWidth:n.width,i=r*e.H_OFFSETS[this.textAlign||"left"],s=this.lineHeight||this.getMeasuredLineHeight(),o=s*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.initialize(i,o,r,n.height)},t.clone=function(){var t=new e(this.text,this.font,this.color);return this.cloneProps(t),t},t.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth},t._prepContext=function(e){return e.font=this.font,e.textAlign=this.textAlign||"left",e.textBaseline=this.textBaseline||"top",e},t._drawText=function(t,n){var r=!!t;r||(t=this._prepContext(e._workingContext));for(var i=this.lineHeight||this.getMeasuredLineHeight(),s=0,o=0,u=String(this.text).split(/(?:\r\n|\r|\n)/),f=0,l=u.length;l>f;f++){var c=u[f],h=null;if(null!=this.lineWidth&&(h=t.measureText(c).width)>this.lineWidth){var p=c.split(/(\s)/);c=p[0],h=t.measureText(c).width;for(var d=1,v=p.length;v>d;d+=2){var m=t.measureText(p[d]+p[d+1]).width;h+m>this.lineWidth?(r&&this._drawTextLine(t,c,o*i),h>s&&(s=h),c=p[d+1],h=t.measureText(c).width,o++):(c+=p[d]+p[d+1],h+=m)}}r&&this._drawTextLine(t,c,o*i),n&&null==h&&(h=t.measureText(c).width),h>s&&(s=h),o++}return n&&(n.count=o,n.width=s,n.height=o*i),n},t._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},createjs.Text=e}(),this.createjs=this.createjs||{},function(){function e(e,t){this.initialize(e,t)}var t=e.prototype=new createjs.DisplayObject;t.text="",t.spriteSheet=null,t.lineHeight=0,t.letterSpacing=0,t.spaceWidth=0,t.DisplayObject_initialize=t.initialize,t.initialize=function(e,t){this.DisplayObject_initialize(),this.text=e,this.spriteSheet=t},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this._drawText(e),void 0)},t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.getBounds=function(){var e=this._rectangle;return this._drawText(null,e),e.width?e:null},t._getFrame=function(e,t){var n,r=t.getAnimation(e);return r||(e!=(n=e.toUpperCase())||e!=(n=e.toLowerCase())||(n=null),n&&(r=t.getAnimation(n))),r&&t.getFrame(r.frames[0])},t._getLineHeight=function(e){var t=this._getFrame("1",e)||this._getFrame("T",e)||this._getFrame("L",e)||e.getFrame(0);return t?t.rect.height:1},t._getSpaceWidth=function(e){var t=this._getFrame("1",e)||this._getFrame("l",e)||this._getFrame("e",e)||this._getFrame("a",e)||e.getFrame(0);return t?t.rect.width:1},t._drawText=function(e,t){var n,r,i,s=0,o=0,u=this.spaceWidth,a=this.lineHeight,f=this.spriteSheet,l=!!this._getFrame(" ",f);l||0!=u||(u=this._getSpaceWidth(f)),0==a&&(a=this._getLineHeight(f));for(var c=0,h=0,p=this.text.length;p>h;h++){var d=this.text.charAt(h);if(l||" "!=d)if("\n"!=d&&"\r"!=d){var v=this._getFrame(d,f);if(v){var m=v.rect;i=v.regX,n=m.width,e&&e.drawImage(v.image,m.x,m.y,n,r=m.height,s-i,o-v.regY,n,r),s+=n+this.letterSpacing}}else"\r"==d&&"\n"==this.text.charAt(h+1)&&h++,s-i>c&&(c=s-i),s=0,o+=a;else s+=u}s-i>c&&(c=s-i),t&&(t.width=c-this.letterSpacing,t.height=o+a)},createjs.BitmapText=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"SpriteSheetUtils cannot be instantiated"},t=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");t.getContext&&(e._workingCanvas=t,e._workingContext=t.getContext("2d"),t.width=t.height=1),e.addFlippedFrames=function(t,n,r,i){if(n||r||i){var s=0;n&&e._flip(t,++s,!0,!1),r&&e._flip(t,++s,!1,!0),i&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var r=t.getFrame(n);if(!r)return null;var i=r.rect,s=e._workingCanvas;s.width=i.width,s.height=i.height,e._workingContext.drawImage(r.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height);var o=new Image;return o.src=s.toDataURL("image/png"),o},e.mergeAlpha=function(e,t,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(t.width,e.width),n.height=Math.max(t.height,e.height);var r=n.getContext("2d");return r.save(),r.drawImage(e,0,0),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),r.restore(),n},e._flip=function(t,n,r,i){for(var s=t._images,o=e._workingCanvas,u=e._workingContext,f=s.length/n,l=0;f>l;l++){var c=s[l];c.__tmp=l,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,o.width+1,o.height+1),o.width=c.width,o.height=c.height,u.setTransform(r?-1:1,0,0,i?-1:1,r?c.width:0,i?c.height:0),u.drawImage(c,0,0);var h=new Image;h.src=o.toDataURL("image/png"),h.width=c.width,h.height=c.height,s.push(h)}var p=t._frames,d=p.length/n;for(l=0;d>l;l++){c=p[l];var v=c.rect.clone();h=s[c.image.__tmp+f*n];var m={image:h,rect:v,regX:c.regX,regY:c.regY};r&&(v.x=h.width-v.x-v.width,m.regX=v.width-c.regX),i&&(v.y=h.height-v.y-v.height,m.regY=v.height-c.regY),p.push(m)}var g="_"+(r?"h":"")+(i?"v":""),y=t._animations,b=t._data,w=y.length/n;for(l=0;w>l;l++){var E=y[l];c=b[E];var S={name:E+g,frequency:c.frequency,next:c.next,frames:[]};c.next&&(S.next+=g),p=c.frames;for(var x=0,T=p.length;T>x;x++)S.frames.push(p[x]+d*n);b[S.name]=S,y.push(S.name)}},createjs.SpriteSheetUtils=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype=new createjs.EventDispatcher;e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",t.maxWidth=2048,t.maxHeight=2048,t.spriteSheet=null,t.scale=1,t.padding=1,t.timeSlice=.3,t.progress=-1,t._frames=null,t._animations=null,t._data=null,t._nextFrameIndex=0,t._index=0,t._timerID=null,t._scale=1,t.initialize=function(){this._frames=[],this._animations={}},t.addFrame=function(t,n,r,i,s,o){if(this._data)throw e.ERR_RUNNING;var u=n||t.bounds||t.nominalBounds;return!u&&t.getBounds&&(u=t.getBounds()),u?(r=r||1,this._frames.push({source:t,sourceRect:u,scale:r,funct:i,params:s,scope:o,index:this._frames.length,height:u.height*r})-1):null},t.addAnimation=function(t,n,r,i){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:r,frequency:i}},t.addMovieClip=function(t,n,r){if(this._data)throw e.ERR_RUNNING;var i=t.frameBounds,s=n||t.bounds||t.nominalBounds;if(!s&&t.getBounds&&(s=t.getBounds()),!s&&!i)return null;for(var o=this._frames.length,u=t.timeline.duration,f=0;u>f;f++){var l=i&&i[f]?i[f]:s;this.addFrame(t,l,r,function(e){var t=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(e),this.actionsEnabled=t},[f],t)}var c=t.timeline._labels,h=[];for(var p in c)h.push({index:c[p],label:p});if(h.length){h.sort(function(e,t){return e.index-t.index});for(var f=0,d=h.length;d>f;f++){for(var v=h[f].label,m=o+h[f].index,g=o+(f==d-1?u:h[f+1].index),y=[],b=m;g>b;b++)y.push(b);this.addAnimation(v,y,!0)}}},t.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,animations:this._animations};var r=this._frames.slice();if(r.sort(function(e,t){return e.height<=t.height?-1:1}),r[r.length-1].height+2*t>this.maxHeight)throw e.ERR_DIMENSIONS;for(var i=0,s=0,o=0;r.length;){var u=this._fillRow(r,i,o,n,t);if(u.w>s&&(s=u.w),i+=u.h,!u.h||!r.length){var f=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");f.width=this._getSize(s,this.maxWidth),f.height=this._getSize(i,this.maxHeight),this._data.images[o]=f,u.h||(s=i=0,o++)}}},t._getSize=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},t._fillRow=function(t,n,r,i,s){var o=this.maxWidth,u=this.maxHeight;n+=s;for(var f=u-n,l=s,c=0,h=t.length-1;h>=0;h--){var p=t[h],d=this._scale*p.scale,v=p.sourceRect,m=p.source,g=Math.floor(d*v.x-s),y=Math.floor(d*v.y-s),b=Math.ceil(d*v.height+2*s),w=Math.ceil(d*v.width+2*s);if(w>o)throw e.ERR_DIMENSIONS;b>f||l+w>o||(p.img=r,p.rect=new createjs.Rectangle(l,n,w,b),c=c||b,t.splice(h,1),i[p.index]=[l,n,w,b,r,Math.round(-g+d*m.regX-s),Math.round(-y+d*m.regY-s)],l+=w)}return{w:l,h:c}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},t._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),t=(new Date).getTime()+e,n=!1;t>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var r=this;this._timerID=setTimeout(function(){r._run()},50-e)}var i=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var s=new createjs.Event("progress");s.progress=i,this.dispatchEvent(s)}},t._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,r=e.sourceRect,i=this._data.images[e.img],s=i.getContext("2d");return e.funct&&e.funct.apply(e.scope,e.params),s.save(),s.beginPath(),s.rect(n.x,n.y,n.width,n.height),s.clip(),s.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),s.scale(t,t),e.source.draw(s),s.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.htmlElement=null,t._oldMtx=null,t._visible=!1,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){"string"==typeof e&&(e=document.getElementById(e)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=e;var t=e.style;t.position="absolute",t.transformOrigin=t.WebkitTransformOrigin=t.msTransformOrigin=t.MozTransformOrigin=t.OTransformOrigin="0% 0%"},t.isVisible=function(){return null!=this.htmlElement},t.draw=function(){return this.visible&&(this._visible=!0),!0},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){throw"DOMElement cannot be cloned."},t.toString=function(){return"[DOMElement (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){var t=this.getStage();this._visible=!1,t&&t.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(e)},t._handleDrawEnd=function(){var e=this.htmlElement;if(e){var t=e.style,n=this._visible?"visible":"hidden";if(n!=t.visibility&&(t.visibility=n),this._visible){var r=this.getConcatenatedMatrix(this._matrix),i=this._oldMtx,s=1e4;if(i&&i.alpha==r.alpha||(t.opacity=""+(0|r.alpha*s)/s,i&&(i.alpha=r.alpha)),!i||i.tx!=r.tx||i.ty!=r.ty||i.a!=r.a||i.b!=r.b||i.c!=r.c||i.d!=r.d){var o="matrix("+(0|r.a*s)/s+","+(0|r.b*s)/s+","+(0|r.c*s)/s+","+(0|r.d*s)/s+","+(0|r.tx+.5);t.transform=t.WebkitTransform=t.OTransform=t.msTransform=o+","+(0|r.ty+.5)+")",t.MozTransform=o+"px,"+(0|r.ty+.5)+"px)",this._oldMtx=i?i.copy(r):r.clone()}}}},createjs.DOMElement=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;t.initialize=function(){},t.getBounds=function(){return null},t.applyFilter=function(){},t.toString=function(){return"[Filter]"},t.clone=function(){return new e},createjs.Filter=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.Filter;t.initialize=function(e,t,n){(isNaN(e)||0>e)&&(e=0),this.blurX=0|e,(isNaN(t)||0>t)&&(t=0),this.blurY=0|t,(isNaN(n)||1>n)&&(n=1),this.quality=0|n},t.blurX=0,t.blurY=0,t.quality=1,t.mul_table=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t.shg_table=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],t.getBounds=function(){var e=.5*Math.pow(this.quality,.6);return new createjs.Rectangle(-this.blurX*e,-this.blurY*e,2*this.blurX*e,2*this.blurY*e)},t.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}var l=this.blurX/2;if(isNaN(l)||0>l)return!1;l|=0;var c=this.blurY/2;if(isNaN(c)||0>c)return!1;if(c|=0,0==l&&0==c)return!1;var h=this.quality;(isNaN(h)||1>h)&&(h=1),h|=0,h>3&&(h=3),1>h&&(h=1);var t,n,p,d,v,m,g,y,b,w,E,S,x,T,N,C=a.data,k=l+l+1,L=c+c+1,A=r-1,O=i-1,M=l+1,_=c+1,D={r:0,b:0,g:0,a:0,next:null},P=D;for(p=1;k>p;p++)P=P.next={r:0,b:0,g:0,a:0,next:null};P.next=D;var H={r:0,b:0,g:0,a:0,next:null},B=H;for(p=1;L>p;p++)B=B.next={r:0,b:0,g:0,a:0,next:null};B.next=H;for(var j=null;h-->0;){g=m=0;var F=this.mul_table[l],I=this.shg_table[l];for(n=i;--n>-1;){for(y=M*(S=C[m]),b=M*(x=C[m+1]),w=M*(T=C[m+2]),E=M*(N=C[m+3]),P=D,p=M;--p>-1;)P.r=S,P.g=x,P.b=T,P.a=N,P=P.next;for(p=1;M>p;p++)d=m+((p>A?A:p)<<2),y+=P.r=C[d],b+=P.g=C[d+1],w+=P.b=C[d+2],E+=P.a=C[d+3],P=P.next;for(j=D,t=0;r>t;t++)C[m++]=y*F>>>I,C[m++]=b*F>>>I,C[m++]=w*F>>>I,C[m++]=E*F>>>I,d=g+((d=t+l+1)<A?d:A)<<2,y-=j.r-(j.r=C[d]),b-=j.g-(j.g=C[d+1]),w-=j.b-(j.b=C[d+2]),E-=j.a-(j.a=C[d+3]),j=j.next;g+=r}for(F=this.mul_table[c],I=this.shg_table[c],t=0;r>t;t++){for(m=t<<2,y=_*(S=C[m]),b=_*(x=C[m+1]),w=_*(T=C[m+2]),E=_*(N=C[m+3]),B=H,p=0;_>p;p++)B.r=S,B.g=x,B.b=T,B.a=N,B=B.next;for(v=r,p=1;c>=p;p++)m=v+t<<2,y+=B.r=C[m],b+=B.g=C[m+1],w+=B.b=C[m+2],E+=B.a=C[m+3],B=B.next,O>p&&(v+=r);if(m=t,j=H,h>0)for(n=0;i>n;n++)d=m<<2,C[d+3]=N=E*F>>>I,N>0?(C[d]=y*F>>>I,C[d+1]=b*F>>>I,C[d+2]=w*F>>>I):C[d]=C[d+1]=C[d+2]=0,d=t+((d=n+_)<O?d:O)*r<<2,y-=j.r-(j.r=C[d]),b-=j.g-(j.g=C[d+1]),w-=j.b-(j.b=C[d+2]),E-=j.a-(j.a=C[d+3]),j=j.next,m+=r;else for(n=0;i>n;n++)d=m<<2,C[d+3]=N=E*F>>>I,N>0?(N=255/N,C[d]=(y*F>>>I)*N,C[d+1]=(b*F>>>I)*N,C[d+2]=(w*F>>>I)*N):C[d]=C[d+1]=C[d+2]=0,d=t+((d=n+_)<O?d:O)*r<<2,y-=j.r-(j.r=C[d]),b-=j.g-(j.g=C[d+1]),w-=j.b-(j.b=C[d+2]),E-=j.a-(j.a=C[d+3]),j=j.next,m+=r}}return s.putImageData(a,o,u),!0},t.clone=function(){return new e(this.blurX,this.blurY,this.quality)},t.toString=function(){return"[BlurFilter]"},createjs.BlurFilter=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.Filter;t.initialize=function(e){this.alphaMap=e},t.alphaMap=null,t._alphaMap=null,t._mapData=null,t.applyFilter=function(e,t,n,r,i,s,o,u){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}for(var l=a.data,c=this._mapData,h=l.length,p=0;h>p;p+=4)l[p+3]=c[p]||0;return a.data=l,s.putImageData(a,o,u),!0},t.clone=function(){return new e(this.alphaMap)},t.toString=function(){return"[AlphaMapFilter]"},t._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var e,t=this._alphaMap=this.alphaMap,n=t;t instanceof HTMLCanvasElement?e=n.getContext("2d"):(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),n.width=t.width,n.height=t.height,e=n.getContext("2d"),e.drawImage(t,0,0));try{var r=e.getImageData(0,0,t.width,t.height)}catch(i){return!1}return this._mapData=r.data,!0},createjs.AlphaMapFilter=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.Filter;t.initialize=function(e){this.mask=e},t.mask=null,t.applyFilter=function(e,t,n,r,i,s,o,u){return this.mask?(s=s||e,null==o&&(o=t),null==u&&(u=n),s.save(),s.globalCompositeOperation="destination-in",s.drawImage(this.mask,o,u),s.restore(),!0):!0},t.clone=function(){return new e(this.mask)},t.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s,o,u){this.initialize(e,t,n,r,i,s,o,u)},t=e.prototype=new createjs.Filter;t.redMultiplier=1,t.greenMultiplier=1,t.blueMultiplier=1,t.alphaMultiplier=1,t.redOffset=0,t.greenOffset=0,t.blueOffset=0,t.alphaOffset=0,t.initialize=function(e,t,n,r,i,s,o,u){this.redMultiplier=null!=e?e:1,this.greenMultiplier=null!=t?t:1,this.blueMultiplier=null!=n?n:1,this.alphaMultiplier=null!=r?r:1,this.redOffset=i||0,this.greenOffset=s||0,this.blueOffset=o||0,this.alphaOffset=u||0},t.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}for(var l=a.data,c=l.length,h=0;c>h;h+=4)l[h]=l[h]*this.redMultiplier+this.redOffset,l[h+1]=l[h+1]*this.greenMultiplier+this.greenOffset,l[h+2]=l[h+2]*this.blueMultiplier+this.blueOffset,l[h+3]=l[h+3]*this.alphaMultiplier+this.alphaOffset;return s.putImageData(a,o,u),!0},t.toString=function(){return"[ColorFilter]"},t.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},createjs.ColorFilter=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype=[];e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e.LENGTH=e.IDENTITY_MATRIX.length,t.initialize=function(e,t,n,r){return this.reset(),this.adjustColor(e,t,n,r),this},t.reset=function(){return this.copyMatrix(e.IDENTITY_MATRIX)},t.adjustColor=function(e,t,n,r){return this.adjustHue(r),this.adjustContrast(t),this.adjustBrightness(e),this.adjustSaturation(n)},t.adjustBrightness=function(e){return 0==e||isNaN(e)?this:(e=this._cleanValue(e,255),this._multiplyMatrix([1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1]),this)},t.adjustContrast=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var n;return 0>t?n=127+127*(t/100):(n=t%1,n=0==n?e.DELTA_INDEX[t]:e.DELTA_INDEX[t<<0]*(1-n)+e.DELTA_INDEX[(t<<0)+1]*n,n=127*n+127),this._multiplyMatrix([n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1]),this},t.adjustSaturation=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var t=1+(e>0?3*e/100:e/100),n=.3086,r=.6094,i=.082;return this._multiplyMatrix([n*(1-t)+t,r*(1-t),i*(1-t),0,0,n*(1-t),r*(1-t)+t,i*(1-t),0,0,n*(1-t),r*(1-t),i*(1-t)+t,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.adjustHue=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,180)/180*Math.PI;var t=Math.cos(e),n=Math.sin(e),r=.213,i=.715,s=.072;return this._multiplyMatrix([r+t*(1-r)+n*-r,i+t*-i+n*-i,s+t*-s+n*(1-s),0,0,r+t*-r+.143*n,i+t*(1-i)+.14*n,s+t*-s+n*-0.283,0,0,r+t*-r+n*-(1-r),i+t*-i+n*i,s+t*(1-s)+n*s,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.concat=function(t){return t=this._fixMatrix(t),t.length!=e.LENGTH?this:(this._multiplyMatrix(t),this)},t.clone=function(){return new e(this)},t.toArray=function(){return this.slice(0,e.LENGTH)},t.copyMatrix=function(t){for(var n=e.LENGTH,r=0;n>r;r++)this[r]=t[r];return this},t._multiplyMatrix=function(e){for(var t=[],n=0;5>n;n++){for(var r=0;5>r;r++)t[r]=this[r+5*n];for(var r=0;5>r;r++){for(var i=0,s=0;5>s;s++)i+=e[r+5*s]*t[s];this[r+5*n]=i}}},t._cleanValue=function(e,t){return Math.min(t,Math.max(-t,e))},t._fixMatrix=function(t){return t instanceof e&&(t=t.slice(0)),t.length<e.LENGTH?t=t.slice(0,t.length).concat(e.IDENTITY_MATRIX.slice(t.length,e.LENGTH)):t.length>e.LENGTH&&(t=t.slice(0,e.LENGTH)),t},createjs.ColorMatrix=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.Filter;t.matrix=null,t.initialize=function(e){this.matrix=e},t.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}for(var l,c,h,p,d=a.data,v=d.length,m=this.matrix,g=m[0],y=m[1],b=m[2],w=m[3],E=m[4],S=m[5],x=m[6],T=m[7],N=m[8],C=m[9],k=m[10],L=m[11],A=m[12],O=m[13],M=m[14],_=m[15],D=m[16],P=m[17],H=m[18],B=m[19],j=0;v>j;j+=4)l=d[j],c=d[j+1],h=d[j+2],p=d[j+3],d[j]=l*g+c*y+h*b+p*w+E,d[j+1]=l*S+c*x+h*T+p*N+C,d[j+2]=l*k+c*L+h*A+p*O+M,d[j+3]=l*_+c*D+h*P+p*H+B;return s.putImageData(a,o,u),!0},t.toString=function(){return"[ColorMatrixFilter]"},t.clone=function(){return new e(this.matrix)},createjs.ColorMatrixFilter=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Touch cannot be instantiated"};e.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0},e.enable=function(t,n,r){return t&&t.canvas&&e.isSupported()?(t.__touch={pointers:{},multitouch:!n,preventDefault:!r,count:0},"ontouchstart"in window?e._IOS_enable(t):window.navigator.msPointerEnabled&&e._IE_enable(t),!0):!1},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):window.navigator.msPointerEnabled&&e._IE_disable(t))},e._IOS_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",r,!1),n.addEventListener("touchmove",r,!1),n.addEventListener("touchend",r,!1),n.addEventListener("touchcancel",r,!1)},e._IOS_disable=function(e){var t=e.canvas;if(t){var n=e.__touch.f;t.removeEventListener("touchstart",n,!1),t.removeEventListener("touchmove",n,!1),t.removeEventListener("touchend",n,!1),t.removeEventListener("touchcancel",n,!1)}},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,r=t.type,i=0,s=n.length;s>i;i++){var o=n[i],u=o.identifier;o.target==e.canvas&&("touchstart"==r?this._handleStart(e,u,t,o.pageX,o.pageY):"touchmove"==r?this._handleMove(e,u,t,o.pageX,o.pageY):("touchend"==r||"touchcancel"==r)&&this._handleEnd(e,u,t))}}},e._IE_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IE_handleEvent(t,n)};n.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none"),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,r=t.pointerId,i=e.__touch.activeIDs;if("MSPointerDown"==n){if(t.srcElement!=e.canvas)return;i[r]=!0,this._handleStart(e,r,t,t.pageX,t.pageY)}else i[r]&&("MSPointerMove"==n?this._handleMove(e,r,t,t.pageX,t.pageY):("MSPointerUp"==n||"MSPointerCancel"==n)&&(delete i[r],this._handleEnd(e,r,t)))}},e._handleStart=function(e,t,n,r,i){var s=e.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[t]||(o[t]=!0,s.count++,e._handlePointerDown(t,n,r,i))}},e._handleMove=function(e,t,n,r,i){e.__touch.pointers[t]&&e._handlePointerMove(t,n,r,i)},e._handleEnd=function(e,t,n){var r=e.__touch,i=r.pointers;i[t]&&(r.count--,e._handlePointerUp(t,n,!0),delete i[t])},createjs.Touch=e}(),this.createjs=this.createjs||{},function(){var e=createjs.EaselJS=createjs.EaselJS||{};e.version="0.7.0",e.buildDate="Tue, 01 Oct 2013 16:02:38 GMT"}(),define("createjs.easel",function(){}),define("model/StudyParam",["createjs.easel","backbone"],function(){var e=Backbone.Model.extend({getAngle:function(){return Skritter.fn.getAngle(this.get("corners"))},getBitmap:function(){return new createjs.Bitmap(Skritter.assets.getStroke(this.get("bitmapId")).src)},getLength:function(){var e=0;for(var t=0;t<this.get("corners").length-1;t++)e+=Skritter.fn.getDistance(this.get("corners")[t],this.get("corners")[t+1]);return e}});return e}),define("Recognizer",["model/StudyParam","lodash"],function(e){function t(e,t,n){this.currentPosition=e.getStrokeCount()+1,this.stroke=t,this.targets=n,this.angleThreshold=30,this.distanceThreshold=150*(Skritter.settings.get("canvasSize")/600),this.lengthThreshold=300*(Skritter.settings.get("canvasSize")/600),this.orderStrictness=Skritter.user.getOrderStrictness()}return t.prototype.recognize=function(){var e=this.getResultSet();for(var t in e){var n=e[t],r=n.scores;if(r.angle>this.angleThreshold)continue;if(r.distance>this.distanceThreshold)continue;if(r.length>this.lengthThreshold)continue;var i=n.position-this.currentPosition;if(i>this.orderStrictness)continue;var s=0;for(var o in r)s+=r[o];e[t].result=s}e=_.filter(e,"result");if(e.length>0){var u=_.first(_.sortBy(e,"result"));return this.stroke.set("bitmapId",u.bitmapId),this.stroke.set("contains",u.contains),this.stroke.set("data",u.data),this.stroke.set("feedback",u.feedback),this.stroke.set("id",u.id),this.stroke.set("params",u.params),this.stroke.set("part",u.part),this.stroke.set("position",u.position),this.stroke.set("result",u.result),this.stroke.set("scores",u.scores),this.stroke.set("sprite",u.sprite),this.stroke}return null},t.prototype.getResultSet=function(){var t=[];for(var n in this.targets){var r=this.targets[n];for(var i in r.models){var s=r.at(i).get("bitmapId"),o=r.at(i).get("data"),u=r.at(i).get("id"),a=r.at(i).getInflatedParams(),f=r.at(i).get("part"),l=r.at(i).get("position"),c=r.at(i).get("variation"),h=r.at(i).get("rune"),p=r.at(i).get("sprite"),d=_.cloneDeep(a[0].get("corners")).reverse(),v=_.cloneDeep(a[0].get("deviations")).reverse();a.push(new e({bitmapId:s,corners:d,deviations:v,feedback:"backwards"}));for(var m in a){var g=[],y=a[m],b={angle:this.checkAngle(y),corners:this.checkCorners(y),distance:this.checkDistance(y),length:this.checkLength(y)};g.bitmapId=s,g.contains=y.get("contains"),g.data=o,g.feedback=y.get("feedback"),g.id=u,g.param=y,g.part=f,g.position=l,g.variation=c,g.rune=h,g.scores=b,g.sprite=p,t.push(g)}}}return t},t.prototype.checkAngle=function(e){var t=Math.abs(this.stroke.getAngle()-e.getAngle());return t},t.prototype.checkCorners=function(e){var t=50;return Math.abs(e.get("corners").length-this.stroke.get("corners").length)*t},t.prototype.checkDistance=function(e){var t=Skritter.fn.getDistance(this.stroke.get("corners")[0],e.get("corners")[0]);return t},t.prototype.checkLength=function(e){var t=Math.abs(this.stroke.getLength()-e.getLength());return t},t}),define("Mauler",[],function(){var e=function(e,t){switch(t){}return e};return{tweak:e}}),define("Shortstraw",[],function(){function e(e){function c(e){var n=m(e),r={x:n.x,y:n.y},i={x:n.x+n.w,y:n.y+n.h},o=s.distance(r,i);return o/t}function h(e,t){var n=0,r=[];r.push(e[0]);for(var i=1;i<e.length;i++){var o=e[i-1],u=e[i],a=s.distance(o,u);if(n+a>=t){var f=o.x+(t-n)/a*(u.x-o.x),l=o.y+(t-n)/a*(u.y-o.y),c={x:f,y:l};r.push(c),e.splice(i,0,c),n=0}else n+=a}return r.push(e[e.length-1]),r}function p(e){var t=[0],i=n,o=[],u;for(u=i;u<e.length-i;u++)o[u]=s.distance(e[u-i],e[u+i]);var a=s.median(o)*r;for(u=i;u<e.length-i;u++)if(o[u]<a){var f=Number.POSITIVE_INFINITY,l=u;while(u<o.length&&o[u]<a)o[u]<f&&(f=o[u],l=u),u++;t.push(l)}return t.push(e.length-1),t=d(e,t,o),t}function d(e,t,n){var r=!1,i,o,u;while(!r){r=!0;for(i=1;i<t.length;i++){o=t[i-1],u=t[i];if(!s.isLine(e,o,u)){var a=v(n,o,u);a>o&&a<u&&(t.splice(i,0,a),r=!1)}}}for(i=1;i<t.length-1;i++)o=t[i-1],u=t[i+1],s.isLine(e,o,u)&&(t.splice(i,1),i--);return t}function v(e,t,n){var r=(n-t)/4,i=Number.POSITIVE_INFINITY,s;for(var o=t+r;o<n-r;o++)e[o]<i&&(i=e[o],s=o);return s}function m(e){var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var s in e){var o=e[s];o.x<t&&(t=o.x),o.x>n&&(n=o.x),o.y<r&&(r=o.y),o.y>i&&(i=o.y)}return{x:t,y:r,w:n-t,h:i-r}}var t=40,n=3,r=.95,i=.95,s=this;if(!e)return;this.distance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.pow(n*n+r*r,.5)},this.pathDistance=function(e,t,n){var r=0;for(var i=t;i<n;i++)r+=this.distance(e[i],e[i+1]);return r},this.isLine=function(e,t,n){var r=this.distance(e[t],e[n]),s=this.pathDistance(e,t,n);return r/s>i},this.median=function(e){var t=e.concat();t.sort();var n;return t.length%2===0?(n=t.length/2,(t[n-1]+t[n])/2):(n=(t.length+1)/2,t[n-1])};var o=c(e),u=h(e,o),a=p(u),f=[];for(var l in a)f.push(u[a[l]]);return f}return e}),define("model/CanvasStroke",["Mauler","Shortstraw","backbone","createjs.easel"],function(e,t){var n=Backbone.Model.extend({initialize:function(){this.on("change:points",function(e){e.set("corners",t(e.get("points")))})},getAngle:function(){return Skritter.fn.getAngle(this.get("points"))},getContainedStrokeIds:function(){var e=[];if(!this.has("contains"))return e.push(this.get("id")),e;var t=this.get("contains"),n=this.get("position");for(var r in t){var i=t[r];e.push(n+"|"+i),e.push(n+1+"|"+i)}return e},getLength:function(){var e=0;for(var t=0;t<this.get("corners").length-1;t++)e+=Skritter.fn.getDistance(this.get("corners")[t],this.get("corners")[t+1]);return e},getInflatedSprite:function(){var e=this.get("sprite").clone(),t=e.getBounds(),n=this.getInflatedData(),r=e.getMatrix(),i=n.w/t.width,s=n.h/t.height;r.scale(i,s),r.translate(-n.w/2,-n.h/2),r.rotate(n.rot*Math.PI/180);var o=r.decompose();e.setTransform(o.x,o.y,o.scaleX,o.scaleY,o.rotation,o.skewX,o.skewY);var u=e.getTransformedBounds();return e.x+=u.width/2+n.x,e.y+=u.height/2+n.y,e},getInflatedData:function(){var e=this.get("sprite").getBounds(),t=Skritter.settings.get("canvasSize"),n=this.get("data");return{n:n[0],x:n[1]*t,y:n[2]*t,w:n[3]*t,h:n[4]*t,scaleX:n[3]*t/e.width,scaleY:n[4]*t/e.height,rot:-n[5]}},getInflatedParams:function(){var e=this.getInflatedData(),t=Skritter.study.params.where({bitmapId:this.get("bitmapId")}),n=[];for(var r in t){var i=t[r].clone(),s=_.cloneDeep(i.get("corners"));for(var o in s)s[o].x=s[o].x*e.scaleX+e.x,s[o].y=s[o].y*e.scaleY+e.y;i.set("corners",s);var u=_.cloneDeep(i.get("deviations"));for(var a in u)u[a].x=u[a].x*e.scaleX+e.x,u[a].y=u[a].y*e.scaleY+e.y;i.set("deviations",u),n.push(i)}return n},getRectangle:function(){var e=Skritter.settings.get("canvasSize");return Skritter.fn.getBoundingRectangle(this.get("points"),e,e,14)},getRectangleCorners:function(){var e=Skritter.settings.get("canvasSize");return Skritter.fn.getBoundingRectangle(this.get("corners"),e,e,14)},getSprite:function(){return this.get("sprite")},getUserSprite:function(){var t=this.getInflatedSprite(),n=this.getRectangle();return t.x=n.x,t.y=n.y,e.tweak(t,this.get("bitmapId"))}});return n}),define("collection/CanvasCharacter",["model/CanvasStroke","backbone"],function(e){var t=Backbone.Collection.extend({model:e,containsStroke:function(e){var t=e.get("id"),n=e.getContainedStrokeIds();for(var r in this.models){var i=this.models[r].get("id"),s=this.models[r].getContainedStrokeIds();if(t===i)return!0;if(s)for(r in s){var o=s[r];if(_.contains(n,o))return!0}}return!1},getCharacterSprite:function(){var e=new createjs.Container;for(var t in this.models)e.addChild(this.models[t].getInflatedSprite().clone());return e},getStrokeCount:function(){var e=0;for(var t in this.models)this.models[t].has("contains")?e+=this.models[t].get("contains").length:e++;return e}});return t}),define("require.text!template/grading-buttons.html",[],function(){return'<div id="grading-buttons">\r\n    <div id="grade1"></div>\r\n    <div id="grade2"></div>\r\n    <div id="grade3"></div>\r\n    <div id="grade4"></div>\r\n</div>'}),define("prompt/GradingButtons",["require.text!template/grading-buttons.html","backbone"],function(e){var t=Backbone.View.extend({initialize:function(){t.selected=!1},render:function(){return this.$el.append(e),this},events:{"click.GradingButtons #grade1":"handleClick","click.GradingButtons #grade2":"handleClick","click.GradingButtons #grade3":"handleClick","click.GradingButtons #grade4":"handleClick"},handleClick:function(e){$("#"+e.currentTarget.id).hasClass("selected")?this.toggle():this.triggerSelected(e.currentTarget.id)},hide:function(){this.$("#grading-buttons").hide()},remove:function(){this.$("#grading-buttons").remove()},select:function(e){for(var t=1;t<=4;t++)e===t?$("#grade"+t).addClass("selected"):$("#grade"+t).hide()},toggle:function(){for(var e=1;e<=4;e++)$("#grade"+e).removeClass("selected"),$("#grade"+e).show(200)},triggerSelected:function(e){e!==undefined&&(t.selected=e,this.trigger("selected",e.replace(/[^\d]+/,"")))}});return t}),define("prompt/Prompt",["prompt/GradingButtons","backbone"],function(e){var t=Backbone.View.extend({initialize:function(){t.buttons=new e,t.item=null,t.finished=!1,t.grade=3,t.gradeColors={1:"#e68e8e",2:"#d95757",3:"#70da70",4:"#4097d3"},t.gradeColorFilters={1:new createjs.ColorFilter(0,0,0,1,230,142,142,1),2:new createjs.ColorFilter(0,0,0,1,217,87,87,1),3:new createjs.ColorFilter(0,0,0,1,112,218,112,1),4:new createjs.ColorFilter(0,0,0,1,112,218,112,1)},t.position=1,t.results=[],t.vocabs=null},pushResult:function(e,n,r,i){t.results.push({grade:e,reviewTime:n,startTime:r,thinkingTime:i})},set:function(e,n){return t.definition=n[0].get("definitions")[Skritter.user.get("settings").sourceLang],t.item=e,t.reading=n[0].get("reading"),t.sentence=n[0].getSentence()?n[0].getSentence().get("writing"):null,t.vocabs=n,t.writing=n[0].get("writing"),this},resize:function(){this.$("#canvas-container").width(Skritter.settings.get("canvasSize")),this.$("#canvas-container").height(Skritter.settings.get("canvasSize"))},showGrading:function(e){t.buttons.setElement(this.$("#canvas-container")).render(),e&&t.buttons.select(e),this.listenToOnce(t.buttons,"selected",this.handleGradeSelected)},triggerPromptComplete:function(){console.log("prompt complete"),this.trigger("complete",t.results)}});return t}),define("model/LeapController",["backbone"],function(){var e=Backbone.Model.extend({initialize:function(){e.controller=new Leap.Controller,e.canvasSize=Skritter.settings.get("canvasSize"),e.oldPt={},e.points=[],e.waitingCounter=0},disable:function(){e.controller.removeAllListeners(),e.controller.disconnect()},enable:function(t){e.canvasSize=Skritter.settings.get("canvasSize"),e.waitingCounter=0,t&&(e.controller=new Leap.Controller(t)),e.controller.on("animationFrame",_.bind(this.loop,this)),e.controller.connect()},loop:function(t){if(t.pointables.length>0){var n=t.pointables[0],r=n.tipPosition[0]+150,i=Math.abs(n.tipPosition[1]-400),s=n.tipPosition[2],o;r>=0&&r<=300&&i>=0&&i<=250?(r=r*e.canvasSize/300,i=i*e.canvasSize/250,this.triggerMove(new createjs.Point(r,i)),e.oldPt&&(o=Skritter.fn.getDistance({x:r,y:i},e.oldPt)),e.oldPt=new createjs.Point(r,i),o>=12?(e.waitingCounter=0,e.points.push(new createjs.Point(r,i))):(e.waitingCounter>30&&(e.points.length>=5&&this.triggerGestureComplete(e.points),e.points=[]),e.waitingCounter++)):this.triggerMove(new createjs.Point(-30,-30))}},triggerGestureComplete:function(e){this.trigger("gestureComplete",e)},triggerMove:function(e){this.trigger("move",e)}});return e}),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype;t.type=null,t.target=null,t.currentTarget=null,t.eventPhase=0,t.bubbles=!1,t.cancelable=!1,t.timeStamp=0,t.defaultPrevented=!1,t.propagationStopped=!1,t.immediatePropagationStopped=!1,t.removed=!1,t.initialize=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=(new Date).getTime()},t.preventDefault=function(){this.defaultPrevented=!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent},t._listeners=null,t._captureListeners=null,t.initialize=function(){},t.addEventListener=function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t},t.on=function(e,t,n,r,i,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),r&&e.remove()},s)},t.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var s=0,o=i.length;o>s;s++)if(i[s]==t){1==o?delete r[e]:i.splice(s,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t){if("string"==typeof e){var n=this._listeners;if(!n||!n[e])return!1;e=new createjs.Event(e)}if(e.target=t||this,e.bubbles&&this.parent){for(var r=this,i=[r];r.parent;)i.push(r=r.parent);var s,o=i.length;for(s=o-1;s>=0&&!e.propagationStopped;s--)i[s]._dispatchEvent(e,1+(0==s));for(s=1;o>s&&!e.propagationStopped;s++)i[s]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;e.currentTarget=this,e.eventPhase=t,e.removed=!1,i=i.slice();for(var s=0;n>s&&!e.immediatePropagationStopped;s++){var o=i[s];o.handleEvent?o.handleEvent(e):o(e),e.removed&&(this.off(e.type,o,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.EventDispatcher;e.NONE=0,e.LOOP=1,e.REVERSE=2,e.IGNORE={},e._tweens=[],e._plugins={},e.get=function(t,n,r,i){return i&&e.removeTweens(t),new e(t,n,r)},e.tick=function(t,n){for(var r=e._tweens.slice(),i=r.length-1;i>=0;i--){var s=r[i];n&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:t)}},e.handleEvent=function(e){"tick"==e.type&&this.tick(e.delta,e.paused)},e.removeTweens=function(t){if(t.tweenjs_count){for(var n=e._tweens,r=n.length-1;r>=0;r--)n[r]._target==t&&(n[r]._paused=!0,n.splice(r,1));t.tweenjs_count=0}},e.removeAllTweens=function(){for(var t=e._tweens,n=0,r=t.length;r>n;n++){var i=t[n];i.paused=!0,i.target.tweenjs_count=0}t.length=0},e.hasActiveTweens=function(t){return t?t.tweenjs_count:e._tweens&&!!e._tweens.length},e.installPlugin=function(t,n){var r=t.priority;null==r&&(t.priority=r=0);for(var i=0,s=n.length,o=e._plugins;s>i;i++){var u=n[i];if(o[u]){for(var f=o[u],l=0,c=f.length;c>l&&!(r<f[l].priority);l++);o[u].splice(l,0,t)}else o[u]=[t]}},e._register=function(t,n){var r=t._target,i=e._tweens;if(n)r&&(r.tweenjs_count=r.tweenjs_count?r.tweenjs_count+1:1),i.push(t),!e._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",e),e._inited=!0);else{r&&r.tweenjs_count--;for(var s=i.length;s--;)if(i[s]==t)return i.splice(s,1),void 0}},t.ignoreGlobalPause=!1,t.loop=!1,t.duration=0,t.pluginData=null,t.target=null,t.position=null,t.passive=!1,t._paused=!1,t._curQueueProps=null,t._initQueueProps=null,t._steps=null,t._actions=null,t._prevPosition=0,t._stepPosition=0,t._prevPos=-1,t._target=null,t._useTicks=!1,t._inited=!1,t.initialize=function(t,n,r){this.target=this._target=t,n&&(this._useTicks=n.useTicks,this.ignoreGlobalPause=n.ignoreGlobalPause,this.loop=n.loop,n.onChange&&this.addEventListener("change",n.onChange),n.override&&e.removeTweens(t)),this.pluginData=r||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],n&&n.paused?this._paused=!0:e._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,e.NONE)},t.wait=function(e,t){if(null==e||0>=e)return this;var n=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:n,e:this._linearEase,p1:n,v:t})},t.to=function(e,t,n){return(isNaN(t)||0>t)&&(t=0),this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(e))})},t.call=function(e,t,n){return this._addAction({f:e,p:t?t:[this],o:n?n:this._target})},t.set=function(e,t){return this._addAction({f:this._set,o:this,p:[e,t?t:this._target]})},t.play=function(e){return e||(e=this),this.call(e.setPaused,[!1],e)},t.pause=function(e){return e||(e=this),this.call(e.setPaused,[!0],e)},t.setPosition=function(e,t){0>e&&(e=0),null==t&&(t=1);var n=e,r=!1;if(n>=this.duration&&(this.loop?n%=this.duration:(n=this.duration,r=!0)),n==this._prevPos)return r;var i=this._prevPos;if(this.position=this._prevPos=n,this._prevPosition=e,this._target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,o=this._steps.length;o>s&&!(this._steps[s].t>n);s++);var u=this._steps[s-1];this._updateTargetProps(u,(this._stepPosition=n-u.t)/u.d)}return 0!=t&&this._actions.length>0&&(this._useTicks?this._runActions(n,n):1==t&&i>n?(i!=this.duration&&this._runActions(i,this.duration),this._runActions(0,n,!0)):this._runActions(i,n)),r&&this.setPaused(!0),this.dispatchEvent("change"),r},t.tick=function(e){this._paused||this.setPosition(this._prevPosition+e)},t.setPaused=function(t){return this._paused=!!t,e._register(this,!t),this},t.w=t.wait,t.t=t.to,t.c=t.call,t.s=t.set,t.toString=function(){return"[Tween]"},t.clone=function(){throw"Tween can not be cloned."},t._updateTargetProps=function(t,n){var r,i,s,o,u,f;if(t||1!=n){if(this.passive=!!t.v,this.passive)return;t.e&&(n=t.e(n,0,1,1)),r=t.p0,i=t.p1}else this.passive=!1,r=i=this._curQueueProps;for(var l in this._initQueueProps){null==(o=r[l])&&(r[l]=o=this._initQueueProps[l]),null==(u=i[l])&&(i[l]=u=o),s=o==u||0==n||1==n||"number"!=typeof o?1==n?u:o:o+(u-o)*n;var c=!1;if(f=e._plugins[l])for(var h=0,p=f.length;p>h;h++){var d=f[h].tween(this,l,s,r,i,n,!!t&&r==i,!t);d==e.IGNORE?c=!0:s=d}c||(this._target[l]=s)}},t._runActions=function(e,t,n){var r=e,i=t,s=-1,o=this._actions.length,u=1;for(e>t&&(r=t,i=e,s=o,o=u=-1);(s+=u)!=o;){var a=this._actions[s],f=a.t;(f==i||f>r&&i>f||n&&f==e)&&a.f.apply(a.o,a.p)}},t._appendQueueProps=function(t){var n,r,i,s,o;for(var u in t)if(void 0===this._initQueueProps[u]){if(r=this._target[u],n=e._plugins[u])for(i=0,s=n.length;s>i;i++)r=n[i].init(this,u,r);this._initQueueProps[u]=this._curQueueProps[u]=void 0===r?null:r}else r=this._curQueueProps[u];for(var u in t){if(r=this._curQueueProps[u],n=e._plugins[u])for(o=o||{},i=0,s=n.length;s>i;i++)n[i].step&&n[i].step(this,u,r,t[u],o);this._curQueueProps[u]=t[u]}return o&&this._appendQueueProps(o),this._curQueueProps},t._cloneProps=function(e){var t={};for(var n in e)t[n]=e[n];return t},t._addStep=function(e){return e.d>0&&(this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},t._addAction=function(e){return e.t=this.duration,this._actions.push(e),this},t._set=function(e,t){for(var n in e)t[n]=e[n]},createjs.Tween=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.EventDispatcher;t.ignoreGlobalPause=!1,t.duration=0,t.loop=!1,t.position=null,t._paused=!1,t._tweens=null,t._labels=null,t._labelList=null,t._prevPosition=0,t._prevPos=-1,t._useTicks=!1,t.initialize=function(e,t,n){this._tweens=[],n&&(this._useTicks=n.useTicks,this.loop=n.loop,this.ignoreGlobalPause=n.ignoreGlobalPause,n.onChange&&this.addEventListener("change",n.onChange)),e&&this.addTween.apply(this,e),this.setLabels(t),n&&n.paused?this._paused=!0:createjs.Tween._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,createjs.Tween.NONE)},t.addTween=function(e){var t=arguments.length;if(t>1){for(var n=0;t>n;n++)this.addTween(arguments[n]);return arguments[0]}return 0==t?null:(this.removeTween(e),this._tweens.push(e),e.setPaused(!0),e._paused=!1,e._useTicks=this._useTicks,e.duration>this.duration&&(this.duration=e.duration),this._prevPos>=0&&e.setPosition(this._prevPos,createjs.Tween.NONE),e)},t.removeTween=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;t>r;r++)n=n&&this.removeTween(arguments[r]);return n}if(0==t)return!1;for(var i=this._tweens,r=i.length;r--;)if(i[r]==e)return i.splice(r,1),e.duration>=this.duration&&this.updateDuration(),!0;return!1},t.addLabel=function(e,t){this._labels[e]=t;var n=this._labelList;if(n){for(var r=0,i=n.length;i>r&&!(t<n[r].position);r++);n.splice(r,0,{label:e,position:t})}},t.setLabels=function(e){this._labels=e?e:{}},t.getLabels=function(){var e=this._labelList;if(!e){e=this._labelList=[];var t=this._labels;for(var n in t)e.push({label:n,position:t[n]});e.sort(function(e,t){return e.position-t.position})}return e},t.getCurrentLabel=function(){var e=this.getLabels(),t=this.position,n=e.length;if(n){for(var r=0;n>r&&!(t<e[r].position);r++);return 0==r?null:e[r-1].label}return null},t.gotoAndPlay=function(e){this.setPaused(!1),this._goto(e)},t.gotoAndStop=function(e){this.setPaused(!0),this._goto(e)},t.setPosition=function(e,t){0>e&&(e=0);var n=this.loop?e%this.duration:e,r=!this.loop&&e>=this.duration;if(n==this._prevPos)return r;this._prevPosition=e,this.position=this._prevPos=n;for(var i=0,s=this._tweens.length;s>i;i++)if(this._tweens[i].setPosition(n,t),n!=this._prevPos)return!1;return r&&this.setPaused(!0),this.dispatchEvent("change"),r},t.setPaused=function(e){this._paused=!!e,createjs.Tween._register(this,!e)},t.updateDuration=function(){this.duration=0;for(var e=0,t=this._tweens.length;t>e;e++){var n=this._tweens[e];n.duration>this.duration&&(this.duration=n.duration)}},t.tick=function(e){this.setPosition(this._prevPosition+e)},t.resolve=function(e){var t=parseFloat(e);return isNaN(t)&&(t=this._labels[e]),t},t.toString=function(){return"[Timeline]"},t.clone=function(){throw"Timeline can not be cloned."},t._goto=function(e){var t=this.resolve(e);null!=t&&this.setPosition(t)},createjs.Timeline=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ease cannot be instantiated."};e.linear=function(e){return e},e.none=e.linear,e.get=function(e){return-1>e&&(e=-1),e>1&&(e=1),function(t){return 0==e?t:0>e?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},e.getPowIn=function(e){return function(t){return Math.pow(t,e)}},e.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},e.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},e.sineOut=function(e){return Math.sin(e*Math.PI/2)},e.sineInOut=function(e){return-0.5*(Math.cos(Math.PI*e)-1)},e.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},e.backIn=e.getBackIn(1.7),e.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},e.backOut=e.getBackOut(1.7),e.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},e.backInOut=e.getBackInOut(1.7),e.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},e.circOut=function(e){return Math.sqrt(1- --e*e)},e.circInOut=function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(e,t){var n=2*Math.PI;return function(r){if(0==r||1==r)return r;var i=t/n*Math.asin(1/e);return-(e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t))}},e.elasticIn=e.getElasticIn(1,.3),e.getElasticOut=function(e,t){var n=2*Math.PI;return function(r){if(0==r||1==r)return r;var i=t/n*Math.asin(1/e);return e*Math.pow(2,-10*r)*Math.sin((r-i)*n/t)+1}},e.elasticOut=e.getElasticOut(1,.3),e.getElasticInOut=function(e,t){var n=2*Math.PI;return function(r){var i=t/n*Math.asin(1/e);return(r*=2)<1?-0.5*e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t):.5*e*Math.pow(2,-10*(r-=1))*Math.sin((r-i)*n/t)+1}},e.elasticInOut=e.getElasticInOut(1,.3*1.5),createjs.Ease=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"MotionGuidePlugin cannot be instantiated."};e.priority=0,e._rotOffS,e._rotOffE,e._rotNormS,e._rotNormE,e.install=function(){return createjs.Tween.installPlugin(e,["guide","x","y","rotation"]),createjs.Tween.IGNORE},e.init=function(e,t,n){var r=e.target;return r.hasOwnProperty("x")||(r.x=0),r.hasOwnProperty("y")||(r.y=0),r.hasOwnProperty("rotation")||(r.rotation=0),"rotation"==t&&(e.__needsRot=!0),"guide"==t?null:n},e.step=function(t,n,r,i,s){if("rotation"==n&&(t.__rotGlobalS=r,t.__rotGlobalE=i,e.testRotData(t,s)),"guide"!=n)return i;var o,u=i;u.hasOwnProperty("path")||(u.path=[]);var f=u.path;if(u.hasOwnProperty("end")||(u.end=1),u.hasOwnProperty("start")||(u.start=r&&r.hasOwnProperty("end")&&r.path===f?r.end:0),u.hasOwnProperty("_segments")&&u._length)return i;var l=f.length,c=10;if(l>=6&&0==(l-2)%4){u._segments=[],u._length=0;for(var h=2;l>h;h+=4){for(var p,d,v=f[h-2],m=f[h-1],g=f[h+0],y=f[h+1],b=f[h+2],w=f[h+3],E=v,S=m,x=0,T=[],N=1;c>=N;N++){var C=N/c,k=1-C;p=k*k*v+2*k*C*g+C*C*b,d=k*k*m+2*k*C*y+C*C*w,x+=T[T.push(Math.sqrt((o=p-E)*o+(o=d-S)*o))-1],E=p,S=d}u._segments.push(x),u._segments.push(T),u._length+=x}o=u.orient,u.orient=!0;var L={};return e.calc(u,u.start,L),t.__rotPathS=Number(L.rotation.toFixed(5)),e.calc(u,u.end,L),t.__rotPathE=Number(L.rotation.toFixed(5)),u.orient=!1,e.calc(u,u.end,s),u.orient=o,u.orient?(t.__guideData=u,e.testRotData(t,s),i):i}throw"invalid 'path' data, please see documentation for valid paths"},e.testRotData=function(e,t){if(void 0===e.__rotGlobalS||void 0===e.__rotGlobalE){if(e.__needsRot)return;e.__rotGlobalS=e.__rotGlobalE=void 0!==e._curQueueProps.rotation?e._curQueueProps.rotation:t.rotation=e.target.rotation||0}if(void 0!==e.__guideData){var n=e.__guideData,r=e.__rotGlobalE-e.__rotGlobalS,i=e.__rotPathE-e.__rotPathS,s=r-i;if("auto"==n.orient)s>180?s-=360:-180>s&&(s+=360);else if("cw"==n.orient){for(;0>s;)s+=360;0==s&&r>0&&180!=r&&(s+=360)}else if("ccw"==n.orient){for(s=r-(i>180?360-i:i);s>0;)s-=360;0==s&&0>r&&-180!=r&&(s-=360)}n.rotDelta=s,n.rotOffS=e.__rotGlobalS-e.__rotPathS,e.__rotGlobalS=e.__rotGlobalE=e.__guideData=e.__needsRot=void 0}},e.tween=function(t,n,r,i,s,o,u){var f=s.guide;if(void 0==f||f===i.guide)return r;if(f.lastRatio!=o){var l=(f.end-f.start)*(u?f.end:o)+f.start;switch(e.calc(f,l,t.target),f.orient){case"cw":case"ccw":case"auto":t.target.rotation+=f.rotOffS+f.rotDelta*o;break;case"fixed":default:t.target.rotation+=f.rotOffS}f.lastRatio=o}return"rotation"!=n||f.orient&&"false"!=f.orient?t.target[n]:r},e.calc=function(t,n,r){void 0==t._segments&&e.validate(t),void 0==r&&(r={x:0,y:0,rotation:0});for(var i=t._segments,s=t.path,o=t._length*n,u=i.length-2,f=0;o>i[f]&&u>f;)o-=i[f],f+=2;var l=i[f+1],c=0;for(u=l.length-1;o>l[c]&&u>c;)o-=l[c],c++;var h=c/++u+o/(u*l[c]);f=2*f+2;var p=1-h;return r.x=p*p*s[f-2]+2*p*h*s[f+0]+h*h*s[f+2],r.y=p*p*s[f-1]+2*p*h*s[f+1]+h*h*s[f+3],t.orient&&(r.rotation=57.2957795*Math.atan2((s[f+1]-s[f-1])*p+(s[f+3]-s[f+1])*h,(s[f+0]-s[f-2])*p+(s[f+2]-s[f+0])*h)),r},createjs.MotionGuidePlugin=e}(),this.createjs=this.createjs||{},function(){var e=createjs.TweenJS=createjs.TweenJS||{};e.version="0.5.0",e.buildDate="Wed, 25 Sep 2013 17:09:35 GMT"}(),define("createjs.tween",function(){}),define("prompt/PromptCanvas",["model/LeapController","backbone","createjs.easel","createjs.tween"],function(e){var t=Backbone.View.extend({initialize:function(){t.canvas=null,t.leap=new e,t.stage=null,t.points=[],t.size=Skritter.settings.get("canvasSize"),t.strokeColor="#000000",t.strokeSize=12,t.strokeCapStyle="round",t.strokeJointStyle="round",this.initStage(),this.listenTo(Skritter.settings,"resize",this.resize)},render:function(){this.$el.append(t.canvas),this.initLayers(),this.drawGrid();var e=Skritter.assets.getStroke(0);return e.alpha=1e-4,t.stage.addChildAt(e,0),this},initLayers:function(){return t.layerGrid=new createjs.Container,t.layerGrid.name="layerGrid",t.stage.addChild(t.layerGrid),t.layerBackground=new createjs.Container,t.layerBackground.name="layerBackground",t.stage.addChild(t.layerBackground),t.layerMessage=new createjs.Container,t.layerMessage.name="layerMessage",t.stage.addChild(t.layerMessage),t.layerOverlay=new createjs.Container,t.layerOverlay.name="layerOverlay",t.stage.addChild(t.layerOverlay),t.layerInput=new createjs.Container,t.layerInput.name="layerInput",t.stage.addChild(t.layerInput),this},initStage:function(){return t.canvas=document.createElement("canvas"),t.canvas.setAttribute("id","prompt-canvas"),t.canvas.setAttribute("width",t.size),t.canvas.setAttribute("height",t.size),t.canvas.setAttribute("style","background:white"),t.stage=new createjs.Stage(t.canvas),t.stage.enableDOMEvents(!0),t.stage.autoClear=!0,createjs.Touch.enable(t.stage),createjs.Ticker.addEventListener("tick",this.tick),this},applyBackgroundColorFilter:function(e){t.layerBackground.filters=[e],t.layerBackground.cache(0,0,t.size,t.size)},applyBackgroundGlow:function(e,n){e.alpha=.4,e.shadow=new createjs.Shadow(n,5,5,0),t.layerBackground.addChildAt(e,0),createjs.Tween.get(e,{loop:!0}).to({alpha:.7},1500).wait(1e3).to({alpha:.4},1500).wait(1e3)},clear:function(){t.layerBackground.removeAllChildren(),t.layerMessage.removeAllChildren(),t.layerOverlay.removeAllChildren(),t.layerInput.removeAllChildren(),t.stage.update()},disableInput:function(){t.stage.removeAllEventListeners()},disableLeap:function(){this.stopListening(t.leap),t.leap.disable(),t.layerInput.removeAllChildren()},displayMessage:function(e,n,r,i,s){t.layerMessage.removeAllChildren();var o=new createjs.Text(e,r,n);i?o.x=i:o.x=t.size/2-o.getMeasuredWidth()/2,s?o.y=s:o.y=t.size*.9,createjs.Tween.get(o).wait(2e3).to({alpha:0},500).call(function(){t.layerMessage.removeChild(o)}),t.layerMessage.addChild(o)},drawCharacter:function(e,n){if(t.layerBackground.getNumChildren()===0){var r=e.getCharacterSprite();n&&(r.alpha=n),t.layerBackground.addChild(r)}t.stage.update()},drawGrid:function(){t.layerGrid.removeAllChildren();var e=new createjs.Shape;e.graphics.beginStroke("grey").setStrokeStyle(1,t.strokeCapStyle,t.strokeJointStyle),e.graphics.moveTo(t.size/2,0).lineTo(t.size/2,t.size),e.graphics.moveTo(0,t.size/2).lineTo(t.size,t.size/2),e.graphics.moveTo(0,0).lineTo(t.size,t.size),e.graphics.moveTo(t.size,0).lineTo(0,t.size),e.graphics.endStroke(),t.layerGrid.addChild(e),t.stage.update()},drawPhantomStroke:function(e,n){var r=e.getInflatedSprite(!0);t.layerBackground.addChild(r),createjs.Tween.get(r).to({alpha:0},500).call(function(){t.layerBackground.removeChild(r),typeof n=="function"&&n()})},drawSquig:function(e,n){var r=new createjs.Shape,i=e,s=i.get("points"),o=s[0],u=s[0];r.graphics.setStrokeStyle(14,"round","round").beginStroke("orange");for(var a in s){var f=new createjs.Point(o.x+s[a].x>>1,o.y+s[a].y>>1);r.graphics.moveTo(f.x,f.y).curveTo(o.x,o.y,u.x,u.y),o=s[a],u=f}n&&(r.alpha=n),r.graphics.endStroke(),t.layerInput.addChild(r),t.stage.update()},drawStroke:function(e,n){var r=e.getUserSprite(),i=e.getInflatedSprite();t.layerOverlay.addChildAt(r,0),createjs.Tween.get(r).to(i,Skritter.user.getAnimationSpeed(),createjs.Ease.backOut).call(function(){typeof n=="function"&&n()})},enableInput:function(){var e=this,n,r,i,s=t.stage,o=new createjs.Shape;t.layerInput.addChild(o);var u=function(){i=[],n=new createjs.Point(s.mouseX,s.mouseY),e.triggerMouseDown(n),r=n,t.points.push(n.clone()),s.addEventListener("stagemousemove",a),s.addEventListener("stagemouseup",f)},a=function(){var e=new createjs.Point(s.mouseX,s.mouseY),u=new createjs.Point(n.x+e.x>>1,n.y+e.y>>1);o.graphics.setStrokeStyle(Skritter.fn.getPressurizedStrokeSize(e,n),t.strokeCapStyle,t.strokeJointStyle).beginStroke(t.strokeColor).moveTo(u.x,u.y).curveTo(n.x,n.y,r.x,r.y),n.x=e.x,n.y=e.y,r.x=u.x,r.y=u.y,i.push(n.clone()),s.update()},f=function c(t){l(t)&&e.triggerMouseUp(i),s.removeEventListener("stagemousemove",a),s.removeEventListener("stagemouseup",c),o.graphics.clear()},l=function(e){var n=e.rawX,r=e.rawY;if(n>=0&&n<t.size&&r>=0&&r<t.size)return!0};s.addEventListener("stagemousedown",u)},enableLeap:function(){var e=new createjs.Shape;e.graphics.clear().beginFill("orange").drawCircle(-30,-30,15),t.layerInput.addChild(e);var n=function(n){e.x=n.x,e.y=n.y,t.stage.update()};this.listenTo(t.leap,"move",n),this.listenTo(t.leap,"gestureComplete",this.triggerMouseUp),t.leap.enable({enableGestures:!0})},fadeBackground:function(){t.layerBackground.getNumChildren()>0&&createjs.Tween.get(t.layerBackground).to({alpha:0},750).call(function(){t.layerBackground.removeAllChildren(),t.layerBackground.alpha=1})},fadeOverlay:function(){t.layerOverlay.getNumChildren()>0&&createjs.Tween.get(t.layerOverlay).to({alpha:0},750).call(function(){t.layerOverlay.removeAllChildren(),t.layerOverlay.alpha=1})},resize:function(e){t.size=e.canvas,t.canvas.setAttribute("width",t.size),t.canvas.setAttribute("height",t.size),$("#canvas-container").width(t.size),$("#canvas-container").height(t.size),this.drawGrid()},setBackgroundAlpha:function(e){t.layerBackground.alpha=e},setInputAlpha:function(e){t.layerInput.alpha=e},tick:function(){t.stage.update()},triggerMouseDown:function(e){this.trigger("mousedown",e)},triggerMouseUp:function(e){this.trigger("mouseup",e)}});return t}),define("require.text!template/prompt-rune.html",[],function(){return'<div id="prompt-rune">\r\n    <div id="prompt-top">\r\n        <h1 id="writing" class="chinese-font"></h1>\r\n        <div id="style"></div>\r\n        <div id="reading"></div>\r\n        <div id="definition"></div>\r\n        <div id="sentence" class="chinese-font"></div>\r\n    </div>\r\n    <div id="prompt-bottom">\r\n        <div id="canvas-container"></div>\r\n    </div>\r\n</div>'}),function(e,t){function n(){if(!r.READY){r.event.determineEventTypes();for(var e in r.gestures)r.gestures.hasOwnProperty(e)&&r.detection.register(r.gestures[e]);r.event.onTouch(r.DOCUMENT,r.EVENT_MOVE,r.detection.detect),r.event.onTouch(r.DOCUMENT,r.EVENT_END,r.detection.detect),r.READY=!0}}var r=function(e,t){return new r.Instance(e,t||{})};r.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},r.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,r.HAS_TOUCHEVENTS="ontouchstart"in e,r.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,r.NO_MOUSEEVENTS=r.HAS_TOUCHEVENTS&&navigator.userAgent.match(r.MOBILE_REGEX),r.EVENT_TYPES={},r.DIRECTION_DOWN="down",r.DIRECTION_LEFT="left",r.DIRECTION_UP="up",r.DIRECTION_RIGHT="right",r.POINTER_MOUSE="mouse",r.POINTER_TOUCH="touch",r.POINTER_PEN="pen",r.EVENT_START="start",r.EVENT_MOVE="move",r.EVENT_END="end",r.DOCUMENT=document,r.plugins={},r.READY=!1,r.Instance=function(e,t){var i=this;return n(),this.element=e,this.enabled=!0,this.options=r.utils.extend(r.utils.extend({},r.defaults),t||{}),this.options.stop_browser_behavior&&r.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),r.event.onTouch(e,r.EVENT_START,function(e){i.enabled&&r.detection.startDetect(i,e)}),this},r.Instance.prototype={on:function(e,t){for(var n=e.split(" "),r=0;n.length>r;r++)this.element.addEventListener(n[r],t,!1);return this},off:function(e,t){for(var n=e.split(" "),r=0;n.length>r;r++)this.element.removeEventListener(n[r],t,!1);return this},trigger:function(e,t){var n=r.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var i=this.element;return r.utils.hasParent(t.target,i)&&(i=t.target),i.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this}};var i=null,s=!1,o=!1;r.event={bindDom:function(e,t,n){for(var r=t.split(" "),i=0;r.length>i;i++)e.addEventListener(r[i],n,!1)},onTouch:function(e,t,n){var u=this;this.bindDom(e,r.EVENT_TYPES[t],function(f){var l=f.type.toLowerCase();if(!l.match(/mouse/)||!o){(l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&1===f.which)&&(s=!0),l.match(/touch|pointer/)&&(o=!0);var c=0;s&&(r.HAS_POINTEREVENTS&&t!=r.EVENT_END?c=r.PointerEvent.updatePointer(t,f):l.match(/touch/)?c=f.touches.length:o||(c=l.match(/up/)?0:1),c>0&&t==r.EVENT_END?t=r.EVENT_MOVE:c||(t=r.EVENT_END),c||null===i?i=f:f=i,n.call(r.detection,u.collectEventData(e,t,f)),r.HAS_POINTEREVENTS&&t==r.EVENT_END&&(c=r.PointerEvent.updatePointer(t,f))),c||(i=null,s=!1,o=!1,r.PointerEvent.reset())}})},determineEventTypes:function(){var e;e=r.HAS_POINTEREVENTS?r.PointerEvent.getEvents():r.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],r.EVENT_TYPES[r.EVENT_START]=e[0],r.EVENT_TYPES[r.EVENT_MOVE]=e[1],r.EVENT_TYPES[r.EVENT_END]=e[2]},getTouchList:function(e){return r.HAS_POINTEREVENTS?r.PointerEvent.getTouchList():e.touches?e.touches:[{identifier:1,pageX:e.pageX,pageY:e.pageY,target:e.target}]},collectEventData:function(e,t,n){var i=this.getTouchList(n,t),s=r.POINTER_TOUCH;return(n.type.match(/mouse/)||r.PointerEvent.matchType(r.POINTER_MOUSE,n))&&(s=r.POINTER_MOUSE),{center:r.utils.getCenter(i),timeStamp:(new Date).getTime(),target:n.target,touches:i,eventType:t,pointerType:s,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return r.detection.stopDetect()}}}},r.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(n){t.push(e.pointers[n])}),t},updatePointer:function(e,t){return e==r.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var n={};return n[r.POINTER_MOUSE]=t.pointerType==t.MSPOINTER_TYPE_MOUSE||t.pointerType==r.POINTER_MOUSE,n[r.POINTER_TOUCH]=t.pointerType==t.MSPOINTER_TYPE_TOUCH||t.pointerType==r.POINTER_TOUCH,n[r.POINTER_PEN]=t.pointerType==t.MSPOINTER_TYPE_PEN||t.pointerType==r.POINTER_PEN,n[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},r.utils={extend:function(e,n,r){for(var i in n)e[i]!==t&&r||(e[i]=n[i]);return e},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){for(var t=[],n=[],r=0,i=e.length;i>r;r++)t.push(e[r].pageX),n.push(e[r].pageY);return{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.pageY-e.pageY,r=t.pageX-e.pageX;return 180*Math.atan2(n,r)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.pageX-t.pageX),i=Math.abs(e.pageY-t.pageY);return n>=i?e.pageX-t.pageX>0?r.DIRECTION_LEFT:r.DIRECTION_RIGHT:e.pageY-t.pageY>0?r.DIRECTION_UP:r.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==r.DIRECTION_UP||e==r.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){var n,r=["webkit","khtml","moz","ms","o",""];if(t&&e.style){for(var i=0;r.length>i;i++)for(var s in t)t.hasOwnProperty(s)&&(n=s,r[i]&&(n=r[i]+n.substring(0,1).toUpperCase()+n.substring(1)),e.style[n]=t[s]);"none"==t.userSelect&&(e.onselectstart=function(){return!1})}}},r.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:r.utils.extend({},t),lastEvent:!1,name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);for(var t=this.current.inst.options,n=0,i=this.gestures.length;i>n;n++){var s=this.gestures[n];if(!this.stopped&&t[s.name]!==!1&&s.handler.call(s,e,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=e),e.eventType==r.EVENT_END&&!e.touches.length-1&&this.stopDetect(),e}},stopDetect:function(){this.previous=r.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(e){var t=this.current.startEvent;if(t&&(e.touches.length!=t.touches.length||e.touches===t.touches)){t.touches=[];for(var n=0,i=e.touches.length;i>n;n++)t.touches.push(r.utils.extend({},e.touches[n]))}var s=e.timeStamp-t.timeStamp,o=e.center.pageX-t.center.pageX,u=e.center.pageY-t.center.pageY,a=r.utils.getVelocity(s,o,u);return r.utils.extend(e,{deltaTime:s,deltaX:o,deltaY:u,velocityX:a.x,velocityY:a.y,distance:r.utils.getDistance(t.center,e.center),angle:r.utils.getAngle(t.center,e.center),direction:r.utils.getDirection(t.center,e.center),scale:r.utils.getScale(t.touches,e.touches),rotation:r.utils.getRotation(t.touches,e.touches),startEvent:t}),e},register:function(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),r.utils.extend(r.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},r.gestures=r.gestures||{},r.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(e,t){switch(e.eventType){case r.EVENT_START:clearTimeout(this.timer),r.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==r.detection.current.name&&t.trigger("hold",e)},t.options.hold_timeout);break;case r.EVENT_MOVE:e.distance>t.options.hold_threshold&&clearTimeout(this.timer);break;case r.EVENT_END:clearTimeout(this.timer)}}},r.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(e,t){if(e.eventType==r.EVENT_END){var n=r.detection.previous,i=!1;if(e.deltaTime>t.options.tap_max_touchtime||e.distance>t.options.tap_max_distance)return;n&&"tap"==n.name&&e.timeStamp-n.lastEvent.timeStamp<t.options.doubletap_interval&&e.distance<t.options.doubletap_distance&&(t.trigger("doubletap",e),i=!0),(!i||t.options.tap_always)&&(r.detection.current.name="tap",t.trigger(r.detection.current.name,e))}}},r.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(e,t){if(e.eventType==r.EVENT_END){if(t.options.swipe_max_touches>0&&e.touches.length>t.options.swipe_max_touches)return;(e.velocityX>t.options.swipe_velocity||e.velocityY>t.options.swipe_velocity)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},r.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(e,n){if(r.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",e),this.triggered=!1,t;if(!(n.options.drag_max_touches>0&&e.touches.length>n.options.drag_max_touches))switch(e.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:if(e.distance<n.options.drag_min_distance&&r.detection.current.name!=this.name)return;r.detection.current.name=this.name,(r.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=e.distance)&&(e.drag_locked_to_axis=!0);var i=r.detection.current.lastEvent.direction;e.drag_locked_to_axis&&i!==e.direction&&(e.direction=r.utils.isVertical(i)?0>e.deltaY?r.DIRECTION_UP:r.DIRECTION_DOWN:0>e.deltaX?r.DIRECTION_LEFT:r.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",e),this.triggered=!0),n.trigger(this.name,e),n.trigger(this.name+e.direction,e),(n.options.drag_block_vertical&&r.utils.isVertical(e.direction)||n.options.drag_block_horizontal&&!r.utils.isVertical(e.direction))&&e.preventDefault();break;case r.EVENT_END:this.triggered&&n.trigger(this.name+"end",e),this.triggered=!1}}},r.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(e,n){if(r.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",e),this.triggered=!1,t;if(!(2>e.touches.length))switch(n.options.transform_always_block&&e.preventDefault(),e.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:var i=Math.abs(1-e.scale),s=Math.abs(e.rotation);if(n.options.transform_min_scale>i&&n.options.transform_min_rotation>s)return;r.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",e),this.triggered=!0),n.trigger(this.name,e),s>n.options.transform_min_rotation&&n.trigger("rotate",e),i>n.options.transform_min_scale&&(n.trigger("pinch",e),n.trigger("pinch"+(1>e.scale?"in":"out"),e));break;case r.EVENT_END:this.triggered&&n.trigger(this.name+"end",e),this.triggered=!1}}},r.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(e,n){return n.options.prevent_mouseevents&&e.pointerType==r.POINTER_MOUSE?(e.stopDetect(),t):(n.options.prevent_default&&e.preventDefault(),e.eventType==r.EVENT_START&&n.trigger(this.name,e),t)}},r.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==r.EVENT_END&&t.trigger(this.name,e)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=r:(e.Hammer=r,"function"==typeof e.define&&e.define.amd&&e.define("hammer",[],function(){return r}))}(this),function(e,t){e!==t&&(Hammer.event.bindDom=function(n,r,i){e(n).on(r,function(e){var n=e.originalEvent||e;n.pageX===t&&(n.pageX=e.pageX,n.pageY=e.pageY),n.target||(n.target=e.target),n.which===t&&(n.which=n.button),n.preventDefault||(n.preventDefault=e.preventDefault),n.stopPropagation||(n.stopPropagation=e.stopPropagation),i.call(this,n)})},Hammer.Instance.prototype.on=function(t,n){return e(this.element).on(t,n)},Hammer.Instance.prototype.off=function(t,n){return e(this.element).off(t,n)},Hammer.Instance.prototype.trigger=function(t,n){var r=e(this.element);return r.has(n.target).length&&(r=e(n.target)),r.trigger({type:t,gesture:n})},e.fn.hammer=function(t){return this.each(function(){var n=e(this),r=n.data("hammer");r?r&&t&&Hammer.utils.extend(r.options,t):n.data("hammer",new Hammer(this,t||{}))})})}(window.jQuery||window.Zepto),define("jquery.hammer",["jquery"],function(){}),define("prompt/PromptRune",["PinyinConverter","Recognizer","collection/CanvasCharacter","model/CanvasStroke","prompt/Prompt","prompt/PromptCanvas","require.text!template/prompt-rune.html","backbone","jquery.hammer"],function(e,t,n,r,i,s,o){var u=i.extend({initialize:function(){i.prototype.initialize.call(this),Skritter.timer.setReviewLimit(3e4),Skritter.timer.setThinkingLimit(15e3),u.canvas=new s,u.failedAttempts=0,u.maxFailedAttempts=3,u.minStrokeDistance=25,u.userCharacter=null,u.userTargets=[],this.listenTo(u.canvas,"mouseup",this.handleInputRecieved)},render:function(){return this.$el.html(o),u.canvas.setElement(this.$("#canvas-container")).render(),this.$("#prompt-canvas").hammer().on("doubletap.Rune",this.handleDoubleTap),this.$("#prompt-canvas").hammer().on("hold.Rune",_.bind(this.handleHold,this)),this.$("#prompt-canvas").hammer().on("swipeleft.Rune",_.bind(this.handleSwipeLeft,this)),this},clear:function(){i.buttons.remove(),u.canvas.clear(),u.userCharacter=new n},handleInputRecieved:function(e){if(e.length===0)return;if(Skritter.fn.getDistance(e[0],e[e.length-1])>u.minStrokeDistance){u.canvas.fadeBackground();var n=(new r).set("points",e),s=(new t(u.userCharacter,n,u.userTargets)).recognize();s&&!u.userCharacter.containsStroke(s)?(u.failedAttempts=0,u.userCharacter.add(s),Skritter.user.get("settings").squigs?(u.canvas.drawSquig(s),this.handleStrokeComplete()):(s.get("feedback")&&u.canvas.displayMessage(s.get("feedback"),"orange","24px Arial",10,10),u.canvas.drawStroke(s,_.bind(this.handleStrokeComplete,this)))):(u.failedAttempts++,u.failedAttempts>u.maxFailedAttempts&&(i.grade=1,u.canvas.drawPhantomStroke(this.getNextStroke())))}},handleCharacterComplete:function(){if(i.finished===!0)return;i.finished=!0,this.showAnswer();if(Skritter.user.get("settings").squigs){for(var e in u.userCharacter.models){var t=u.userCharacter.models[e];u.canvas.drawStroke(t),u.canvas.setInputAlpha(.5)}u.canvas.applyBackgroundGlow(u.userTargets[0].getCharacterSprite(),i.gradeColors[i.grade])}else u.canvas.applyBackgroundGlow(u.userTargets[0].getCharacterSprite(),i.gradeColors[i.grade]);this.showGrading(i.grade)},handleDoubleTap:function(){i.finished||(u.canvas.drawCharacter(u.userTargets[0],.3),i.grade=1)},handleGradeSelected:function(e){i.grade=e,i.buttons.remove(),this.next()},handleHold:function(){this.clear(),u.canvas.enableInput()},handleStrokeComplete:function(){u.userCharacter.getStrokeCount()>=this.getTargetStrokeCount()&&this.handleCharacterComplete()},handleSwipeLeft:function(){i.finished&&(i.buttons.remove(),this.next())},getNextStroke:function(){for(var e in u.userTargets){var t=u.userTargets[e];for(var n in t.models){var r=t.models[n];if(!u.userCharacter.containsStroke(r))return r}}},getTargetStrokeCount:function(){var e=0;for(var t in u.userTargets)u.userTargets[t].getStrokeCount()>e&&(e=u.userTargets[t].getStrokeCount());return e},next:function(){console.log("next",i.position,i.vocabs[0].getCharacterCount()),this.pushResult(i.grade,Skritter.timer.getReviewTime(),Skritter.timer.getStartTime(),Skritter.timer.getThinkingTime()),i.position++,i.position<=i.vocabs[0].getCharacterCount()?(u.failedAttempts=0,i.grade=3,i.finished=!1,this.clear(),u.canvas.setInputAlpha(1),u.userTargets=[],this.showHidden(),u.canvas.enableInput()):this.triggerPromptComplete()},showAnswer:function(){Skritter.timer.stop(),u.canvas.disableInput(),this.$("#writing").html(i.vocabs[0].getWritingDisplayAt(i.position)),i.position>=i.vocabs[0].getCharacterCount()&&this.$("#sentence").text(Skritter.fn.maskCharacters(i.sentence))},showHidden:function(){console.log("Prompt","RUNE",i.vocabs[0].get("writing")),Skritter.timer.start(),i.vocabs[0].has("audio")&&i.position===1&&Skritter.user.get("audio")&&i.vocabs[0].play(),u.userCharacter=new n,u.userTargets=i.vocabs[0].getCanvasCharacters(i.position-1,"rune"),u.canvas.enableInput(),this.$("#writing").html(i.vocabs[0].getWritingDisplayAt(i.position-1)),this.$("#reading").text(e.toTone(i.reading)),this.$("#definition").text(i.definition),this.$("#style").text(i.vocabs[0].get("style")),this.$("#sentence").text(Skritter.fn.maskCharacters(i.sentence,i.writing," _ "))}});return u}),define("require.text!template/prompt-tone.html",[],function(){return'<div id="prompt-tone">\r\n    <div id="prompt-top">\r\n        <h1 id="writing" class="chinese-font"></h1>\r\n        <div id="style"></div>\r\n        <div id="reading"></div>\r\n        <div id="definition"></div>\r\n        <div id="sentence" class="chinese-font"></div>\r\n    </div>\r\n    <div id="prompt-bottom">\r\n        <div id="canvas-container"></div>\r\n    </div>\r\n</div>'}),define("prompt/PromptTone",["PinyinConverter","Recognizer","collection/CanvasCharacter","model/CanvasStroke","prompt/Prompt","prompt/PromptCanvas","require.text!template/prompt-tone.html","backbone","jquery.hammer"],function(e,t,n,r,i,s,o){var u=i.extend({initialize:function(){i.prototype.initialize.call(this),Skritter.timer.setReviewLimit(15e3),Skritter.timer.setThinkingLimit(1e4),u.buttons=null,u.canvas=new s,u.minStrokeDistance=25,u.userCharacter=null,u.userTargets=[]},render:function(){return this.$el.html(o),u.canvas.setElement(this.$("#canvas-container")).render(),this.$("#prompt-canvas").hammer().on("swipeleft.Rune",_.bind(this.handleSwipeLeft,this)),this},clear:function(){i.buttons.remove(),u.canvas.clear(),u.userCharacter=new n},getTargetStrokeCount:function(){var e=0;for(var t in u.userTargets)u.userTargets[t].getStrokeCount()>e&&(e=u.userTargets[t].getStrokeCount());return e-1},handleCharacterComplete:function(){i.finished=!0,this.showAnswer(),u.canvas.applyBackgroundGlow(u.userCharacter.at(0).getInflatedSprite(),i.gradeColors[i.grade]),this.showGrading(i.grade)},handleGradeSelected:function(e){i.grade=e,i.buttons.remove(),this.next()},handleInputRecieved:function(e){if(e.length===0)return;if(Skritter.fn.getDistance(e[0],e[e.length-1])>u.minStrokeDistance){var n=(new r).set("points",e),s=(new t(u.userCharacter,n,u.userTargets)).recognize();s&&!u.userCharacter.containsStroke(s)?(u.userCharacter.add(s),u.canvas.drawStroke(s,_.bind(this.handleStrokeComplete,this))):(i.grade=1,u.userCharacter.add(u.userTargets[0].at(0)),u.canvas.drawStroke(u.userTargets[0].at(0),_.bind(this.handleStrokeComplete,this)))}},handleStrokeComplete:function(){u.userCharacter.getStrokeCount()>this.getTargetStrokeCount()&&this.handleCharacterComplete()},handleSwipeLeft:function(){i.finished&&(i.buttons.remove(),this.next())},next:function(){console.log("next",i.position,i.vocabs[0].getCharacterCount()),this.pushResult(i.grade,Skritter.timer.getReviewTime(),Skritter.timer.getStartTime(),Skritter.timer.getThinkingTime()),i.position++,i.position<=i.vocabs[0].getCharacterCount()?(i.grade=3,i.finished=!1,this.clear(),u.userTargets=[],this.showHidden(),u.canvas.enableInput()):this.triggerPromptComplete()},showAnswer:function(){Skritter.timer.stop(),u.canvas.disableInput(),this.$("#reading").html(e.toTone(i.vocabs[0].getReadingDisplayAt(i.position))),i.vocabs[0].has("audio")&&i.position===i.vocabs[0].getCharacterCount()&&Skritter.user.get("audio")&&i.vocabs[0].play()},showHidden:function(){Skritter.timer.start(),u.userCharacter=new n,u.userTargets=i.vocabs[0].getCanvasCharacters(i.position-1,"tone"),u.canvas.drawCharacter(i.vocabs[0].getCanvasCharacters(i.position-1,"rune")[0],.3),u.canvas.enableInput(),this.$("#writing").html(i.writing),this.$("#reading").html(e.toTone(i.vocabs[0].getReadingDisplayAt(i.position-1))),this.$("#definition").text(i.definition),this.$("#style").text(i.vocabs[0].get("style")),this.$("#sentence").text(Skritter.fn.maskCharacters(i.sentence,i.writing," _ ")),this.listenToOnce(u.canvas,"mouseup",this.handleInputRecieved)}});return u}),define("require.text!template/prompt-defn.html",[],function(){return'<div id="prompt-defn">\r\n    <div id="prompt-top">\r\n        <h1 id="writing" class="chinese-font"></h1>\r\n        <div id="style"></div>\r\n        <div id="reading"></div>\r\n        <div id="sentence" class="chinese-font"></div>\r\n    </div>\r\n    <div id="prompt-bottom">\r\n        <div id="canvas-container">\r\n            <div id="prompt-text">\r\n                <h3 id="definition"></h3>\r\n                <p id="prompt-tip"></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("prompt/PromptDefn",["PinyinConverter","prompt/Prompt","require.text!template/prompt-defn.html","backbone","jquery.hammer"],function(e,t,n){var r=t.extend({initialize:function(){t.prototype.initialize.call(this),Skritter.timer.setReviewLimit(3e4),Skritter.timer.setThinkingLimit(15e3)},render:function(){return this.$el.html(n),this.resize(),this},handleClick:function(){t.finished=!0,this.showGrading(),this.showAnswer()},handleGradeSelected:function(e){t.grade=e,this.next()},next:function(){this.pushResult(t.grade,Skritter.timer.getReviewTime(),Skritter.timer.getStartTime(),Skritter.timer.getThinkingTime()),this.triggerPromptComplete()},showAnswer:function(){Skritter.timer.stop(),this.$("#reading").text(e.toTone(t.reading)),this.$("#definition").text(t.definition),this.$("#sentence").text(t.sentence),this.$("#prompt-tip").hide(),t.vocabs[0].has("audio")&&Skritter.user.get("audio")&&t.vocabs[0].play()},showHidden:function(){console.log("Prompt","DEFN",t.vocabs[0].get("writing")),Skritter.timer.start(),this.$("#writing").text(t.writing),this.$("#style").text(t.vocabs[0].get("style")),this.$("#definition").text("What's the definition?"),this.$("#prompt-tip").text("(Click to show answer)"),this.$("#canvas-container").hammer().one("click.Defn",_.bind(this.handleClick,this))}});return r}),define("require.text!template/prompt-rdng.html",[],function(){return'<div id="prompt-rdng">\r\n    <div id="prompt-top">\r\n        <h1 id="writing" class="chinese-font"></h1>\r\n        <div id="style"></div>\r\n        <h3 id="definition"></h3>\r\n        <div id="sentence" class="chinese-font"></div>\r\n    </div>\r\n    <div id="prompt-bottom">\r\n        <div id="canvas-container">\r\n            <div id="prompt-text">\r\n                <h3 id="reading"></h3>\r\n                <p id="prompt-tip"></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("prompt/PromptRdng",["PinyinConverter","prompt/Prompt","require.text!template/prompt-rdng.html","backbone","jquery.hammer"],function(e,t,n){var r=t.extend({initialize:function(){t.prototype.initialize.call(this),Skritter.timer.setReviewLimit(3e4),Skritter.timer.setThinkingLimit(15e3)},render:function(){return this.$el.html(n),this.resize(),this},handleClick:function(){t.finished=!0,this.showGrading(),this.showAnswer()},handleGradeSelected:function(e){t.grade=e,this.next()},next:function(){this.pushResult(t.grade,Skritter.timer.getReviewTime(),Skritter.timer.getStartTime(),Skritter.timer.getThinkingTime()),this.triggerPromptComplete()},showAnswer:function(){Skritter.timer.stop(),this.$("#reading").text(e.toTone(t.reading)),this.$("#definition").text(t.definition),this.$("#sentence").text(t.sentence),this.$("#prompt-tip").hide(),t.vocabs[0].has("audio")&&Skritter.user.get("audio")&&t.vocabs[0].play()},showHidden:function(){console.log("Prompt","RDNG",t.vocabs[0].get("writing")),Skritter.timer.start(),this.$("#writing").text(t.writing),this.$("#style").text(t.vocabs[0].get("style")),this.$("#reading").text("What's the reading?"),this.$("#prompt-tip").text("(Click to show answer)"),this.$("#canvas-container").hammer().one("click.Rdng",_.bind(this.handleClick,this))}});return r}),define("require.text!template/study.html",[],function(){return'<div id="study-view">\r\n    <div class="navbar navbar-inverse navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <a id="back-button" class="navbar-brand" href="#">Back</a>\r\n                <div id="items-due" class="navbar-text lr-padding">{due}</div>\r\n                <div id="timer" class="navbar-text lr-padding">{time}</div>\r\n                <div id="add-button" class="navbar-text lr-padding">{add}</div>\r\n                <div id="audio-button" class="navbar-text lr-padding">{audio}</div>\r\n                <div id="info-button" class="navbar-text lr-padding">{info}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div id="prompt-container"></div>\r\n    \r\n</div>'}),define("view/Study",["Scheduler","model/StudyReview","prompt/PromptRune","prompt/PromptTone","prompt/PromptDefn","prompt/PromptRdng","require.text!template/study.html","backbone"],function(e,t,n,r,i,s,o){var u=Backbone.View.extend({initialize:function(){u.c={prompt:null,item:null,vocabs:null},u.scheduler=new e},render:function(){return this.$el.html(o),this.updateDue(),Skritter.timer.setElement(this.$("#timer")).render(),this.next(),this.resize(),this},events:{"click.Study #info-button":"showInfo","click.Study #audio-button":"playAudio"},handlePromptComplete:function(e){this.updateItems(e),this.updateDue(),Skritter.study.items.sort(),this.next()},next:function(){u.c.item=Skritter.study.items.getNext(),u.c.item||(alert("Something didn't quite load properly!"),console.log("Prompt Load Failed",u.c),window.location.hash=""),u.c.vocabs=u.c.item.getVocabs();switch(u.c.item.get("part")){case"rune":u.c.prompt=new n,u.c.prompt.setElement(this.$("#prompt-container")).render();break;case"tone":u.c.prompt=new r,u.c.prompt.setElement(this.$("#prompt-container")).render();break;case"defn":u.c.prompt=new i,u.c.prompt.setElement(this.$("#prompt-container")).render();break;case"rdng":u.c.prompt=new s,u.c.prompt.setElement(this.$("#prompt-container")).render()}return u.c.vocabs[0].has("audio")?this.$("#audio-button").text("{audio}"):this.$("#audio-button").text("{no-audio}"),u.c.prompt.set(u.c.item,u.c.vocabs).showHidden(),this.listenToOnce(u.c.prompt,"complete",this.handlePromptComplete),u.c},playAudio:function(){return u.c.vocabs[0].play(),!0},showInfo:function(){document.location.hash="info/"+u.c.vocabs[0].get("id")},resize:function(){var e={width:this.$("#prompt-bottom").width(),height:this.$("#prompt-bottom").height()};Skritter.settings.get("orientation")==="vertical"&&(console.log(Skritter.settings.get("appHeight"),e.height),this.$("#prompt-top").height(Skritter.settings.get("appHeight")-e.height))},updateDue:function(){this.$("#items-due").text(Skritter.study.items.getDueCount(!0))},updateItems:function(e){console.log("RESULTS",e);var n=[];if(e.length>1){var r=u.c.item.getContained(),i;for(var s in e){var o=r[s],a=e[s];i=new t({itemId:o.get("id"),score:parseInt(a.grade,10),bearTime:!1,submitTime:a.startTime,reviewTime:a.reviewTime,thinkingTime:a.thinkingTime,currentInterval:o.get("interval"),actualInterval:a.startTime-o.get("last"),newInterval:u.scheduler.getInterval(o,a.grade),wordGroup:u.c.vocabs[0].get("writing")+"_"+e[0].startTime,previousInterval:o.get("previousInterval")?o.get("previousInterval"):0,previousSuccess:o.get("previousSuccess")?o.get("previousSuccess"):!1}),o.set({changed:a.startTime,last:a.startTime,next:a.startTime+i.get("newInterval"),interval:i.get("newInterval"),previousInterval:o.get("interval"),previousSuccess:a.grade>1?!0:!1,reviews:o.get("reviews")+1,successes:a.grade>1?o.get("successes")+1:o.get("successes")}),n.push(i)}}var f=0,l=0,c=0,h=0,p=0;for(var d in e)l+=parseInt(e[d].grade,10),c+=e[d].reviewTime,h+=e[d].thinkingTime,parseInt(e[d].grade,10)===1&&p++;u.c.vocabs[0].getCharacterCount()===2&&p===1?f=1:p>=2?f=1:f=Math.floor(l/e.length);var v=new t({itemId:u.c.item.get("id"),score:parseInt(f,10),bearTime:!0,submitTime:e[0].startTime,reviewTime:c,thinkingTime:h,currentInterval:u.c.item.get("interval"),actualInterval:e[0].startTime-u.c.item.get("last"),newInterval:u.scheduler.getInterval(u.c.item,f),wordGroup:u.c.vocabs[0].get("writing")+"_"+e[0].startTime,previousInterval:u.c.item.get("previousInterval")?u.c.item.get("previousInterval"):0,previousSuccess:u.c.item.get("previousSuccess")?u.c.item.get("previousSuccess"):!1});u.c.item.set({changed:e[0].startTime,last:e[0].startTime,next:e[0].startTime+v.get("newInterval"),interval:v.get("newInterval"),previousInterval:u.c.item.get("interval"),previousSuccess:e[0].grade>1?!0:!1,reviews:u.c.item.get("reviews")+1,successes:e[0].grade>1?u.c.item.get("successes")+1:u.c.item.get("successes")}),n.push(v),Skritter.study.reviews.add(n)}});return u}),define("require.text!template/vocab-words.html",[],function(){return'<div id="words-view">\r\n    <div class="row">\r\n        <!-- TODO: implement a scroll-spy feature for searching by letter -->\r\n        <!--<div class="col-md-3"></div>-->\r\n        <div id="entries" class="col-md-12"></div>\r\n    </div>\r\n</div>'}),define("component/Words",["require.text!template/vocab-words.html","backbone"],function(e){var t=Backbone.View.extend({render:function(){return this.$el.html(e),this}});return t}),define("require.text!template/vocab.html",[],function(){return'<div id="vocab-view">\r\n    <div class="navbar navbar-inverse navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <a id="back-button" class="navbar-brand" href="#">Back</a>\r\n                <a id="lists-button" class="navbar-text lr-padding" href="#lists">Lists</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div id=\'vocab-display\' class="container"></div>\r\n</div>'}),define("view/Vocab",["PinyinConverter","component/Words","require.text!template/vocab.html","backbone"],function(e,t,n){var r=Backbone.View.extend({render:function(){return this.$el.html(n),(new t).setElement(this.$("#vocab-display")).render(),this.loadEntries(),this},events:{"click.Vocab .entry":"toInfo"},loadEntries:function(){this.$("#entries").html("");var t=Skritter.user.getSetting("sourceLang");for(var n in Skritter.study.vocabs.models){var r=Skritter.study.vocabs.models[n],i="<div id='"+r.get("id")+"' class='entry'>"+"<div id='writing'>"+r.get("writing")+"</div>"+"<div id='reading'>"+e.toTone(r.get("reading"))+"</div>"+"<div id='definition'>"+r.get("definitions")[t]+"</div>"+"</div>";this.$("#entries").append(i)}},toInfo:function(e){window.location.hash="info/"+e.currentTarget.id}});return r}),define("Router",["view/Home","view/Info","view/Login","view/Options","view/Study","view/Vocab","backbone"],function(e,t,n,r,i,s){var o=Backbone.Router.extend({routes:{"":"homeView","info/:id":"infoView",login:"loginView",logout:"logout",options:"optionsView",study:"studyView",vocab:"vocabView"},homeView:function(){o.homeView?o.homeView.setElement($(Skritter.settings.get("container"))).render():o.homeView=(new e({el:$(Skritter.settings.get("container"))})).render()},infoView:function(e){if(!e)return;o.infoView?o.infoView.setElement($(Skritter.settings.get("container"))):o.infoView=new t({el:$(Skritter.settings.get("container"))}),o.infoView.load(e),o.infoView.render()},logout:function(){Skritter.user.logout()},loginView:function(){o.loginView?o.loginView.setElement($(Skritter.settings.get("container"))).render():o.loginView=(new n({el:$(Skritter.settings.get("container"))})).render()},optionsView:function(){o.optionsView?o.optionsView.setElement($(Skritter.settings.get("container"))).render():o.optionsView=(new r({el:$(Skritter.settings.get("container"))})).render()},studyView:function(){o.studyView?o.studyView.setElement($(Skritter.settings.get("container"))).render():o.studyView=(new i({el:$(Skritter.settings.get("container"))})).render()},vocabView:function(){o.vocabView?o.vocabView.setElement($(Skritter.settings.get("container"))).render():o.vocabView=(new s({el:$(Skritter.settings.get("container"))})).render()}}),u=function(){return Skritter.router=new o,Backbone.history.start(),Skritter.router};return{initialize:u}}),define("component/Facade",["backbone"],function(){var e=Backbone.View.extend({initialize:function(){this.render()},el:$("#facade-container"),template:"<div id='facade-view'><div id='message-area'></div></div>",render:function(){return this.$el.html(this.template),this},hide:function(){$(this.el).hide()},show:function(e){return e=e?e:"loading",this.$("#message-area").html(e),$(this.el).show(),this},updateStatus:function(e){return e=e?e:"",this.$("#status-area").html(e),this}});return e}),define("component/Timer",["backbone"],function(){var e=function(){var e=0,t=0,n=function(){var e=new Date;return e.getTime()};this.start=function(){e=e?e:n()},this.stop=function(){t=e?t+n()-e:t,e=0},this.reset=function(){t=e=0},this.time=function(){return t+(e?n()-e:0)}},t=Backbone.View.extend({initialize:function(){t.stopwatch=new e,t.time=1,t.timer=null,t.display="0:00",t.lap=null,t.lapStart=0,t.lapStop=0,t.offset=0,t.reviewTime=0,t.reviewLimit=30,t.startTime=0,t.thinkingTime=0,t.thinkingLimit=15},render:function(){var e=t.stopwatch.time();e+=t.offset+1e3;var n=0,r=0,i=0,s=0;return n=Math.floor(e/36e5),e%=36e5,r=Math.floor(e/6e4),e%=6e4,i=Math.floor(e/1e3),s=e%1e3,n>0?this.$el.html(n+":"+Skritter.fn.pad(r,0,2)+":"+Skritter.fn.pad(i,0,2)):this.$el.html(r+":"+Skritter.fn.pad(i,0,2)),this},getTime:function(){return t.stopwatch.time()},getReviewTime:function(){var e=t.lapStop-t.lapStart;return e>=t.reviewLimit?t.reviewLimit/1e3:e/1e3},getStartTime:function(){return t.startTime},getThinkingTime:function(){var e=t.lapStop-t.lapStart;return e>=t.thinkingLimit?t.thinkingLimit/1e3:e/1e3},pause:function(){window.clearInterval(t.timer),t.lapStop=(new Date).getTime(),t.stopwatch.stop()},setReviewLimit:function(e){t.reviewLimit=e},setThinkingLimit:function(e){t.thinkingLimit=e},setOffset:function(e){t.offset=e*1e3},start:function(){t.lap||(t.lap=1e3,t.lapStart=(new Date).getTime()),t.lap!==t.reviewLimit&&(t.timer=window.setInterval(_.bind(this.update,this),10),t.startTime=Skritter.fn.getUnixTime(),t.stopwatch.start())},stop:function(){t.lap=null,t.lapStop=(new Date).getTime(),window.clearInterval(t.timer),t.stopwatch.stop()},sync:function(e){t.offset=Skritter.study.reviews.getTime(),e&&Skritter.api.getProgressStats({start:Skritter.settings.get("date")},function(e){t.offset+=e[0].timeStudied.day*1e3})},update:function(){var e=t.stopwatch.time(),n=Math.floor(e/1e3);t.time!==n&&(t.time=n,t.lap>=t.reviewLimit?this.pause():t.lap+=1e3,this.render())}});return t}),define("StrokeMap",[],function(){var e={images:["media/image/stroke/strokes.png"],frames:[[844,103,407,71],[840,2112,297,58],[324,1619,53,323],[1896,6060,149,293],[1605,7426,106,193],[2,4744,230,298],[373,6397,179,238],[1581,5558,110,217],[1302,7888,101,151],[1100,5504,202,233],[1693,5702,203,180],[181,6775,172,192],[1209,6880,159,165],[1145,1977,46,288],[764,1029,75,89],[355,6842,171,138],[980,8089,128,93],[352,294,71,66],[286,3024,275,200],[838,3163,270,163],[379,1626,306,137],[1693,6091,201,119],[1223,6475,168,70],[883,5501,215,83],[783,385,58,285],[486,7467,142,225],[1672,431,355,329],[353,2169,294,248],[1122,2947,282,237],[2,3847,263,175],[838,2767,282,315],[1672,2142,285,310],[1693,4757,220,253],[1671,2818,283,305],[511,4369,246,198],[1966,1906,39,231],[2,5240,221,234],[1235,4753,226,217],[1065,6080,176,135],[670,2075,168,215],[2,7234,164,203],[880,5916,183,170],[1045,6914,157,186],[168,7592,145,140],[916,5303,218,196],[339,7266,155,165],[306,2349,43,197],[1671,3125,281,173],[691,5202,223,115],[1482,2105,188,114],[686,1983,150,90],[1475,7528,119,93],[1617,7829,109,112],[1652,7112,133,123],[1552,1192,118,89],[1915,5250,131,95],[866,7699,111,399],[1179,758,58,241],[510,7872,102,269],[340,772,77,163],[783,282,59,101],[979,7699,100,388],[817,7363,122,325],[1901,3694,145,295],[1385,6745,159,234],[1560,7977,113,213],[1549,6575,130,188],[1483,7206,132,182],[1222,384,37,138],[1571,1011,99,179],[419,727,343,373],[351,2419,293,304],[649,2292,188,338],[504,7160,155,179],[1546,6765,133,250],[2,1073,335,308],[1226,1311,310,243],[418,1152,324,170],[338,2725,283,133],[1137,2514,35,246],[1672,2047,286,93],[498,4569,237,130],[442,5750,213,100],[1675,8110,113,80],[1385,6575,162,168],[315,7729,133,141],[1528,7623,115,204],[1232,8044,114,144],[657,5821,190,87],[999,4498,234,407],[1985,1373,52,425],[1681,6749,141,361],[776,6338,98,250],[352,621,65,149],[2,7439,164,201],[1325,3930,243,286],[267,3694,263,280],[1672,1031,313,224],[2,5044,230,194],[1814,3991,231,184],[1570,3959,242,151],[1610,665,60,344],[2,6766,177,233],[728,6590,147,231],[1451,8013,107,167],[728,7691,136,168],[630,7551,113,138],[219,6110,186,152],[1459,2834,209,180],[2,6229,186,146],[1344,7094,137,183],[710,6823,165,167],[697,4896,224,53],[1137,2267,39,245],[339,7116,163,148],[1747,7298,122,104],[147,7734,132,136],[1195,596,62,107],[1513,7852,102,123],[225,5457,215,428],[877,6330,173,289],[2,4212,247,212],[1954,3179,91,344],[1582,5183,109,373],[1168,1142,56,197],[614,7870,108,262],[1184,7667,102,229],[1956,2969,90,208],[340,1005,76,161],[1071,7509,104,187],[752,1120,87,123],[1966,1800,79,104],[286,2860,277,162],[2,4426,247,123],[1101,3567,262,129],[320,1944,45,205],[190,6264,182,95],[1193,2072,287,412],[2,2122,302,395],[1406,3016,263,397],[1671,2454,284,362],[1766,4471,235,284],[1284,6063,197,410],[1508,5777,183,406],[448,5378,216,370],[1204,7047,138,359],[306,2151,45,196],[854,7068,155,293],[1259,615,349,314],[1672,762,349,267],[2,1541,320,279],[1673,195,367,234],[1239,931,330,242],[1221,1556,308,202],[1074,3930,249,134],[1178,2486,284,227],[565,3004,271,206],[296,2548,42,138],[1328,3762,250,166],[2,4551,245,191],[759,4388,238,251],[251,4488,245,218],[498,4701,233,178],[1074,3782,250,146],[1284,5917,199,82],[1054,6217,174,148],[737,4641,233,253],[697,4951,223,249],[2007,2030,38,118],[2,2519,292,292],[813,3623,259,368],[666,5566,213,253],[528,6939,166,219],[1083,5822,199,256],[1693,5884,201,205],[877,6621,166,296],[687,1728,151,253],[1288,7667,122,219],[408,5910,186,252],[1168,1418,51,147],[1052,6367,169,176],[1531,1619,139,225],[394,7872,114,275],[1645,7621,109,183],[181,6969,171,128],[782,5910,96,131],[877,6919,156,147],[1348,8041,101,130],[168,7444,145,146],[1900,5627,146,140],[296,2688,40,75],[1871,7298,121,166],[184,6529,177,244],[1045,6678,162,234],[715,1531,123,195],[589,7694,137,174],[421,542,344,183],[267,3976,259,173],[407,6164,183,231],[1184,7898,116,144],[1455,5027,219,154],[1195,438,23,61],[547,3426,264,398],[1465,4664,226,361],[840,1432,307,325],[2,294,348,251],[426,282,355,258],[532,3826,259,213],[1235,4556,228,195],[1682,6294,193,123],[496,7341,146,124],[696,7086,155,201],[1957,2690,84,277],[782,6043,93,293],[1915,4948,131,170],[1110,8047,120,134],[1877,6355,169,376],[1617,7237,128,187],[843,685,334,379],[1287,4218,240,336],[1672,1257,311,358],[1813,4177,233,292],[1261,299,374,314],[442,5852,190,56],[352,448,67,171],[1261,2,410,295],[844,176,376,260],[379,1765,305,257],[2,1383,321,156],[2,4024,258,186],[1482,2262,187,226],[466,4881,229,203],[841,1066,325,364],[834,3328,265,293],[1379,3415,262,235],[1081,7698,101,347],[840,2172,295,380],[262,4151,247,335],[2,5878,215,349],[1148,5152,218,350],[123,7873,141,308],[2,6430,180,334],[1898,5769,148,289],[1902,5347,143,278],[877,6088,175,240],[234,4874,230,225],[1344,7279,129,351],[1693,5262,207,185],[1672,1617,309,181],[1226,1175,324,134],[1643,3597,256,360],[1464,2490,205,342],[744,1245,94,284],[339,7433,145,294],[941,7502,128,195],[1538,1428,132,189],[1529,4279,235,383],[554,6401,172,352],[219,5887,187,221],[1368,5401,211,335],[881,5586,202,190],[1110,3186,267,379],[923,4907,223,394],[1221,6547,162,331],[1824,7081,133,215],[426,2,416,278],[395,1406,318,218],[2,2,422,290],[2,5476,215,400],[466,5086,223,240],[840,1759,303,351],[646,2632,190,370],[173,7099,164,343],[724,7870,127,261],[1915,4757,131,189],[2,3151,273,378],[1304,5738,202,177],[661,7289,154,260],[1507,1846,163,257],[1483,6185,197,388],[1675,7943,120,165],[1412,7632,114,218],[1637,329,33,186],[1637,517,32,146],[1011,7102,135,188],[1174,2715,283,230],[1475,7390,128,136],[1570,4112,241,165],[1043,4066,242,230],[1148,4907,82,135],[1876,6733,169,346],[1952,3525,94,167],[1232,4972,221,178],[1987,1031,53,236],[1672,1800,292,245],[1222,176,37,206],[1512,7017,138,187],[2007,1906,39,122],[1693,5449,205,160],[666,5459,215,105],[596,5910,184,129],[266,7872,126,293],[394,8149,138,39],[592,6165,182,133],[1195,524,64,70],[881,5778,200,136],[2,547,348,168],[596,6041,184,122],[1043,4298,240,198],[839,2554,283,211],[448,5328,217,48],[340,937,77,66],[2,7873,119,312],[1365,3652,252,108],[1074,3698,252,82],[537,6755,171,182],[418,1102,332,48],[2,2813,282,336],[2,717,336,268],[1199,1760,306,310],[1957,2460,89,77],[793,3993,248,393],[1482,2221,188,39],[2,3531,263,314],[528,4041,248,326],[1671,3300,279,295],[277,3226,268,266],[1693,5012,220,248],[363,6637,172,203],[1011,7292,134,208],[1145,1793,47,182],[764,754,75,161],[1960,2139,38,109],[2,6377,181,51],[2,7642,143,229],[2,7001,169,231],[234,5101,222,207],[1368,5183,212,216],[190,6361,181,166],[1177,7509,126,156],[354,6982,165,132],[1147,7408,129,99],[486,7694,101,176],[1959,2250,87,119],[534,8143,128,39],[1149,1693,48,98],[1370,6981,140,111],[1405,7888,106,123],[764,917,75,110],[1959,2371,86,87],[1179,705,74,51],[1682,6212,196,80],[691,5319,217,138],[843,438,350,245],[2,1822,316,298],[664,8134,102,36],[1673,2,368,191],[277,3494,264,198],[249,4708,233,164],[563,3212,269,212],[367,2024,301,143],[225,5310,221,145],[844,2,415,99],[2,987,336,84],[767,672,74,80],[1637,299,34,28],[1957,2539,88,28],[1915,5120,131,128],[853,8100,125,82],[1957,2569,85,119],[1149,1567,51,124],[352,362,70,84],[1179,1001,58,139],[1985,1269,53,102],[1085,5739,201,81],[1052,6545,167,131],[696,6992,156,92],[339,1168,54,449],[1790,8110,100,73],[1552,1283,117,143],[1713,7426,101,180],[1168,1341,52,75],[395,1324,320,80],[838,3084,272,77],[592,6300,182,99],[1693,5611,205,89],[1284,6001,198,60],[1682,6419,192,328]],animations:{s0:[0],s1:[1],s10:[2],s100:[3],s101:[4],s102:[5],s103:[6],s104:[7],s105:[8],s106:[9],s107:[10],s108:[11],s109:[12],s11:[13],s110:[14],s111:[15],s112:[16],s113:[17],s114:[18],s115:[19],s116:[20],s117:[21],s118:[22],s119:[23],s12:[24],s120:[25],s121:[26],s122:[27],s123:[28],s124:[29],s125:[30],s126:[31],s127:[32],s128:[33],s129:[34],s13:[35],s130:[36],s131:[37],s132:[38],s133:[39],s134:[40],s135:[41],s136:[42],s137:[43],s138:[44],s139:[45],s14:[46],s140:[47],s141:[48],s142:[49],s143:[50],s144:[51],s145:[52],s146:[53],s147:[54],s148:[55],s149:[56],s15:[57],s150:[58],s151:[59],s152:[60],s153:[61],s154:[62],s155:[63],s156:[64],s157:[65],s158:[66],s159:[67],s16:[68],s160:[69],s161:[70],s162:[71],s163:[72],s164:[73],s165:[74],s166:[75],s167:[76],s168:[77],s169:[78],s17:[79],s170:[80],s171:[81],s172:[82],s173:[83],s174:[84],s175:[85],s176:[86],s177:[87],s178:[88],s179:[89],s18:[90],s180:[91],s181:[92],s182:[93],s183:[94],s184:[95],s185:[96],s186:[97],s187:[98],s188:[99],s189:[100],s19:[101],s190:[102],s191:[103],s192:[104],s193:[105],s194:[106],s195:[107],s196:[108],s197:[109],s198:[110],s199:[111],s2:[112],s20:[113],s200:[114],s201:[115],s202:[116],s203:[117],s204:[118],s205:[119],s206:[120],s207:[121],s208:[122],s209:[123],s21:[124],s210:[125],s211:[126],s212:[127],s213:[128],s214:[129],s215:[130],s216:[131],s217:[132],s218:[133],s219:[134],s22:[135],s220:[136],s221:[137],s222:[138],s223:[139],s224:[140],s225:[141],s226:[142],s227:[143],s228:[144],s229:[145],s23:[146],s230:[147],s231:[148],s232:[149],s233:[150],s234:[151],s235:[152],s236:[153],s237:[154],s238:[155],s239:[156],s24:[157],s240:[158],s241:[159],s242:[160],s243:[161],s244:[162],s245:[163],s246:[164],s247:[165],s248:[166],s249:[167],s25:[168],s250:[169],s251:[170],s252:[171],s253:[172],s254:[173],s255:[174],s256:[175],s257:[176],s258:[177],s259:[178],s26:[179],s260:[180],s261:[181],s262:[182],s263:[183],s264:[184],s265:[185],s266:[186],s267:[187],s268:[188],s269:[189],s27:[190],s270:[191],s271:[192],s272:[193],s273:[194],s274:[195],s275:[196],s276:[197],s277:[198],s278:[199],s279:[200],s28:[201],s280:[202],s281:[203],s282:[204],s283:[205],s284:[206],s285:[207],s286:[208],s287:[209],s288:[210],s289:[211],s29:[212],s290:[213],s291:[214],s292:[215],s293:[216],s294:[217],s295:[218],s296:[219],s297:[220],s298:[221],s299:[222],s3:[223],s30:[224],s300:[225],s301:[226],s302:[227],s303:[228],s304:[229],s305:[230],s306:[231],s307:[232],s308:[233],s309:[234],s31:[235],s310:[236],s311:[237],s312:[238],s313:[239],s314:[240],s315:[241],s316:[242],s317:[243],s318:[244],s319:[245],s32:[246],s320:[247],s321:[248],s322:[249],s323:[250],s324:[251],s325:[252],s326:[253],s327:[254],s328:[255],s329:[256],s33:[257],s330:[258],s331:[259],s332:[260],s333:[261],s334:[262],s335:[263],s336:[264],s337:[265],s338:[266],s339:[267],s34:[268],s340:[269],s341:[270],s342:[271],s343:[272],s344:[273],s345:[274],s346:[275],s347:[276],s348:[277],s349:[278],s35:[279],s350:[280],s351:[281],s352:[282],s353:[283],s354:[284],s355:[285],s356:[286],s357:[287],s358:[288],s359:[289],s36:[290],s360:[291],s361:[292],s362:[293],s363:[294],s364:[295],s365:[296],s366:[297],s367:[298],s368:[299],s369:[300],s37:[301],s370:[302],s371:[303],s372:[304],s373:[305],s374:[306],s375:[307],s376:[308],s377:[309],s378:[310],s379:[311],s38:[312],s380:[313],s381:[314],s382:[315],s383:[316],s384:[317],s385:[318],s386:[319],s387:[320],s39:[321],s4:[322],s40:[323],s41:[324],s42:[325],s43:[326],s44:[327],s45:[328],s46:[329],s47:[330],s48:[331],s49:[332],s5:[333],s50:[334],s51:[335],s52:[336],s53:[337],s54:[338],s55:[339],s56:[340],s57:[341],s58:[342],s59:[343],s6:[344],s60:[345],s61:[346],s62:[347],s63:[348],s64:[349],s65:[350],s66:[351],s67:[352],s68:[353],s69:[354],s7:[355],s70:[356],s71:[357],s72:[358],s73:[359],s74:[360],s75:[361],s76:[362],s77:[363],s78:[364],s79:[365],s8:[366],s80:[367],s81:[368],s82:[369],s83:[370],s84:[371],s85:[372],s86:[373],s87:[374],s88:[375],s89:[376],s9:[377],s90:[378],s91:[379],s92:[380],s93:[381],s94:[382],s95:[383],s96:[384],s97:[385],s98:[386],s99:[387]},texturepacker:["SmartUpdateHash: $TexturePacker:SmartUpdate:7f0947c22cf57daec9897b7d171e256d:1/1$","Created with TexturePacker (http://www.texturepacker.com) for EaselJS"]};return e}),this.createjs=this.createjs||{},function(){var e=createjs.PreloadJS=createjs.PreloadJS||{};e.version="0.4.0",e.buildDate="Wed, 25 Sep 2013 17:09:35 GMT"}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype;t.type=null,t.target=null,t.currentTarget=null,t.eventPhase=0,t.bubbles=!1,t.cancelable=!1,t.timeStamp=0,t.defaultPrevented=!1,t.propagationStopped=!1,t.immediatePropagationStopped=!1,t.removed=!1,t.initialize=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=(new Date).getTime()},t.preventDefault=function(){this.defaultPrevented=!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){var e=function(){},t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent},t._listeners=null,t._captureListeners=null,t.initialize=function(){},t.addEventListener=function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t},t.on=function(e,t,n,r,i,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),r&&e.remove()},s)},t.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var s=0,o=i.length;o>s;s++)if(i[s]==t){1==o?delete r[e]:i.splice(s,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t){if("string"==typeof e){var n=this._listeners;if(!n||!n[e])return!1;e=new createjs.Event(e)}if(e.target=t||this,e.bubbles&&this.parent){for(var r=this,i=[r];r.parent;)i.push(r=r.parent);var s,o=i.length;for(s=o-1;s>=0&&!e.propagationStopped;s--)i[s]._dispatchEvent(e,1+(0==s));for(s=1;o>s&&!e.propagationStopped;s++)i[s]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;e.currentTarget=this,e.eventPhase=t,e.removed=!1,i=i.slice();for(var s=0;n>s&&!e.immediatePropagationStopped;s++){var o=i[s];o.handleEvent?o.handleEvent(e):o(e),e.removed&&(this.off(e.type,o,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){createjs.indexOf=function(e,t){for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1}}(),this.createjs=this.createjs||{},function(){createjs.proxy=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.createjs=this.createjs||{},function(){var e=function(){this.init()};e.prototype={};var t=e.prototype,n=e;n.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,t.loaded=!1,t.canceled=!1,t.progress=0,t._item=null,t._basePath=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t.getItem=function(){return this._item},t.init=function(){},t.load=function(){},t.close=function(){},t._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},t._sendProgress=function(e){if(!this._isCanceled()){var t=null;"number"==typeof e?(this.progress=e,t=new createjs.Event("progress"),t.loaded=this.progress,t.total=1):(t=e,this.progress=e.loaded/e.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),t.progress=this.progress,this.hasEventListener("progress")&&this.dispatchEvent(t)}},t._sendComplete=function(){this._isCanceled()||this.dispatchEvent("complete")},t._sendError=function(e){!this._isCanceled()&&this.hasEventListener("error")&&(null==e&&(e=new createjs.Event("error")),this.dispatchEvent(e))},t._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},t._parseURI=function(e){return e?e.match(n.FILE_PATTERN):null},t._formatQueryString=function(e,t){if(null==e)throw new Error("You must specify data.");var n=[];for(var r in e)n.push(r+"="+escape(e[r]));return t&&(n=n.concat(t)),n.join("&")},t.buildPath=function(e,t,n){if(null!=t){var r=this._parseURI(e);(null==r||null==r[1]||""==r[1])&&(e=t+e)}if(null==n)return e;var i=[],s=e.indexOf("?");if(-1!=s){var o=e.slice(s+1);i=i.concat(o.split("&"))}return-1!=s?e.slice(0,s)+"?"+this._formatQueryString(n,i):e+"?"+this._formatQueryString(n,i)},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.init(e,t)},t=e.prototype=new createjs.AbstractLoader,n=e;n.LOAD_TIMEOUT=8e3,n.BINARY="binary",n.CSS="css",n.IMAGE="image",n.JAVASCRIPT="javascript",n.JSON="json",n.JSONP="jsonp",n.SOUND="sound",n.SVG="svg",n.TEXT="text",n.XML="xml",n.POST="POST",n.GET="GET",t.useXHR=!0,t.stopOnError=!1,t.maintainScriptOrder=!0,t.next=null,t._typeCallbacks=null,t._extensionCallbacks=null,t._loadStartWasDispatched=!1,t._maxConnections=1,t._currentlyLoadingScript=null,t._currentLoads=null,t._loadQueue=null,t._loadQueueBackup=null,t._loadItemsById=null,t._loadItemsBySrc=null,t._loadedResults=null,t._loadedRawResults=null,t._numItems=0,t._numItemsLoaded=0,t._scriptOrder=null,t._loadedScripts=null,t.init=function(e,t){this._numItems=this._numItemsLoaded=0,this._paused=!1,this._loadStartWasDispatched=!1,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._scriptOrder=[],this._loadedScripts=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._typeCallbacks={},this._extensionCallbacks={},this._basePath=t,this.setUseXHR(e)},t.setUseXHR=function(e){return this.useXHR=0!=e&&null!=window.XMLHttpRequest,this.useXHR},t.removeAll=function(){this.remove()},t.remove=function(e){var t=null;if(!e||e instanceof Array){if(e)t=e;else if(arguments.length>0)return}else t=[e];var n=!1;if(t){for(;t.length;){var r=t.pop(),i=this.getResult(r);for(s=this._loadQueue.length-1;s>=0;s--)if(o=this._loadQueue[s].getItem(),o.id==r||o.src==r){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if(o=this._loadQueueBackup[s].getItem(),o.id==r||o.src==r){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(i)delete this._loadItemsById[i.id],delete this._loadItemsBySrc[i.src],this._disposeItem(i);else for(var s=this._currentLoads.length-1;s>=0;s--){var o=this._currentLoads[s].getItem();if(o.id==r||o.src==r){this._currentLoads.splice(s,1)[0].cancel(),n=!0;break}}}n&&this._loadNext()}else{this.close();for(var u in this._loadItemsById)this._disposeItem(this._loadItemsById[u]);this.init(this.useXHR)}},t.reset=function(){this.close();for(var e in this._loadItemsById)this._disposeItem(this._loadItemsById[e]);var t=[];for(i=0,l=this._loadQueueBackup.length;l>i;i++)t.push(this._loadQueueBackup[i].getItem());this.loadManifest(t,!1)},n.isBinary=function(e){switch(e){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return!0;default:return!1}},t.installPlugin=function(e){if(null!=e&&null!=e.getPreloadHandlers){var t=e.getPreloadHandlers();if(null!=t.types)for(var n=0,r=t.types.length;r>n;n++)this._typeCallbacks[t.types[n]]=t.callback;if(null!=t.extensions)for(n=0,r=t.extensions.length;r>n;n++)this._extensionCallbacks[t.extensions[n]]=t.callback}},t.setMaxConnections=function(e){this._maxConnections=e,!this._paused&&this._loadQueue.length>0&&this._loadNext()},t.loadFile=function(e,t,n){if(null==e){var r=new createjs.Event("error");return r.text="PRELOAD_NO_FILE",this._sendError(r),void 0}this._addItem(e,n),t!==!1?this.setPaused(!1):this.setPaused(!0)},t.loadManifest=function(e,t,n){var r=null;if(e instanceof Array){if(0==e.length){var i=new createjs.Event("error");return i.text="PRELOAD_MANIFEST_EMPTY",this._sendError(i),void 0}r=e}else{if(null==e){var i=new createjs.Event("error");return i.text="PRELOAD_MANIFEST_NULL",this._sendError(i),void 0}r=[e]}for(var s=0,o=r.length;o>s;s++)this._addItem(r[s],n);t!==!1?this.setPaused(!1):this.setPaused(!0)},t.load=function(){this.setPaused(!1)},t.getItem=function(e){return this._loadItemsById[e]||this._loadItemsBySrc[e]},t.getResult=function(e,t){var n=this._loadItemsById[e]||this._loadItemsBySrc[e];if(null==n)return null;var r=n.id;return t&&this._loadedRawResults[r]?this._loadedRawResults[r]:this._loadedResults[r]},t.setPaused=function(e){this._paused=e,this._paused||this._loadNext()},t.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1},t._addItem=function(e,t){var n=this._createLoadItem(e);if(null!=n){var r=this._createLoader(n,t);null!=r&&(this._loadQueue.push(r),this._loadQueueBackup.push(r),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT&&r instanceof createjs.XHRLoader&&(this._scriptOrder.push(n),this._loadedScripts.push(null)))}},t._createLoadItem=function(e){var t=null;switch(typeof e){case"string":t={src:e};break;case"object":t=window.HTMLAudioElement&&e instanceof HTMLAudioElement?{tag:e,src:t.tag.src,type:createjs.LoadQueue.SOUND}:e;break;default:return null}var n=this._parseURI(t.src);if(null!=n&&(t.ext=n[5]),null==t.type&&(t.type=this._getTypeByExtension(t.ext)),t.type==createjs.LoadQueue.JSON&&null!=t.callback&&(t.type=createjs.LoadQueue.JSONP),t.type==createjs.LoadQueue.JSONP&&null==t.callback)throw new Error("callback is required for loading JSONP requests.");null==t.tag&&(t.tag=this._createTag(t.type)),(null==t.id||""==t.id)&&(t.id=t.src);var r=this._typeCallbacks[t.type]||this._extensionCallbacks[t.ext];if(r){var i=r(t.src,t.type,t.id,t.data);if(i===!1)return null;i===!0||(null!=i.src&&(t.src=i.src),null!=i.id&&(t.id=i.id),null!=i.tag&&i.tag.load instanceof Function&&(t.tag=i.tag),null!=i.completeHandler&&(t.completeHandler=i.completeHandler)),i.type&&(t.type=i.type),n=this._parseURI(t.src),null!=n&&null!=n[5]&&(t.ext=n[5].toLowerCase())}return this._loadItemsById[t.id]=t,this._loadItemsBySrc[t.src]=t,t},t._createLoader=function(e,t){var n=this.useXHR;switch(e.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:n=!0;break;case createjs.LoadQueue.SOUND:case createjs.LoadQueue.JSONP:n=!1;break;case null:return null}return null==t&&(t=this._basePath),n?new createjs.XHRLoader(e,t):new createjs.TagLoader(e,t)},t._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var e=0;e<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);e++){var t=this._loadQueue[e];if(this.maintainScriptOrder&&t instanceof createjs.TagLoader&&t.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=!0}this._loadQueue.splice(e,1),e--,this._loadItem(t)}}},t._loadItem=function(e){e.addEventListener("progress",createjs.proxy(this._handleProgress,this)),e.addEventListener("complete",createjs.proxy(this._handleFileComplete,this)),e.addEventListener("error",createjs.proxy(this._handleFileError,this)),this._currentLoads.push(e),this._sendFileStart(e.getItem()),e.load()},t._handleFileError=function(e){var t=e.target;this._numItemsLoaded++,this._updateProgress();var e=new createjs.Event("error");e.text="FILE_LOAD_ERROR",e.item=t.getItem(),this._sendError(e),this.stopOnError||(this._removeLoadItem(t),this._loadNext())},t._handleFileComplete=function(e){var t=e.target,n=t.getItem();if(this._loadedResults[n.id]=t.getResult(),t instanceof createjs.XHRLoader&&(this._loadedRawResults[n.id]=t.getResult(!0)),this._removeLoadItem(t),this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT){if(!(t instanceof createjs.TagLoader))return this._loadedScripts[createjs.indexOf(this._scriptOrder,n)]=n,this._checkScriptLoadOrder(t),void 0;this._currentlyLoadingScript=!1}this._processFinishedLoad(n,t)},t._processFinishedLoad=function(e,t){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(e,t),this._loadNext()},t._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;e>t;t++){var n=this._loadedScripts[t];if(null===n)break;n!==!0&&(this._processFinishedLoad(n),this._loadedScripts[t]=!0,t--,e--)}},t._removeLoadItem=function(e){for(var t=this._currentLoads.length,n=0;t>n;n++)if(this._currentLoads[n]==e){this._currentLoads.splice(n,1);break}},t._handleProgress=function(e){var t=e.target;this._sendFileProgress(t.getItem(),t.progress),this._updateProgress()},t._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(t>0){for(var n=0,r=0,i=this._currentLoads.length;i>r;r++)n+=this._currentLoads[r].progress;e+=n/t*(t/this._numItems)}this._sendProgress(e)},t._disposeItem=function(e){delete this._loadedResults[e.id],delete this._loadedRawResults[e.id],delete this._loadItemsById[e.id],delete this._loadItemsBySrc[e.src]},t._createTag=function(e){var t=null;switch(e){case createjs.LoadQueue.IMAGE:return document.createElement("img");case createjs.LoadQueue.SOUND:return t=document.createElement("audio"),t.autoplay=!1,t;case createjs.LoadQueue.JSONP:case createjs.LoadQueue.JAVASCRIPT:return t=document.createElement("script"),t.type="text/javascript",t;case createjs.LoadQueue.CSS:return t=this.useXHR?document.createElement("style"):document.createElement("link"),t.rel="stylesheet",t.type="text/css",t;case createjs.LoadQueue.SVG:return this.useXHR?t=document.createElement("svg"):(t=document.createElement("object"),t.type="image/svg+xml"),t}return null},t._getTypeByExtension=function(e){if(null==e)return createjs.LoadQueue.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.LoadQueue.IMAGE;case"ogg":case"mp3":case"wav":return createjs.LoadQueue.SOUND;case"json":return createjs.LoadQueue.JSON;case"xml":return createjs.LoadQueue.XML;case"css":return createjs.LoadQueue.CSS;case"js":return createjs.LoadQueue.JAVASCRIPT;case"svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}},t._sendFileProgress=function(e,t){if(this._isCanceled())return this._cleanUp(),void 0;if(this.hasEventListener("fileprogress")){var n=new createjs.Event("fileprogress");n.progress=t,n.loaded=t,n.total=1,n.item=e,this.dispatchEvent(n)}},t._sendFileComplete=function(e,t){if(!this._isCanceled()){var n=new createjs.Event("fileload");n.loader=t,n.item=e,n.result=this._loadedResults[e.id],n.rawResult=this._loadedRawResults[e.id],e.completeHandler&&e.completeHandler(n),this.hasEventListener("fileload")&&this.dispatchEvent(n)}},t._sendFileStart=function(e){var t=new createjs.Event("filestart");t.item=e,this.hasEventListener("filestart")&&this.dispatchEvent(t)},t.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=e;var r=function(){};r.init=function(){var e=navigator.userAgent;r.isFirefox=e.indexOf("Firefox")>-1,r.isOpera=null!=window.opera,r.isChrome=e.indexOf("Chrome")>-1,r.isIOS=e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1},r.init(),createjs.LoadQueue.BrowserDetect=r}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.init(e,t)},t=e.prototype=new createjs.AbstractLoader;t._loadTimeout=null,t._tagCompleteProxy=null,t._isAudio=!1,t._tag=null,t._jsonResult=null,t.init=function(e,t){this._item=e,this._basePath=t,this._tag=e.tag,this._isAudio=window.HTMLAudioElement&&e.tag instanceof HTMLAudioElement,this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)},t.getResult=function(){return this._item.type==createjs.LoadQueue.JSONP?this._jsonResult:this._tag},t.cancel=function(){this.canceled=!0,this._clean(),this.getItem()},t.load=function(){var e=this._item,t=this._tag;clearTimeout(this._loadTimeout),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT),this._isAudio&&(t.src=null,t.preload="auto"),t.onerror=createjs.proxy(this._handleError,this),this._isAudio?(t.onstalled=createjs.proxy(this._handleStalled,this),t.addEventListener("canplaythrough",this._tagCompleteProxy,!1)):(t.onload=createjs.proxy(this._handleLoad,this),t.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));var n=this.buildPath(e.src,this._basePath,e.values);switch(e.type){case createjs.LoadQueue.CSS:t.href=n;break;case createjs.LoadQueue.SVG:t.data=n;break;default:t.src=n}if(e.type==createjs.LoadQueue.JSONP){if(null==e.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[e.callback])throw new Error('JSONP callback "'+e.callback+'" already exists on window. You need to specify a different callback. Or re-name the current one.');window[e.callback]=createjs.proxy(this._handleJSONPLoad,this)}(e.type==createjs.LoadQueue.SVG||e.type==createjs.LoadQueue.JSONP||e.type==createjs.LoadQueue.JSON||e.type==createjs.LoadQueue.JAVASCRIPT||e.type==createjs.LoadQueue.CSS)&&(this._startTagVisibility=t.style.visibility,t.style.visibility="hidden",(document.body||document.getElementsByTagName("body")[0]).appendChild(t)),null!=t.load&&t.load()},t._handleJSONPLoad=function(e){this._jsonResult=e},t._handleTimeout=function(){this._clean();var e=new createjs.Event("error");e.text="PRELOAD_TIMEOUT",this._sendError(e)},t._handleStalled=function(){},t._handleError=function(){this._clean();var e=new createjs.Event("error");this._sendError(e)},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this.getItem().tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleLoad()},t._handleLoad=function(){if(!this._isCanceled()){var e=this.getItem(),t=e.tag;if(!(this.loaded||this.isAudio&&4!==t.readyState)){switch(this.loaded=!0,e.type){case createjs.LoadQueue.SVG:case createjs.LoadQueue.JSONP:t.style.visibility=this._startTagVisibility,(document.body||document.getElementsByTagName("body")[0]).removeChild(t)}this._clean(),this._sendComplete()}}},t._clean=function(){clearTimeout(this._loadTimeout);var e=this.getItem().tag;e.onload=null,e.removeEventListener&&e.removeEventListener("canplaythrough",this._tagCompleteProxy,!1),e.onstalled=null,e.onprogress=null,e.onerror=null,e.parentNode&&e.parentNode.removeChild(e);var t=this.getItem();t.type==createjs.LoadQueue.JSONP&&(window[t.callback]=null)},t.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.init(e,t)},t=e.prototype=new createjs.AbstractLoader;t._request=null,t._loadTimeout=null,t._xhrLevel=1,t._response=null,t._rawResponse=null,t.init=function(e,t){this._item=e,this._basePath=t,!this._createXHR(e)},t.getResult=function(e){return e&&this._rawResponse?this._rawResponse:this._response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(null==this._request)return this._handleError(),void 0;this._request.onloadstart=createjs.proxy(this._handleLoadStart,this),this._request.onprogress=createjs.proxy(this._handleProgress,this),this._request.onabort=createjs.proxy(this._handleAbort,this),this._request.onerror=createjs.proxy(this._handleError,this),this._request.ontimeout=createjs.proxy(this._handleTimeout,this),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT)),this._request.onload=createjs.proxy(this._handleLoad,this),this._request.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);try{this._item.values&&this._item.method!=createjs.LoadQueue.GET?this._item.method==createjs.LoadQueue.POST&&this._request.send(this._formatQueryString(this._item.values)):this._request.send()}catch(e){var t=new createjs.Event("error");t.error=e,this._sendError(t)}},t.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},t.getResponseHeader=function(e){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(e):null},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.Event("progress");t.loaded=e.loaded,t.total=e.total,this._sendProgress(t)}},t._handleLoadStart=function(){clearTimeout(this._loadTimeout),this._sendLoadStart()},t._handleAbort=function(e){this._clean();var e=new createjs.Event("error");e.text="XHR_ABORTED",this._sendError(e)},t._handleError=function(){this._clean();var e=new createjs.Event("error");this._sendError(e)},t._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},t._handleLoad=function(){if(!this.loaded){if(this.loaded=!0,!this._checkError())return this._handleError(),void 0;this._response=this._getResponse(),this._clean();var e=this._generateTag();e&&this._sendComplete()}},t._handleTimeout=function(e){this._clean();var t=new createjs.Event("error");t.text="PRELOAD_TIMEOUT",this._sendError(e)},t._checkError=function(){var e=parseInt(this._request.status);switch(e){case 404:case 0:return!1}return!0},t._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(e){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},t._createXHR=function(e){var t=document.createElement("a");t.href=this.buildPath(e.src,this._basePath);var n=document.createElement("a");n.href=location.href;var r=""!=t.hostname&&(t.port!=n.port||t.protocol!=n.protocol||t.hostname!=n.hostname),i=null;if(r&&window.XDomainRequest)i=new XDomainRequest;else if(window.XMLHttpRequest)i=new XMLHttpRequest;else try{i=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(s){try{i=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(s){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(s){return!1}}}e.type==createjs.LoadQueue.TEXT&&i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),this._xhrLevel="string"==typeof i.responseType?2:1;var o=null;return o=e.method==createjs.LoadQueue.GET?this.buildPath(e.src,this._basePath,e.values):this.buildPath(e.src,this._basePath),i.open(e.method||createjs.LoadQueue.GET,o,!0),r&&i instanceof XMLHttpRequest&&1==this._xhrLevel&&i.setRequestHeader("Origin",location.origin),e.values&&e.method==createjs.LoadQueue.POST&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),createjs.LoadQueue.isBinary(e.type)&&(i.responseType="arraybuffer"),this._request=i,!0},t._clean=function(){clearTimeout(this._loadTimeout);var e=this._request;e.onloadstart=null,e.onprogress=null,e.onabort=null,e.onerror=null,e.onload=null,e.ontimeout=null,e.onloadend=null,e.onreadystatechange=null},t._generateTag=function(){var e=this._item.type,t=this._item.tag;switch(e){case createjs.LoadQueue.IMAGE:return t.onload=createjs.proxy(this._handleTagReady,this),t.src=this.buildPath(this._item.src,this._basePath,this._item.values),this._rawResponse=this._response,this._response=t,!1;case createjs.LoadQueue.JAVASCRIPT:return t=document.createElement("script"),t.text=this._response,this._rawResponse=this._response,this._response=t,!0;case createjs.LoadQueue.CSS:var n=document.getElementsByTagName("head")[0];if(n.appendChild(t),t.styleSheet)t.styleSheet.cssText=this._response;else{var r=document.createTextNode(this._response);t.appendChild(r)}return this._rawResponse=this._response,this._response=t,!0;case createjs.LoadQueue.XML:var i=this._parseXML(this._response,"text/xml");return this._response=i,!0;case createjs.LoadQueue.SVG:var i=this._parseXML(this._response,"image/svg+xml");return this._rawResponse=this._response,null!=i.documentElement?(t.appendChild(i.documentElement),this._response=t):this._response=i,!0;case createjs.LoadQueue.JSON:var s={};try{s=JSON.parse(this._response)}catch(o){s=o}return this._rawResponse=this._response,this._response=s,!0}return!0},t._parseXML=function(e,t){var n=null;if(window.DOMParser){var r=new DOMParser;n=r.parseFromString(e,t)}else n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e);return n},t._handleTagReady=function(){this._sendComplete()},t.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=e}(),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o,u=gap,a=t[e];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(e)),"function"==typeof rep&&(a=rep.call(t,e,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(a)){for(s=a.length,n=0;s>n;n+=1)o[n]=str(n,a)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+u+"]":"["+o.join(",")+"]",gap=u,i}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,a),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+u+"}":"{"+o.join(",")+"}",gap=u,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("createjs.preload",function(){}),define("model/Assets",["StrokeMap","backbone","createjs.preload"],function(e){var t=Backbone.Model.extend({initialize:function(){t.audioPlayer=new Audio,t.queue=new createjs.LoadQueue,t.strokes=null},getAudio:function(e){return t.audioPlayer.paused&&(t.audioPlayer.src=Skritter.settings.get("apiRoot")+"."+Skritter.settings.get("apiDomain")+"/sounds?file="+e,t.audioPlayer.play()),t.audioPlayer},getStroke:function(e){return new createjs.Sprite(t.strokes,"s"+e)},loadStrokes:function(n){var r=function(){n(t.strokes)};t.strokes=new createjs.SpriteSheet(e),t.strokes.complete?n(t.strokes):t.strokes.addEventListener("complete",r)}});return t}),define("model/Settings",["backbone"],function(){var e=Backbone.Model.extend({initialize:function(){this.refreshDate(),this.resize(),$(window).resize(_.bind(this.resize,this))},defaults:{apiClientId:"mcfarljwapiclient",apiDomain:"com",apiRoot:"http://beta.skritter",apiClientSecret:"e3872517fed90a820e441531548b8c",apiVersion:0,appHeight:0,appWidth:0,date:null,canvasMaxSize:600,canvasSize:600,container:"#skritter-container",orientation:"vertical",transitionSpeed:200,version:"0.0.49"},resize:function(){this.set("appWidth",$("#skritter-container").width()),this.set("appHeight",$("#skritter-container").height()),this.get("appWidth")>this.get("appHeight")?this.set("orientation","horizontal"):this.set("orientation","vertical"),this.get("appWidth")>this.get("canvasMaxSize")?this.set("canvasSize",this.get("canvasMaxSize")):this.set("canvasSize",this.get("appWidth")),this.triggerResize()},refreshDate:function(){var e=new Date;this.set("date",e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate())},triggerResize:function(){var e={width:this.get("appWidth"),height:this.get("appHeight"),canvas:this.get("canvasSize")};this.trigger("resize",e)}});return e}),define("model/LogItem",["backbone"],function(){var e=Backbone.Model.extend({defaults:{userId:null,timestamp:(new Date).getTime()}});return e}),define("collection/Log",["model/LogItem","backbone"],function(e){var t=Backbone.Collection.extend({model:e,cache:function(e){if(this.length===0){e();return}Skritter.storage.setItems("log",this.toJSON(),function(){typeof e=="function"&&e()})},loadAll:function(e){Skritter.storage.getItems("log",function(t){Skritter.log.add(t),e(null,t)})}});return t}),define("model/StudyDecomp",["backbone"],function(){var e=Backbone.Model.extend({idAttribute:"writing"});return e}),define("collection/StudyDecomps",["model/StudyDecomp","backbone"],function(e){var t=Backbone.Collection.extend({model:e,cache:function(e){if(this.length===0){e();return}Skritter.storage.setItems("decomps",this.toJSON(),function(){typeof e=="function"&&e()})},loadAll:function(e){Skritter.storage.getItems("decomps",function(t){Skritter.study.decomps.add(t),e(null,t)})}});return t}),define("model/StudyItem",["Scheduler","model/StudyReview","backbone"],function(e,t){var n=Backbone.Model.extend({initialize:function(){this.on("change",this.cache)},cache:function(e){Skritter.storage.setItem("items",this.toJSON(),function(){typeof e=="function"&&e()})},getCharacterCount:function(){return this.getVocabs()[0].getCharacterCount()},getContained:function(){var e=[],t=this.getVocabs()[0].get("containedVocabIds");for(var n in t){var r=Skritter.user.get("user_id")+"-"+t[n]+"-"+this.get("part"),i=Skritter.study.items.findWhere({id:r});i&&e.push(i)}return e},getReadiness:function(){var e=(Skritter.fn.getUnixTime()-this.get("last"))/(this.get("next")-this.get("last"));return e},getVocabs:function(){var e=[];for(var t in this.get("vocabIds"))e.push(Skritter.study.vocabs.findWhere({id:this.get("vocabIds")[t]}));return e},isActive:function(){return this.get("vocabIds").length>0?!0:!1},play:function(){var e=this.getVocabs()[0];e.play()},spawnReview:function(n,r,i,s,o,u){u=u?!0:!1;var a=Skritter.fn.getUnixTime(),f=i-this.get("last"),l=(new e).getNewInterval(this,n),c=this.get("previousInterval")?this.get("previousInterval"):0,h=this.get("previousSuccess")?this.get("previousSuccess"):!1,p=new t;return p.set({itemId:this.get("id"),score:parseInt(n,10),bearTime:u,submitTime:i,reviewTime:parseFloat(r),thinkingTime:parseFloat(s),currentInterval:this.get("interval"),actualInterval:f,newInterval:l,wordGroup:o,previousInterval:c,previousSuccess:h}),Skritter.study.reviews.add(p),this.set({last:a,next:a+l,interval:l,previousInterval:this.get("interval"),previousSuccess:this.get("grade")>1?!0:!1,reviews:this.get("reviews")+1,successes:n>1?this.get("successes")+1:this.get("successes")}),this}});return n}),define("collection/StudyItems",["model/StudyItem","backbone"],function(e){var t=Backbone.Collection.extend({model:e,cache:function(e){if(this.length===0){e();return}Skritter.storage.setItems("items",this.toJSON(),function(){typeof e=="function"&&e()})},comparator:function(e){return-e.getReadiness()},fetch:function(e,t){var n=[{path:"api/v0/items",method:"GET",cache:!1,params:{sort:e?"changed":"last",offset:e?e:"",include_vocabs:"true",include_strokes:"true",include_sentences:"true",include_heisigs:"true",include_top_mnemonics:"true",include_decomps:"true"},spawner:!0}];Skritter.async.waterfall([function(e){Skritter.api.requestBatch(n,function(t){e(null,t)})},function(e,t){Skritter.api.getBatch(e.id,function(e){Skritter.study.decomps.add(e.Decomps),Skritter.study.items.add(e.Items),Skritter.study.srsconfigs.add(e.SRSConfigs),Skritter.study.sentences.add(e.Sentences),Skritter.study.strokes.add(e.Strokes),Skritter.study.vocabs.add(e.Vocabs)},function(){t()})}],function(){t()})},loadAll:function(e){Skritter.storage.getItems("items",function(t){Skritter.study.items.add(t),e(null,t)})},filterActive:function(){var e=this.filterBy("part",Skritter.user.getStudyParts());return e=e.filter(function(e){var t=e.get("vocabIds");if(t.length>0){var n=e.getVocabs()[0];if(!n.has("bannedParts"))return!0}}),new t(e)},filterBy:function(e,n,r){var i=this.filter(function(t){return r?t.get(e).indexOf(n)>-1?!0:!1:_.contains(n,t.get(e))});return new t(i)},getContainedItemIds:function(){var e=[];for(var t in this.models){var n=this.models[t],r=n.getVocabs();for(var i in r){var s=r[i].get("containedVocabIds");for(var o in s){var u=Skritter.user.get("user_id")+"-"+s[o]+"-"+n.get("part");_.contains(e,u)||e.push(u)}}}return e},getDue:function(){var e=[],t=this.filterActive();for(var n in t.models){var r=t.models[n];r.getReadiness()>=1&&e.push(r)}return e},getDueCount:function(e){var t=this.getDue();if(e){var n=0;for(var r in t){var i=t[r],s=i.get("part");s==="rune"||s==="tone"?n+=i.getCharacterCount():n++}return n}return t.length},getNext:function(){var e=this.filterActive();e=e.filterBy("part",Skritter.user.getStudyParts());var t=e.at(0);return t},getRandom:function(){var e=this.filterActive();return e.at(Skritter.fn.getRandomInt(0,e.length-1))}});return t}),define("Params",[],function(){var e=[{bitmapId:0,corners:[{x:26,y:51},{x:356,y:12}],deviations:[{x:162,y:39}]},{bitmapId:1,corners:[{x:19,y:46},{x:270,y:15}],deviations:[{x:159,y:25}]},{bitmapId:2,corners:[{x:22,y:43},{x:207,y:8}],deviations:[{x:83,y:29}]},{bitmapId:3,corners:[{x:20,y:47},{x:172,y:12}],deviations:[{x:103,y:32}]},{bitmapId:4,corners:[{x:14,y:28},{x:159,y:9}],deviations:[{x:139,y:15}]},{bitmapId:5,corners:[{x:16,y:40},{x:154,y:7}],deviations:[{x:106,y:22}]},{bitmapId:6,corners:[{x:15,y:31},{x:109,y:6}],deviations:[{x:78,y:10}]},{bitmapId:7,corners:[{x:14,y:29},{x:86,y:8}],deviations:[{x:73,y:11}]},{bitmapId:8,corners:[{x:8,y:20},{x:69,y:8}],deviations:[{x:36,y:17}]},{bitmapId:9,corners:[{x:28,y:13},{x:21,y:383}],deviations:[{x:28,y:317}]},{bitmapId:10,corners:[{x:25,y:24},{x:25,y:295}],deviations:[{x:28,y:129}]},{bitmapId:11,corners:[{x:25,y:23},{x:25,y:265}],deviations:[{x:25,y:258.95}]},{bitmapId:12,corners:[{x:25,y:18},{x:45,y:272}],deviations:[{x:36,y:92}]},{bitmapId:13,corners:[{x:19,y:17},{x:22,y:207}],deviations:[{x:22,y:116}]},{bitmapId:14,corners:[{x:19,y:19},{x:30,y:167}],deviations:[{x:29,y:104}]},{bitmapId:15,corners:[{x:40,y:16},{x:14,y:220}],deviations:[{x:21,y:187}]},{bitmapId:16,corners:[{x:16,y:10},{x:20,y:110}],deviations:[{x:19,y:61}]},{bitmapId:17,corners:[{x:19,y:14},{x:18,y:212}],deviations:[{x:18,y:14}]},{bitmapId:18,corners:[{x:27,y:19},{x:27,y:391}],deviations:[{x:27,y:316.6}]},{bitmapId:19,corners:[{x:32,y:25},{x:34,y:327}],deviations:[{x:34,y:45}]},{bitmapId:20,corners:[{x:20,y:17},{x:18,y:232}],deviations:[{x:20,y:189}]},{bitmapId:21,corners:[{x:30,y:22},{x:22,y:181}],deviations:[{x:31,y:88}]},{bitmapId:22,corners:[{x:21,y:13},{x:15,y:186}],deviations:[{x:21,y:115}]},{bitmapId:23,corners:[{x:22,y:17},{x:32,y:177}],deviations:[{x:26,y:138}]},{bitmapId:24,corners:[{x:24,y:12},{x:18,y:120}],deviations:[{x:20,y:31}]},{bitmapId:25,corners:[{x:16,y:12},{x:20,y:107}],deviations:[{x:16,y:70}]},{bitmapId:26,corners:[{x:16,y:10},{x:41,y:140}],deviations:[{x:32,y:55}]},{bitmapId:27,corners:[{x:17,y:9},{x:27,y:54}],deviations:[{x:24,y:27}]},{bitmapId:28,corners:[{x:7,y:9},{x:14,y:43}],deviations:[{x:7,y:19}]},{bitmapId:29,corners:[{x:67,y:25},{x:9,y:260}],deviations:[{x:58,y:48}]},{bitmapId:30,corners:[{x:48,y:20},{x:9,y:162}],deviations:[{x:41,y:51}]},{bitmapId:31,corners:[{x:76,y:18},{x:8,y:345}],deviations:[{x:64,y:200}]},{bitmapId:32,corners:[{x:103,y:15},{x:10,y:350}],deviations:[{x:91,y:256}]},{bitmapId:33,corners:[{x:149,y:22},{x:6,y:342}],deviations:[{x:131,y:258}]},{bitmapId:34,corners:[{x:181,y:18},{x:15,y:388}],deviations:[{x:153,y:242}]},{bitmapId:35,corners:[{x:169,y:20},{x:17,y:377}],deviations:[{x:140,y:264}]},{bitmapId:36,corners:[{x:147,y:22},{x:16,y:335}],deviations:[{x:100,y:237}]},{bitmapId:37,corners:[{x:108,y:18},{x:11,y:290}],deviations:[{x:86,y:198}]},{bitmapId:38,corners:[{x:98,y:18},{x:13,y:306}],deviations:[{x:82,y:155}]},{bitmapId:39,corners:[{x:219,y:23},{x:10,y:388}],deviations:[{x:156,y:223}]},{bitmapId:40,corners:[{x:238,y:24},{x:18,y:306}],deviations:[{x:183,y:217}]},{bitmapId:41,corners:[{x:219,y:26},{x:12,y:313}],deviations:[{x:140,y:210}]},{bitmapId:42,corners:[{x:254,y:13},{x:15,y:279}],deviations:[{x:135,y:171}]},{bitmapId:43,corners:[{x:242,y:23},{x:16,y:257}],deviations:[{x:145,y:158}]},{bitmapId:44,corners:[{x:203,y:15},{x:16,y:235}],deviations:[{x:126,y:151}]},{bitmapId:45,corners:[{x:145,y:25},{x:12,y:196}],deviations:[{x:111,y:139}]},{bitmapId:46,corners:[{x:109,y:15},{x:10,y:203}],deviations:[{x:80,y:145}]},{bitmapId:47,corners:[{x:33,y:12},{x:11,y:168}],deviations:[{x:37,y:103}]},{bitmapId:48,corners:[{x:56,y:15},{x:16,y:151}],deviations:[{x:56,y:88}]},{bitmapId:49,corners:[{x:25,y:12},{x:12,y:96}],deviations:[{x:25,y:70}]},{bitmapId:50,corners:[{x:121,y:11},{x:8,y:214}],deviations:[{x:83,y:123}]},{bitmapId:51,corners:[{x:145,y:26},{x:13,y:220}],deviations:[{x:102,y:112}]},{bitmapId:52,corners:[{x:199,y:18},{x:8,y:200}],deviations:[{x:137,y:105}]},{bitmapId:53,corners:[{x:199,y:14},{x:11,y:205}],deviations:[{x:145,y:102}]},{bitmapId:54,corners:[{x:161,y:19},{x:12,y:160}],deviations:[{x:106,y:107}]},{bitmapId:55,corners:[{x:108,y:15},{x:10,y:151}],deviations:[{x:79,y:93}]},{bitmapId:56,corners:[{x:146,y:15},{x:11,y:124}],deviations:[{x:104,y:63}]},{bitmapId:57,corners:[{x:110,y:12},{x:13,y:94}],deviations:[{x:85,y:51}]},{bitmapId:58,corners:[{x:76,y:21},{x:13,y:164}],deviations:[{x:55,y:90}]},{bitmapId:59,corners:[{x:63,y:18},{x:12,y:106}],deviations:[{x:44,y:74}]},{bitmapId:60,corners:[{x:32,y:11},{x:9,y:87}],deviations:[{x:32,y:49}]},{bitmapId:61,corners:[{x:112,y:22},{x:17,y:96}],deviations:[{x:93,y:41}]},{bitmapId:62,corners:[{x:76,y:17},{x:9,y:111}],deviations:[{x:44,y:70}]},{bitmapId:63,corners:[{x:56,y:21},{x:10,y:101}],deviations:[{x:46,y:45}]},{bitmapId:64,corners:[{x:58,y:16},{x:15,y:70}],deviations:[{x:40,y:42}]},{bitmapId:65,corners:[{x:54,y:19},{x:17,y:41}],deviations:[{x:28,y:32}]},{bitmapId:66,corners:[{x:161,y:22},{x:26,y:75}],deviations:[{x:57,y:66}]},{bitmapId:67,corners:[{x:174,y:16},{x:15,y:134}],deviations:[{x:128,y:70}]},{bitmapId:68,corners:[{x:22,y:12},{x:258,y:227}],deviations:[{x:100,y:107}]},{bitmapId:69,corners:[{x:16,y:8},{x:234,y:271}],deviations:[{x:180,y:235}]},{bitmapId:70,corners:[{x:14,y:6},{x:276,y:172}],deviations:[{x:77,y:30}]},{bitmapId:71,corners:[{x:21,y:8},{x:167,y:181}],deviations:[{x:147,y:166}]},{bitmapId:72,corners:[{x:15,y:11},{x:162,y:146}],deviations:[{x:120,y:117}]},{bitmapId:73,corners:[{x:7,y:5},{x:174,y:194}],deviations:[{x:105,y:130}]},{bitmapId:74,corners:[{x:10,y:9},{x:214,y:125}],deviations:[{x:104,y:70}]},{bitmapId:75,corners:[{x:8,y:5},{x:148,y:124}],deviations:[{x:75,y:80}]},{bitmapId:76,corners:[{x:18,y:27},{x:335,y:82}],deviations:[{x:141,y:17}]},{bitmapId:77,corners:[{x:13,y:9},{x:253,y:66}],deviations:[{x:78,y:9}]},{bitmapId:78,corners:[{x:11,y:8},{x:58,y:56}],deviations:[{x:39,y:34}]},{bitmapId:79,corners:[{x:1,y:0},{x:24,y:16}],deviations:[{x:6,y:2}]},{bitmapId:80,corners:[{x:4,y:5},{x:113,y:113}],deviations:[{x:56,y:47}]},{bitmapId:81,corners:[{x:5,y:6},{x:107,y:66}],deviations:[{x:69,y:38}]},{bitmapId:82,corners:[{x:8,y:9},{x:71,y:99}],deviations:[{x:10,y:15}]},{bitmapId:83,corners:[{x:39,y:12},{x:15,y:100}],deviations:[{x:31,y:46}]},{bitmapId:84,corners:[{x:61,y:10},{x:13,y:70}],deviations:[{x:41,y:41}]},{bitmapId:85,corners:[{x:31,y:24},{x:15,y:110}],deviations:[{x:31,y:35}]},{bitmapId:86,corners:[{x:39,y:20},{x:15,y:80}],deviations:[{x:40,y:29}]},{bitmapId:87,corners:[{x:28,y:61},{x:189,y:9}],deviations:[{x:153,y:25}]},{bitmapId:88,corners:[{x:22,y:114},{x:161,y:13}],deviations:[{x:90,y:62}]},{bitmapId:89,corners:[{x:29,y:74},{x:146,y:9}],deviations:[{x:51,y:56}]},{bitmapId:90,corners:[{x:22,y:57},{x:87,y:11}],deviations:[{x:29,y:55}]},{bitmapId:91,corners:[{x:28,y:118},{x:106,y:10}],deviations:[{x:40,y:108}]},{bitmapId:92,corners:[{x:22,y:141},{x:94,y:9}],deviations:[{x:41,y:101}]},{bitmapId:93,corners:[{x:10,y:48},{x:48,y:11}],deviations:[{x:23,y:39}]},{bitmapId:94,corners:[{x:17,y:49},{x:283.07038623570236,y:9.2324034410744},{x:258,y:55}],deviations:[{x:207,y:15},{x:269,y:40}]},{bitmapId:94,corners:[{x:11,y:48},{x:271,y:11}],deviations:[{x:72,y:42}],feedback:"hook"},{bitmapId:95,corners:[{x:16,y:35},{x:232.0877613281261,y:15},{x:211,y:55}],deviations:[{x:127,y:18},{x:234,y:17}]},{bitmapId:95,corners:[{x:17,y:38},{x:219,y:10}],deviations:[{x:53,y:28}],feedback:"hook"},{bitmapId:96,corners:[{x:26,y:40},{x:147.7431614223769,y:11},{x:110,y:74}],deviations:[{x:86,y:22},{x:145,y:22}]},{bitmapId:97,corners:[{x:19,y:44},{x:167.46209380980034,y:22},{x:142,y:72}],deviations:[{x:39,y:44},{x:164,y:33}]},{bitmapId:98,corners:[{x:11,y:41},{x:158,y:15.038874595270153},{x:146,y:46}],deviations:[{x:94,y:20},{x:158,y:18}]},{bitmapId:98,corners:[{x:8,y:43},{x:159,y:11}],deviations:[{x:45,y:31}],feedback:"hook"},{bitmapId:99,corners:[{x:9,y:39},{x:156.71626701455978,y:21},{x:153,y:324}],deviations:[{x:98,y:26},{x:162,y:143}]},{bitmapId:100,corners:[{x:6,y:38},{x:117.18145569497398,y:18.637088610052054},{x:114,y:284}],deviations:[{x:82,y:19},{x:119,y:120}]},{bitmapId:101,corners:[{x:7,y:21},{x:73.97538080876987,y:12.01230959561507},{x:70,y:160}],deviations:[{x:32,y:21},{x:76,y:52}]},{bitmapId:102,corners:[{x:20,y:38},{x:214,y:19.701944955764244},{x:150,y:285}],deviations:[{x:144,y:20},{x:175,y:147}]},{bitmapId:103,corners:[{x:20,y:32},{x:153.6106847411587,y:14},{x:120,y:224}],deviations:[{x:127,y:14},{x:141,y:109}]},{bitmapId:104,corners:[{x:13,y:17},{x:83.93900629068163,y:18.121987418636724},{x:38,y:198}],deviations:[{x:84,y:16},{x:70,y:61}]},{bitmapId:105,corners:[{x:18,y:15},{x:79,y:16.217788322200853},{x:43,y:137}],deviations:[{x:49,y:15},{x:79,y:21}]},{bitmapId:106,corners:[{x:8,y:36},{x:169.34480595472274,y:17},{x:174,y:208}],deviations:[{x:35,y:36},{x:170,y:131}]},{bitmapId:107,corners:[{x:6,y:40},{x:173,y:25.375163415570867},{x:140,y:161}],deviations:[{x:116,y:25},{x:163,y:56}]},{bitmapId:108,corners:[{x:20,y:36},{x:147,y:18.425028853721358},{x:113,y:172}],deviations:[{x:94,y:20},{x:129,y:111}]},{bitmapId:109,corners:[{x:9,y:32},{x:131.75753238422908,y:19},{x:133,y:140}],deviations:[{x:36,y:32},{x:133,y:19}]},{bitmapId:110,corners:[{x:11,y:16},{x:54,y:7.324170873518842},{x:55,y:71}],deviations:[{x:31,y:10},{x:54,y:66}]},{bitmapId:111,corners:[{x:8,y:41},{x:145,y:23.700580596523217},{x:122,y:111}],deviations:[{x:85,y:25},{x:126,y:85}]},{bitmapId:112,corners:[{x:8,y:36},{x:101,y:17.188159788041734},{x:91,y:74}],deviations:[{x:64,y:23},{x:96,y:38}]},{bitmapId:113,corners:[{x:10,y:18},{x:50,y:10.302535954120046},{x:38,y:53}],deviations:[{x:32,y:12},{x:46,y:33}]},{bitmapId:114,corners:[{x:24,y:44},{x:240,y:15.580464243417946},{x:203,y:176}],deviations:[{x:136,y:27},{x:240,y:29}]},{bitmapId:115,corners:[{x:10,y:39},{x:238,y:32.246854488978826},{x:195,y:139}],deviations:[{x:155,y:28},{x:226,y:56}]},{bitmapId:116,corners:[{x:9,y:50},{x:275.1753147651547,y:17},{x:254,y:110}],deviations:[{x:147,y:24},{x:268,y:68}]},{bitmapId:117,corners:[{x:15,y:37},{x:169,y:21.11308443430777},{x:153,y:106}],deviations:[{x:139,y:21},{x:168,y:40}]},{bitmapId:118,corners:[{x:3,y:32},{x:141,y:10.382411370992937},{x:126,y:53}],deviations:[{x:105,y:10},{x:137,y:28}]},{bitmapId:119,corners:[{x:11,y:38},{x:188,y:18.762763241765796},{x:174,y:68}],deviations:[{x:58,y:38},{x:180,y:52}]},{bitmapId:120,corners:[{x:13,y:26},{x:109.81573672074498,y:23},{x:54,y:217}],deviations:[{x:53,y:23},{x:110,y:36}]},{bitmapId:121,corners:[{x:215,y:28},{x:317.5873412453205,y:21.412658754679548},{x:12,y:321}],deviations:[{x:314,y:19},{x:186,y:187}]},{bitmapId:122,corners:[{x:158,y:30},{x:253,y:21.706003355963986},{x:11,y:249}],deviations:[{x:206,y:23},{x:175,y:133}]},{bitmapId:123,corners:[{x:135,y:29},{x:243.28814056179232,y:20},{x:10,y:231}],deviations:[{x:201,y:27},{x:180,y:134}]},{bitmapId:124,corners:[{x:166,y:21},{x:236.99291055423177,y:14.021268337304667},{x:13,y:168}],deviations:[{x:216,y:13},{x:148,y:109}]},{bitmapId:125,corners:[{x:95,y:44},{x:247,y:23.346284008082378},{x:14,y:311}],deviations:[{x:172,y:30},{x:185,y:219}]},{bitmapId:126,corners:[{x:79,y:49},{x:248.31423089842082,y:23},{x:17,y:305}],deviations:[{x:200,y:26},{x:150,y:229}]},{bitmapId:127,corners:[{x:113,y:26},{x:189.76554387744852,y:12},{x:13,y:243}],deviations:[{x:132,y:26},{x:101,y:160}]},{bitmapId:128,corners:[{x:154,y:35},{x:251,y:26.733828343372416},{x:5,y:310}],deviations:[{x:251,y:22},{x:140,y:214}]},{bitmapId:129,corners:[{x:127,y:19},{x:207.14406753244518,y:23.855932467554812},{x:15,y:193}],deviations:[{x:207,y:21},{x:139,y:112}]},{bitmapId:130,corners:[{x:67,y:38},{x:184.12542760492005,y:19},{x:18,y:229}],deviations:[{x:123,y:33},{x:130,y:158}]},{bitmapId:131,corners:[{x:95,y:22},{x:193,y:21.387760539701805},{x:17,y:209}],deviations:[{x:192,y:17},{x:121,y:142}]},{bitmapId:132,corners:[{x:79,y:19},{x:155,y:14.781891025951657},{x:16,y:133}],deviations:[{x:130,y:18},{x:104,y:100}]},{bitmapId:133,corners:[{x:41,y:27},{x:135,y:16.928357780328348},{x:15,y:205}],deviations:[{x:101,y:16},{x:97,y:122}]},{bitmapId:134,corners:[{x:30,y:46},{x:129.4308590585468,y:17},{x:13,y:193}],deviations:[{x:115,y:23},{x:74,y:125}]},{bitmapId:135,corners:[{x:30,y:36},{x:152.7379813918456,y:13},{x:12,y:162}],deviations:[{x:104,y:18},{x:90,y:104}]},{bitmapId:136,corners:[{x:23,y:33},{x:127,y:17.052505047322544},{x:17,y:182}],deviations:[{x:51,y:31},{x:96,y:110}]},{bitmapId:137,corners:[{x:28,y:26},{x:115,y:15.349158856922562},{x:16,y:134}],deviations:[{x:112,y:14},{x:79,y:97}]},{bitmapId:138,corners:[{x:29,y:47},{x:187.36601499450256,y:22},{x:122,y:162}],deviations:[{x:71,y:47},{x:176,y:60}]},{bitmapId:139,corners:[{x:69,y:19},{x:132,y:12.16936134658754},{x:12,y:156}],deviations:[{x:96,y:17},{x:90,y:86}]},{bitmapId:140,corners:[{x:26,y:63},{x:244.22193287065,y:23},{x:33,y:163}],deviations:[{x:155,y:34},{x:171,y:87}]},{bitmapId:141,corners:[{x:28,y:44},{x:191.1532405219484,y:20},{x:133,y:99}],deviations:[{x:166,y:20},{x:166,y:58}]},{bitmapId:142,corners:[{x:23,y:40},{x:153.96993979068304,y:20.060120418633904},{x:109,y:96}],deviations:[{x:120,y:22},{x:120,y:71}]},{bitmapId:143,corners:[{x:20,y:31},{x:123.68036396555597,y:15},{x:80,y:67}],deviations:[{x:35,y:31},{x:118,y:20}]},{bitmapId:144,corners:[{x:13,y:30},{x:95.18945319705531,y:13},{x:54,y:83}],deviations:[{x:71,y:20},{x:89,y:27}]},{bitmapId:145,corners:[{x:16,y:25},{x:81.47221488338111,y:16.527785116618897},{x:27,y:99}],deviations:[{x:61,y:21},{x:38,y:74}]},{bitmapId:146,corners:[{x:11,y:43},{x:95.85561346129425,y:17},{x:65,y:109}],deviations:[{x:44,y:35},{x:93,y:41}]},{bitmapId:147,corners:[{x:8,y:35},{x:90.43256495113388,y:9.567435048866114},{x:71,y:73}],deviations:[{x:39,y:28},{x:73,y:63}]},{bitmapId:148,corners:[{x:11,y:38},{x:106.52680291972565,y:20},{x:83,y:76}],deviations:[{x:40,y:38},{x:88,y:68}]},{bitmapId:149,corners:[{x:85,y:16},{x:75.95469833372987,y:367},{x:21,y:331}],deviations:[{x:81,y:363},{x:33,y:335}]},{bitmapId:149,corners:[{x:83,y:20},{x:91,y:361}],deviations:[{x:78,y:254}],feedback:"hook"},{bitmapId:150,corners:[{x:77,y:24},{x:70.96767480603364,y:241.03232519396636},{x:18,y:208}],deviations:[{x:77,y:144},{x:64,y:242}]},{bitmapId:150,corners:[{x:78,y:20},{x:80,y:238}],deviations:[{x:79,y:34}],feedback:"hook"},{bitmapId:151,corners:[{x:57,y:18},{x:54,y:133.85954460885313},{x:17,y:111}],deviations:[{x:57,y:112},{x:30,y:116}]},{bitmapId:151,corners:[{x:58,y:15},{x:54,y:138}],deviations:[{x:58,y:123}],feedback:"hook"},{bitmapId:152,corners:[{x:45,y:14},{x:46,y:84.80197802518316},{x:16,y:67}],deviations:[{x:45,y:53},{x:19,y:71}]},{bitmapId:152,corners:[{x:46,y:9},{x:45,y:75}],deviations:[{x:45,y:36}],feedback:"hook"},{bitmapId:153,corners:[{x:29,y:21},{x:18.61582275728056,y:359.76835448543886},{x:88,y:305}],deviations:[{x:30,y:293},{x:23,y:353}]},{bitmapId:154,corners:[{x:45,y:22},{x:19,y:292.3671750294021},{x:117,y:239}],deviations:[{x:44,y:125},{x:18,y:296}]},{bitmapId:155,corners:[{x:52,y:20},{x:31,y:258.564740632088},{x:140,y:197}],deviations:[{x:53,y:157},{x:44,y:248}]},{bitmapId:156,corners:[{x:37,y:19},{x:31,y:187.77102392093067},{x:153,y:81}],deviations:[{x:33,y:177},{x:112,y:124}]},{bitmapId:157,corners:[{x:37,y:17},{x:27,y:174.88718348448256},{x:96,y:129}],deviations:[{x:36,y:137},{x:70,y:141}]},{bitmapId:158,corners:[{x:40,y:20},{x:35,y:146.48772377314444},{x:126,y:92}],deviations:[{x:41,y:117},{x:118,y:98}]},{bitmapId:159,corners:[{x:34,y:17},{x:35,y:150.93050372311586},{x:124,y:112}],deviations:[{x:39,y:49},{x:73,y:130}]},{bitmapId:160,corners:[{x:19,y:17},{x:22,y:147.61309015412363},{x:91,y:99}],deviations:[{x:19,y:117},{x:38,y:139}]},{bitmapId:161,corners:[{x:45,y:22},{x:34,y:345.36683401222035},{x:319,y:324}],deviations:[{x:46,y:212},{x:37,y:349}]},{bitmapId:162,corners:[{x:26,y:15},{x:43.50991818934711,y:277.74504090532645},{x:258,y:251}],deviations:[{x:37,y:278},{x:153,y:258}]},{bitmapId:163,corners:[{x:32,y:21},{x:28,y:305.0594159864779},{x:167,y:272}],deviations:[{x:36,y:121},{x:28,y:308}]},{bitmapId:164,corners:[{x:22,y:10},{x:25.05404418657408,y:155},{x:137,y:139}],deviations:[{x:23,y:155},{x:44,y:149}]},{bitmapId:165,corners:[{x:17,y:14},{x:26,y:221.49490630228613},{x:119,y:207}],deviations:[{x:23,y:50},{x:29,y:223}]},{bitmapId:166,corners:[{x:86,y:25},{x:28,y:269.22527964162646},{x:300,y:277}],deviations:[{x:54,y:187},{x:232,y:262}]},{bitmapId:167,corners:[{x:90,y:24},{x:38.05084397153728,y:216},{x:287,y:223}],deviations:[{x:87,y:24},{x:230,y:214}]},{bitmapId:168,corners:[{x:32,y:18},{x:39.70223561628606,y:143},{x:310,y:97}],deviations:[{x:38,y:50},{x:162,y:112}]},{bitmapId:169,corners:[{x:31,y:18},{x:25.054225043423827,y:106},{x:274,y:65}],deviations:[{x:33,y:51},{x:152,y:77}]},{bitmapId:170,corners:[{x:32,y:11},{x:22.275683470047817,y:75},{x:258,y:43}],deviations:[{x:23,y:58},{x:121,y:65}]},{bitmapId:171,corners:[{x:29,y:15},{x:30.54302627967627,y:104},{x:208,y:74}],deviations:[{x:29,y:103},{x:187,y:74}]},{bitmapId:172,corners:[{x:36,y:17},{x:20,y:76.18282102658914},{x:207,y:50}],deviations:[{x:23,y:71},{x:46,y:79}]},{bitmapId:173,corners:[{x:21,y:9},{x:17.198548553429184,y:62},{x:103,y:36}],deviations:[{x:20,y:36},{x:68,y:43}]},{bitmapId:174,corners:[{x:31,y:17},{x:31,y:144.24111462102175},{x:150,y:112}],deviations:[{x:31,y:82.814369631563},{x:99,y:118}]},{bitmapId:175,corners:[{x:26,y:12},{x:11.862294297708242,y:123},{x:113,y:115}],deviations:[{x:26,y:62},{x:38,y:123}]},{bitmapId:176,corners:[{x:26,y:20},{x:40.28424446290882,y:186.1421222314544},{x:103,y:195}],deviations:[{x:27,y:152},{x:61,y:194}]},{bitmapId:177,corners:[{x:30,y:19},{x:37.019228326256425,y:122},{x:102,y:131}],deviations:[{x:27,y:105},{x:58,y:129}]},{bitmapId:178,corners:[{x:20,y:15},{x:28.959005578564284,y:65.95900557856429},{x:176,y:61}],deviations:[{x:20,y:37},{x:131,y:73}]},{bitmapId:179,corners:[{x:83,y:24},{x:21.776193494807544,y:254.1642902422113},{x:210,y:367}],deviations:[{x:21,y:237},{x:117,y:299}]},{bitmapId:180,corners:[{x:68,y:26},{x:13,y:262.4411078958435},{x:129,y:338}],deviations:[{x:60,y:87},{x:42,y:288}]},{bitmapId:181,corners:[{x:65,y:25},{x:13.31291499744991,y:159.68708500255008},{x:84,y:230}],deviations:[{x:57,y:56},{x:42,y:179}]},{bitmapId:182,corners:[{x:48,y:18},{x:13,y:88.40991331121197},{x:57,y:130}],deviations:[{x:32,y:40},{x:46,y:116}]},{bitmapId:183,corners:[{x:38,y:17},{x:14.501993808258533,y:98.25099690412927},{x:145,y:173}],deviations:[{x:13,y:95},{x:53,y:115}]},{bitmapId:184,corners:[{x:119,y:17},{x:19,y:250.12440990787903},{x:217,y:234}],deviations:[{x:110,y:56},{x:47,y:252}]},{bitmapId:185,corners:[{x:221,y:22},{x:27.77441236033469,y:254.22558763966532},{x:249,y:223}],deviations:[{x:172,y:93},{x:119,y:234}]},{bitmapId:186,corners:[{x:170,y:26},{x:20.072227974050502,y:194.9277720259495},{x:293,y:155}],deviations:[{x:90,y:106},{x:171,y:170}]},{bitmapId:187,corners:[{x:111,y:21},{x:33.345669870261446,y:159.96299038921566},{x:212,y:129}],deviations:[{x:79,y:73},{x:114,y:141}]},{bitmapId:188,corners:[{x:123,y:21},{x:39.75284482413547,y:153.24715517586452},{x:229,y:112}],deviations:[{x:65,y:120},{x:171,y:129}]},{bitmapId:189,corners:[{x:108,y:18},{x:35,y:119.43846196206465},{x:228,y:93}],deviations:[{x:95,y:42},{x:91,y:116}]},{bitmapId:190,corners:[{x:143,y:30},{x:28,y:211.71831900445486},{x:169,y:199}],deviations:[{x:108,y:98},{x:66,y:213}]},{bitmapId:191,corners:[{x:85,y:22},{x:24.156136655579097,y:207},{x:142,y:185}],deviations:[{x:75,y:75},{x:99,y:189}]},{bitmapId:192,corners:[{x:85,y:21},{x:17.110774738774694,y:150},{x:93,y:132}],deviations:[{x:37,y:105},{x:32,y:150}]},{bitmapId:193,corners:[{x:68,y:17},{x:28,y:143.76114962040964},{x:118,y:112}],deviations:[{x:53,y:82},{x:83,y:129}]},{bitmapId:194,corners:[{x:72,y:16},{x:20.41811219111986,y:112},{x:97,y:112}],deviations:[{x:65,y:37},{x:59,y:111}]},{bitmapId:195,corners:[{x:80,y:12},{x:32.06729609447371,y:123},{x:176,y:92}],deviations:[{x:70,y:48},{x:75,y:110}]},{bitmapId:196,corners:[{x:175,y:23},{x:26,y:146.23471698875312},{x:205,y:129}],deviations:[{x:150,y:54},{x:34,y:148}]},{bitmapId:197,corners:[{x:144,y:22},{x:17.16516780858318,y:125},{x:174,y:105}],deviations:[{x:96,y:72},{x:126,y:108}]},{bitmapId:198,corners:[{x:116,y:15},{x:19,y:167.31488237748752},{x:102,y:137}],deviations:[{x:49,y:113},{x:32,y:158}]},{bitmapId:199,corners:[{x:103,y:20},{x:18.262635602454573,y:142.47472879509084},{x:152,y:105}],deviations:[{x:29,y:122},{x:89,y:119}]},{bitmapId:200,corners:[{x:89,y:18},{x:24.38252803905029,y:122},{x:152,y:92}],deviations:[{x:73,y:52},{x:88,y:113}]},{bitmapId:201,corners:[{x:90,y:28},{x:19.22342771383248,y:82.88828614308377},{x:105,y:95}],deviations:[{x:43,y:62},{x:26,y:87}]},{bitmapId:202,corners:[{x:20,y:13},{x:21.314802332371084,y:103},{x:121,y:50}],deviations:[{x:20,y:103},{x:52,y:83}]},{bitmapId:203,corners:[{x:15,y:8},{x:16,y:82.46875638015537},{x:60,y:50}],deviations:[{x:15,y:83},{x:42,y:61}]},{bitmapId:204,corners:[{x:23,y:19},{x:23,y:85.67635450442683},{x:86,y:52}],deviations:[{x:23,y:58.08613884742259},{x:45,y:67}]},{bitmapId:205,corners:[{x:23,y:21},{x:192.6425252468284,y:387.64252524682837},{x:204,y:343}],deviations:[{x:73,y:266},{x:200,y:370}]},{bitmapId:206,corners:[{x:22,y:21},{x:153.82299473608126,y:265.8229947360813},{x:166,y:207}],deviations:[{x:65,y:181},{x:156,y:247}]},{bitmapId:207,corners:[{x:28,y:9},{x:225.39757253179482,y:198},{x:222,y:156}],deviations:[{x:107,y:136},{x:224,y:168}]},{bitmapId:208,corners:[{x:14,y:14},{x:37.287936304037096,y:328},{x:13,y:306}],deviations:[{x:68,y:101},{x:32,y:321}]},{bitmapId:209,corners:[{x:67,y:17},{x:55.908156290546856,y:358.95407814527346},{x:19,y:330}],deviations:[{x:89,y:249},{x:24,y:336}]},{bitmapId:210,corners:[{x:8,y:6},{x:65.98873871702868,y:235},{x:20,y:212}],deviations:[{x:87,y:95},{x:57,y:233}]},{bitmapId:211,corners:[{x:70,y:14},{x:72.64771297613271,y:202.82385648806635},{x:27,y:169}],deviations:[{x:85,y:90},{x:59,y:191}]},{bitmapId:212,corners:[{x:45,y:11},{x:64.8247272605026,y:179},{x:18,y:155}],deviations:[{x:71,y:53},{x:28,y:162}]},{bitmapId:213,corners:[{x:31,y:8},{x:43.98078831672929,y:143},{x:8,y:120}],deviations:[{x:52,y:37},{x:31,y:139}]},{bitmapId:214,corners:[{x:18,y:10},{x:65,y:156.4312858757338},{x:24,y:142}],deviations:[{x:72,y:79},{x:63,y:158}]},{bitmapId:215,corners:[{x:23,y:8},{x:64.08495431689092,y:104},{x:15,y:82}],deviations:[{x:62,y:50},{x:52,y:100}]},{bitmapId:216,corners:[{x:36,y:9},{x:63,y:81.86579312561075},{x:19,y:74}],deviations:[{x:57,y:41},{x:53,y:84}]},{bitmapId:217,corners:[{x:12,y:12},{x:245.9593811920934,y:127},{x:200,y:52}],deviations:[{x:79,y:122},{x:245,y:120}]},{bitmapId:218,corners:[{x:8,y:5},{x:210,y:91.86673069459982},{x:187,y:32}],deviations:[{x:62,y:85},{x:211,y:86}]},{bitmapId:219,corners:[{x:9,y:7},{x:234,y:92.48417686631883},{x:189,y:33}],deviations:[{x:90,y:95},{x:212,y:70}]},{bitmapId:220,corners:[{x:3,y:5},{x:151,y:74.9629787103277},{x:128,y:16}],deviations:[{x:62,y:60},{x:142,y:62}]},{bitmapId:221,corners:[{x:8,y:52},{x:246,y:22.580923162103772},{x:260.232830261199,y:381},{x:209,y:352}],deviations:[{x:178,y:26},{x:259,y:250},{x:236,y:363}]},{bitmapId:222,corners:[{x:12,y:45},{x:268.624409882519,y:32.45853003916034},{x:277.37229126942105,y:369.5292184520658},{x:237,y:341}],deviations:[{x:109,y:34},{x:280,y:146},{x:242,y:343}]},{bitmapId:223,corners:[{x:12,y:42},{x:226.38760928451723,y:19.775218569034465},{x:233.98442106191007,y:369.99221053095505},{x:162,y:337}],deviations:[{x:200,y:19},{x:234,y:63},{x:222,y:363}]},{bitmapId:224,corners:[{x:14,y:49},{x:258,y:29.189447374997876},{x:265.03383067058144,y:336.96616932941856},{x:208,y:313}],deviations:[{x:141,y:28},{x:267,y:107},{x:254,y:336}]},{bitmapId:225,corners:[{x:6,y:48},{x:205.37387893333613,y:21},{x:208.35817284442567,y:264},{x:152,y:247}],deviations:[{x:72,y:31},{x:209,y:78},{x:199,y:263}]},{bitmapId:226,corners:[{x:8,y:38},{x:165.75004305525124,y:18},{x:113,y:386.08930249318956},{x:68,y:359}],deviations:[{x:131,y:18},{x:167,y:207},{x:108,y:387}]},{bitmapId:227,corners:[{x:19,y:33},{x:144.74309891982585,y:20},{x:157.2287026635626,y:389},{x:100,y:344}],deviations:[{x:49,y:33},{x:154,y:49},{x:147,y:384}]},{bitmapId:228,corners:[{x:6,y:41},{x:180.0761795924941,y:22.304718369976364},{x:192.21086491430694,y:348.6054324571535},{x:148,y:313}],deviations:[{x:125,y:22},{x:196,y:117},{x:184,y:344}]},{bitmapId:229,corners:[{x:15,y:23},{x:103.84689081491868,y:19},{x:108.72405481271512,y:328},{x:55,y:310}],deviations:[{x:55,y:19},{x:115,y:68},{x:104,y:328}]},{bitmapId:230,corners:[{x:8,y:36},{x:130,y:20.635484542437457},{x:140,y:266.8765054406953},{x:88,y:241}],deviations:[{x:42,y:35},{x:140,y:155},{x:128,y:265}]},{bitmapId:231,corners:[{x:12,y:60},{x:322.3810179108045,y:26.563502985134082},{x:292,y:280.58478336123545},{x:238,y:257}],deviations:[{x:183,y:31},{x:328,y:31},{x:286,y:282}]},{bitmapId:232,corners:[{x:11,y:60},{x:318,y:33.19703704226673},{x:297.19932815448703,y:242},{x:270,y:221}],deviations:[{x:203,y:29},{x:307,y:193},{x:293,y:241}]},{bitmapId:233,corners:[{x:9,y:57},{x:285.8161910541067,y:26},{x:248.25010393078253,y:260},{x:223,y:219}],deviations:[{x:192,y:26},{x:286,y:61},{x:241,y:251}]},{bitmapId:234,corners:[{x:10,y:57},{x:335,y:33.34928252554787},{x:294.9578219881523,y:208.95782198815232},{x:254,y:174}],deviations:[{x:113,y:37},{x:305,y:188},{x:281,y:195}]},{bitmapId:235,corners:[{x:10,y:50},{x:296.80070073688256,y:19},{x:290.43179561822654,y:204.56820438177346},{x:224,y:182}],deviations:[{x:251,y:20},{x:297,y:182},{x:239,y:184}]},{bitmapId:236,corners:[{x:16,y:43},{x:280.7041629158495,y:21},{x:229.56572493496867,y:177},{x:188,y:138}],deviations:[{x:197,y:18},{x:260,y:114},{x:199,y:143}]},{bitmapId:237,corners:[{x:17,y:42},{x:222,y:16.83363509871001},{x:199,y:99.84191391768978},{x:152,y:77}],deviations:[{x:178,y:16},{x:201,y:96},{x:173,y:90}]},{bitmapId:238,corners:[{x:21,y:57},{x:253,y:22.177142706393585},{x:209.14047325298804,y:198.5785802410358},{x:150,y:169}],deviations:[{x:142,y:33},{x:247,y:83},{x:201,y:199}]},{bitmapId:239,corners:[{x:14,y:50},{x:243.79134298119342,y:24.417314037613153},{x:207,y:176.8247869348205},{x:183,y:164}],deviations:[{x:167,y:23},{x:231,y:64},{x:206,y:178}]},{bitmapId:240,corners:[{x:7,y:51},{x:217,y:19.910869931183072},{x:186.9794722846835,y:140.98631485645566},{x:161,y:122}],deviations:[{x:154,y:17},{x:214,y:57},{x:170,y:127}]},{bitmapId:241,corners:[{x:12,y:45},{x:209,y:25.378557732998583},{x:189.51738002850453,y:156.75869001425227},{x:162,y:139}],deviations:[{x:130,y:27},{x:209,y:45},{x:166,y:139}]},{bitmapId:242,corners:[{x:9,y:47},{x:204.50182487023685,y:17},{x:207,y:222.70183087407935},{x:172,y:197}],deviations:[{x:168,y:19},{x:207,y:17},{x:204,y:225}]},{bitmapId:243,corners:[{x:10,y:48},{x:211.4272990168189,y:20},{x:195.0098338749882,y:194},{x:163,y:164}],deviations:[{x:81,y:32},{x:215,y:57},{x:167,y:165}]},{bitmapId:244,corners:[{x:14,y:43},{x:206.21014822930076,y:24.420296458601513},{x:213.4211599244557,y:151.71057996222785},{x:173,y:138}],deviations:[{x:166,y:23},{x:215,y:130},{x:188,y:141}]},{bitmapId:245,corners:[{x:8,y:37},{x:215,y:22.280766075463298},{x:198.1954827826234,y:120.39849426087447},{x:172,y:106}],deviations:[{x:146,y:19},{x:202,y:119},{x:177,y:106}]},{bitmapId:246,corners:[{x:10,y:27},{x:178,y:14.082304535811385},{x:159.69429499444755,y:67},{x:134,y:51}],deviations:[{x:60,y:28},{x:176,y:27},{x:145,y:57}]},{bitmapId:247,corners:[{x:17,y:37},{x:148,y:21.587967022274604},{x:110.6268062885925,y:127},{x:80,y:105}],deviations:[{x:75,y:27},{x:131,y:95},{x:101,y:125}]},{bitmapId:248,corners:[{x:11,y:40},{x:197,y:29.554803195266132},{x:167.43588071193284,y:238.43588071193284},{x:143,y:220}],deviations:[{x:196,y:27},{x:189,y:168},{x:152,y:225}]},{bitmapId:249,corners:[{x:5,y:46},{x:197.64278603182828,y:18},{x:179.6192059299158,y:222},{x:141,y:198}],deviations:[{x:77,y:32},{x:192,y:162},{x:171,y:220}]},{bitmapId:250,corners:[{x:17,y:52},{x:251.7844158164897,y:20},{x:207.76988047960288,y:263},{x:145,y:242}],deviations:[{x:180,y:25},{x:256,y:106},{x:202,y:264}]},{bitmapId:251,corners:[{x:35,y:41},{x:229,y:21.61186408760127},{x:149.02790965634864,y:347},{x:99,y:313}],deviations:[{x:164,y:20},{x:197,y:254},{x:115,y:320}]},{bitmapId:252,corners:[{x:13,y:33},{x:183.7415075150705,y:24.258492484929505},{x:133.75681691009117,y:230},{x:100,y:203}],deviations:[{x:93,y:24},{x:171,y:134},{x:119,y:221}]},{bitmapId:253,corners:[{x:12,y:39},{x:134.03838947318425,y:14},{x:111.76976414502256,y:196.8848820725113},{x:69,y:160}],deviations:[{x:65,y:24},{x:130,y:126},{x:88,y:173}]},{bitmapId:254,corners:[{x:19,y:46},{x:173,y:27.842560670294308},{x:113.66806119544357,y:234},{x:69,y:206}],deviations:[{x:171,y:23},{x:154,y:137},{x:109,y:236}]},{bitmapId:255,corners:[{x:21,y:41},{x:170.28641560408772,y:22},{x:116.47390180610684,y:188.7369509030534},{x:91,y:161}],deviations:[{x:38,y:36},{x:156,y:113},{x:93,y:162}]},{bitmapId:256,corners:[{x:20,y:37},{x:142.01004804013024,y:19},{x:99.39275442240397,y:272},{x:63,y:257}],deviations:[{x:97,y:22},{x:129,y:191},{x:76,y:264}]},{bitmapId:257,corners:[{x:7,y:36},{x:116.24255414199234,y:17},{x:126,y:220.83857782389305},{x:85,y:204}],deviations:[{x:24,y:35},{x:127,y:92},{x:120,y:223}]},{bitmapId:258,corners:[{x:11,y:34},{x:96,y:16.28715416814739},{x:98.80930149780038,y:199},{x:62,y:176}],deviations:[{x:93,y:14},{x:100,y:95},{x:92,y:196}]},{bitmapId:259,corners:[{x:14,y:38},{x:150,y:19.93846587846126},{x:152.85806493705996,y:227},{x:125,y:193}],deviations:[{x:88,y:23},{x:153,y:37},{x:149,y:227}]},{bitmapId:260,corners:[{x:2,y:32},{x:139,y:19.888979992712514},{x:139.1543423379353,y:155},{x:117,y:147}],deviations:[{x:69,y:31},{x:139,y:120},{x:132,y:155}]},{bitmapId:261,corners:[{x:8,y:33},{x:111,y:20.692380241722145},{x:95.4199823904062,y:198.5800176095938},{x:71,y:180}],deviations:[{x:63,y:29},{x:110,y:135},{x:92,y:199}]},{bitmapId:262,corners:[{x:7,y:27},{x:92.31970702026689,y:16},{x:82.76428451546131,y:253},{x:64,y:236}],deviations:[{x:53,y:20},{x:93,y:128},{x:78,y:253}]},{bitmapId:263,corners:[{x:9,y:25},{x:93,y:14.876544819424602},{x:86.62840936096345,y:159.8142046804817},{x:62,y:136}],deviations:[{x:38,y:23},{x:90,y:33},{x:78,y:154}]},{bitmapId:264,corners:[{x:9,y:37},{x:135.3741537314827,y:19},{x:123.61178149017768,y:113},{x:106,y:104}],deviations:[{x:54,y:26},{x:136,y:57},{x:116,y:111}]},{bitmapId:265,corners:[{x:7,y:25},{x:71.48234110558344,y:13},{x:73.09742543288328,y:124},{x:52,y:108}],deviations:[{x:27,y:24},{x:75,y:77},{x:61,y:118}]},{bitmapId:266,corners:[{x:7,y:37},{x:130,y:21.551838731581256},{x:96.99078289826373,y:132.66359429942122},{x:79,y:119}],deviations:[{x:70,y:23},{x:114,y:85},{x:84,y:121}]},{bitmapId:267,corners:[{x:12,y:19},{x:76,y:21.72312592794416},{x:54.16643168979278,y:118.83356831020723},{x:34,y:106}],deviations:[{x:57,y:19},{x:58,y:94},{x:50,y:118}]},{bitmapId:268,corners:[{x:8,y:33},{x:119.17677357964222,y:13},{x:104.63573064313984,y:126},{x:72,y:105}],deviations:[{x:68,y:20},{x:121,y:42},{x:93,y:123}]},{bitmapId:269,corners:[{x:11,y:34},{x:110.05284715769751,y:13},{x:86.69305594296084,y:112},{x:52,y:95}],deviations:[{x:57,y:20},{x:105,y:83},{x:84,y:112}]},{bitmapId:270,corners:[{x:11,y:37},{x:108,y:22.565506192268806},{x:66.14327917328781,y:142.5716395866439},{x:40,y:123}],deviations:[{x:29,y:36},{x:96,y:90},{x:50,y:129}]},{bitmapId:271,corners:[{x:27,y:7},{x:145,y:24.0961829007521},{x:63.657876449467054,y:226},{x:20,y:192}],deviations:[{x:120,y:17},{x:116,y:136},{x:29,y:202}]},{bitmapId:272,corners:[{x:44,y:12},{x:133,y:39.49138927666331},{x:65.10849301710277,y:212},{x:11,y:181}],deviations:[{x:59,y:19},{x:108,y:146},{x:55,y:209}]},{bitmapId:273,corners:[{x:56,y:9},{x:105,y:23.236639530872672},{x:43.91674781900948,y:179},{x:7,y:151}],deviations:[{x:69,y:10},{x:79,y:118},{x:18,y:158}]},{bitmapId:274,corners:[{x:33,y:9},{x:109,y:28.066271772815824},{x:47.551359876913146,y:161.55135987691315},{x:20,y:129}],deviations:[{x:69,y:15},{x:76,y:117},{x:25,y:135}]},{bitmapId:275,corners:[{x:24,y:143},{x:307,y:12.131595593131793},{x:270,y:163.76005576600014},{x:241,y:145}],deviations:[{x:138,y:97},{x:274,y:139},{x:267,y:164}]},{bitmapId:276,corners:[{x:22,y:114},{x:230,y:18.66870690500215},{x:206,y:150.5453250968367},{x:168,y:132}],deviations:[{x:140,y:56},{x:214,y:120},{x:200,y:151}]},{bitmapId:277,corners:[{x:19,y:46},{x:120.17268545308198,y:20.413657273459005},{x:106,y:198.9892365324689},{x:175,y:151}],deviations:[{x:49,y:43},{x:116,y:46},{x:121,y:182}]},{bitmapId:278,corners:[{x:11,y:30},{x:62.29328717819362,y:14},{x:64,y:124.3448935923812},{x:110,y:75}],deviations:[{x:26,y:28},{x:64,y:14},{x:101,y:84}]},{bitmapId:279,corners:[{x:10,y:36},{x:116,y:19.28628214264874},{x:117.8479906919841,y:131.8479906919841},{x:198,y:139}],deviations:[{x:59,y:25},{x:110,y:114},{x:128,y:137}]},{bitmapId:280,corners:[{x:32,y:28},{x:51.83929883656983,y:365.4196494182849},{x:238,y:361.0726437884156},{x:238,y:299}],deviations:[{x:25,y:309},{x:185,y:378},{x:239,y:361}]},{bitmapId:281,corners:[{x:35,y:21},{x:38.07576330867518,y:321},{x:190.13773997622576,y:333},{x:196,y:251}],deviations:[{x:31,y:308},{x:75,y:337},{x:193,y:332}]},{bitmapId:282,corners:[{x:32,y:29},{x:57.15985554854505,y:290.15985554854507},{x:279.6461407879463,y:286.53078881808057},{x:282,y:225}],deviations:[{x:38,y:226},{x:223,y:306},{x:282,y:265}],contains:[121,179]},{bitmapId:283,corners:[{x:15,y:15},{x:29.98246116650804,y:199.9649223330161},{x:327.0004196177853,y:193.9995803822147},{x:333,y:148}],deviations:[{x:13,y:151},{x:236,y:229},{x:333,y:166}],contains:[121,179]},{bitmapId:284,corners:[{x:29,y:17},{x:40,y:198.35230961767027},{x:324,y:221.51201165376727},{x:325,y:167}],deviations:[{x:30,y:169},{x:150,y:239},{x:324,y:188}],contains:[249,60]},{bitmapId:285,corners:[{x:17,y:22},{x:27.3957637896545,y:163.3957637896545},{x:232.8808704328404,y:171.55956478357982},{x:239,y:124}],deviations:[{x:13,y:130},{x:102,y:189},{x:239,y:152}],contains:[249,61]},{bitmapId:286,corners:[{x:22,y:28},{x:39.021492965260805,y:167.5053732413152},{x:200.67827659523041,y:169},{x:206,y:96}],deviations:[{x:18,y:140},{x:80,y:178},{x:205,y:148}]},{bitmapId:287,corners:[{x:15,y:22},{x:28.834617589225807,y:102},{x:169.60969210970887,y:94.39030789029114},{x:168,y:31}],deviations:[{x:16,y:72},{x:119,y:110},{x:171,y:31}],contains:[70,35]},{bitmapId:288,corners:[{x:14,y:15},{x:26,y:92.34332083240749},{x:125.20646995838717,y:99.79353004161283},{x:131,y:54}],deviations:[{x:14,y:62},{x:62,y:106},{x:130,y:78}]},{bitmapId:289,corners:[{x:17,y:13},{x:22.851468520778106,y:169.85146852077813},{x:128.46799606491888,y:171.06400787016224},{x:130,y:135}],deviations:[{x:11,y:153},{x:59,y:180},{x:130,y:170}]},{bitmapId:290,corners:[{x:25,y:17},{x:13,y:138.1936624296488},{x:71.36973314082864,y:138.63026685917134},{x:51,y:274}],deviations:[{x:22,y:19},{x:13,y:139},{x:55,y:224}]},{bitmapId:291,corners:[{x:24,y:18},{x:15,y:118.62208310505868},{x:112,y:109.91257111585712},{x:96,y:152}],deviations:[{x:21,y:79},{x:30,y:123},{x:110,y:118}]},{bitmapId:292,corners:[{x:20,y:12},{x:33.94833891537602,y:74.94833891537601},{x:102,y:64.1784580446039},{x:100,y:113}],deviations:[{x:27,y:36},{x:76,y:63},{x:100,y:90}]},{bitmapId:293,corners:[{x:61,y:25},{x:17,y:270.6373325021897},{x:134.44976502026103,y:253},{x:84,y:355}],deviations:[{x:42,y:182},{x:64,y:260},{x:100,y:331}]},{bitmapId:294,corners:[{x:17,y:35},{x:98.94566381928456,y:18},{x:106,y:166}],deviations:[{x:38,y:34},{x:86,y:103}]},{bitmapId:295,corners:[{x:8,y:56},{x:213.658084835276,y:20},{x:305.4160757277176,y:346.4160757277176},{x:317,y:278}],deviations:[{x:119,y:30},{x:216,y:225},{x:312,y:349}]},{bitmapId:296,corners:[{x:16,y:45},{x:147.1303260733646,y:21},{x:218.88060001787494,y:312},{x:232,y:252}],deviations:[{x:135,y:26},{x:141,y:221},{x:231,y:270}]},{bitmapId:297,corners:[{x:9,y:47},{x:129.57524402236717,y:25.474918659210935},{x:134.59063901492138,y:326},{x:284.4467375458711,y:321},{x:285,y:275}],deviations:[{x:77,y:39},{x:111,y:285},{x:224,y:336},{x:286,y:321}]},{bitmapId:298,corners:[{x:4,y:44},{x:101,y:17.77410892824584},{x:204.58293285775738,y:273},{x:209,y:230}],deviations:[{x:90,y:16},{x:83,y:223},{x:207,y:273}]},{bitmapId:299,corners:[{x:27,y:63},{x:217.7936095451139,y:20},{x:346.3130840873614,y:286.37383182527714},{x:349,y:235}],deviations:[{x:115,y:35},{x:220,y:223},{x:348,y:274}]},{bitmapId:300,corners:[{x:29,y:73},{x:243.8843216830884,y:25.115678316911588},{x:231,y:249.36716881844538},{x:380.18624185240077,y:263.81375814759923},{x:390,y:209}],deviations:[{x:70,y:70},{x:214,y:144},{x:297,y:276},{x:384,y:261}]},{bitmapId:301,corners:[{x:19,y:60},{x:240.88762737377712,y:17},{x:354,y:230.82614042330698},{x:356,y:177}],deviations:[{x:135,y:33},{x:227,y:177},{x:354,y:200}]},{bitmapId:302,corners:[{x:15,y:54},{x:168.94312865211776,y:18.94312865211775},{x:278,y:234.59546822419125},{x:278,y:195}],deviations:[{x:128,y:33},{x:163,y:163},{x:278,y:196}]},{bitmapId:303,corners:[{x:22,y:41},{x:190.13602367531078,y:19},{x:184,y:116.24070997838791},{x:294,y:137.96064727854895},{x:296,y:90}],deviations:[{x:73,y:30},{x:172,y:52},{x:225,y:139},{x:296,y:123}]},{bitmapId:304,corners:[{x:12,y:31},{x:95.12036552766185,y:17},{x:109.40305000096939,y:157.4030500009694},{x:232.78115175171524,y:157.0875392993139},{x:235,y:111}],deviations:[{x:36,y:30},{x:85,y:110},{x:194,y:165},{x:235,y:157}]},{bitmapId:305,corners:[{x:13,y:33},{x:95.43869889334387,y:15},{x:162.5728858591285,y:204},{x:173,y:156}],deviations:[{x:52,y:29},{x:96,y:154},{x:166,y:196}]},{bitmapId:306,corners:[{x:8,y:47},{x:129,y:21.900465923890287},{x:204.0176915375054,y:183},{x:209,y:129}],deviations:[{x:128,y:19},{x:117,y:122},{x:211,y:159}]},{bitmapId:307,corners:[{x:25,y:41},{x:186.882399507992,y:25},{x:11.270492360699848,y:297.27049236069985},{x:316.8033445244534,y:307.1966554755466},{x:308,y:239}],deviations:[{x:121,y:35},{x:51,y:180},{x:87,y:338},{x:311,y:240}]},{bitmapId:308,corners:[{x:17,y:34},{x:133.9178312560648,y:21},{x:19.738377595416303,y:228.9535103816652},{x:242.02863098123876,y:256.19427380375225},{x:245,y:206}],deviations:[{x:124,y:24},{x:38,y:150},{x:84,y:274},{x:245,y:255}]},{bitmapId:309,corners:[{x:18,y:40},{x:102,y:17.572813654888584},{x:33.810838003301335,y:193.20722533553422},{x:247,y:184.26433093389508},{x:247,y:118}],deviations:[{x:29,y:40},{x:32,y:126},{x:145,y:212},{x:247,y:119}]},{bitmapId:310,corners:[{x:22,y:19},{x:14.017230693847065,y:190},{x:258,y:181.45345877428662},{x:218,y:348.88811251600333},{x:179,y:325}],deviations:[{x:21,y:122},{x:141,y:182},{x:256,y:232},{x:214,y:350}]},{bitmapId:311,corners:[{x:45,y:10},{x:27.018418477049106,y:147.9815815229509},{x:221.58027525050736,y:129},{x:188.27793652886479,y:309.72206347113524},{x:116,y:271}],deviations:[{x:25,y:144},{x:153,y:129},{x:207,y:262},{x:181,y:310}]},{bitmapId:312,corners:[{x:18,y:14},{x:19.887598608032434,y:169},{x:188.07117154054913,y:169.07117154054913},{x:149.4921171647042,y:320.0157656705916},{x:89,y:287}],deviations:[{x:16,y:163},{x:188,y:169},{x:187,y:190},{x:146,y:323}]},{bitmapId:313,corners:[{x:20,y:16},{x:18,y:141.5016959655128},{x:196,y:131.3352411638544},{x:151.88313476346727,y:329.94156738173365},{x:110,y:302}],deviations:[{x:18,y:23},{x:128,y:126},{x:157,y:326},{x:113,y:302}]},{bitmapId:314,corners:[{x:17,y:7},{x:20.179959991908014,y:132},{x:115.15638022795572,y:116},{x:82.95770254710757,y:289},{x:44,y:263}],deviations:[{x:17,y:131},{x:60,y:120},{x:110,y:202},{x:57,y:275}]},{bitmapId:315,corners:[{x:70,y:23},{x:26,y:129.07969167357547},{x:152,y:119.62291615588929},{x:82.60499448264127,y:309.1975027586794},{x:38,y:281}],deviations:[{x:70,y:27},{x:111,y:116},{x:140,y:214},{x:78,y:311}]},{bitmapId:316,corners:[{x:34,y:14},{x:25.274082406959945,y:76},{x:124.76805663205684,y:65.76805663205684},{x:76.84170041524129,y:265},{x:44,y:244}],deviations:[{x:35,y:34},{x:79,y:66},{x:115,y:138},{x:70,y:262}]},{bitmapId:317,corners:[{x:40,y:19},{x:23.285051595772952,y:97},{x:120,y:96.54030598873884},{x:70.19216647960252,y:252},{x:28,y:227}],deviations:[{x:38,y:41},{x:80,y:93},{x:100,y:193},{x:62,y:249}]},{bitmapId:318,corners:[{x:54,y:23},{x:30.836718653684734,y:94},{x:145.39628969146057,y:74},{x:108.09293339406975,y:214},{x:71,y:195}],deviations:[{x:47,y:53},{x:73,y:84},{x:139,y:145},{x:78,y:196}]},{bitmapId:319,corners:[{x:23,y:16},{x:22.48581313822596,y:82.25709343088702},{x:208,y:70.32176974313936},{x:172,y:193.9280112270105},{x:134,y:179}],deviations:[{x:19,y:83},{x:87,y:71},{x:196,y:123},{x:166,y:196}]},{bitmapId:320,corners:[{x:33,y:13},{x:16,y:68.83211099670224},{x:181,y:49.2003435624534},{x:125.98278765595865,y:167},{x:88,y:147}],deviations:[{x:17,y:58},{x:73,y:51},{x:167,y:108},{x:121,y:166}]},{bitmapId:321,corners:[{x:32,y:18},{x:26,y:83.0186733726407},{x:278.1348899507889,y:52},{x:251.88234951398374,y:172.11765048601626},{x:212,y:141}],deviations:[{x:32,y:51},{x:171,y:57},{x:274,y:87},{x:230,y:150}]},{bitmapId:322,corners:[{x:30,y:13},{x:18.191495468021174,y:72},{x:312.19001093049934,y:38.619978139001375},{x:279.1052692001438,y:115},{x:242,y:94}],deviations:[{x:27,y:35},{x:236,y:38},{x:301,y:59},{x:269,y:113}]},{bitmapId:323,corners:[{x:25,y:44},{x:206.91604019757324,y:23.33583920970699},{x:149,y:140.1787037715095},{x:231,y:150.93672723035633},{x:63,y:346}],deviations:[{x:189,y:19},{x:162,y:103},{x:188,y:148},{x:165,y:274}]},{bitmapId:324,corners:[{x:31,y:45},{x:159.32098046561032,y:12},{x:114.15733441017464,y:137.38577813672487},{x:175,y:141.21661191804188},{x:18,y:337}],deviations:[{x:46,y:44},{x:119,y:99},{x:175,y:139},{x:135,y:251}]},{bitmapId:325,corners:[{x:18,y:31},{x:66,y:14.181493120428478},{x:39,y:121.95440747212686},{x:82,y:125.52216724216521},{x:13,y:271}],deviations:[{x:37,y:29},{x:65,y:38},{x:39,y:123},{x:44,y:224}]},{bitmapId:326,corners:[{x:11,y:43},{x:108.49353805031492,y:21.506461949685082},{x:63.1718343652262,y:107.8281656347738},{x:104,y:269.88147368075914},{x:42,y:234}],deviations:[{x:55,y:30},{x:93,y:47},{x:114,y:192},{x:99,y:270}],contains:[146,214]},{bitmapId:327,corners:[{x:6,y:35},{x:100,y:18.33733389953487},{x:68,y:75.2062396583169},{x:102.06582222259826,y:178},{x:55,y:150}],deviations:[{x:62,y:18},{x:93,y:35},{x:104,y:125},{x:95,y:176}]},{bitmapId:328,corners:[{x:9,y:40},{x:106.31523164893949,y:16},{x:74.1614027630305,y:90.75789585545425},{x:105.5348138135144,y:156.2325930932428},{x:50,y:157}],deviations:[{x:24,y:40},{x:80,y:62},{x:87,y:100},{x:104,y:157}]},{bitmapId:329,corners:[{x:18,y:23},{x:125.63988821594548,y:13.680055892027267},{x:25.116021484580564,y:150},{x:205.54374702134467,y:131.684379467983},{x:133.36089576207075,y:366},{x:93,y:318}],deviations:[{x:31,y:24},{x:129,y:13},{x:142,y:127},{x:174,y:286},{x:129,y:366}]},{bitmapId:330,corners:[{x:20,y:24},{x:90,y:12.101674096837607},{x:27.51392417534025,y:91.48607582465975},{x:173,y:104.75014235084787},{x:120.1834537394768,y:212.90827313026162},{x:104,y:186}],deviations:[{x:90,y:8},{x:70,y:45},{x:44,y:98},{x:141,y:183},{x:119,y:214}]},{bitmapId:331,corners:[{x:12,y:45},{x:162.48488616021604,y:15.147175382795423},{x:124,y:129.47415180146828},{x:188,y:134.17669906137718},{x:131.42678197186228,y:307.5732180281377},{x:98,y:284}],deviations:[{x:128,y:20},{x:165,y:22},{x:188,y:130},{x:180,y:213},{x:114,y:300}]},{bitmapId:332,corners:[{x:18,y:44},{x:147.04227690288621,y:8},{x:116.44174246176992,y:74},{x:188,y:77.85015386202394},{x:131.1183137276768,y:183.9408431361616},{x:112,y:156}],deviations:[{x:57,y:39},{x:114,y:72},{x:184,y:74},{x:141,y:171},{x:131,y:186}]},{bitmapId:333,corners:[{x:8,y:38},{x:128.5332913697257,y:16},{x:128.27557952153808,y:188},{x:232.344415258474,y:187},{x:206.5369566295252,y:367},{x:173,y:328}],deviations:[{x:61,y:24},{x:125,y:127},{x:222,y:188},{x:220,y:323},{x:190,y:353}]},{bitmapId:334,corners:[{x:30,y:46},{x:191,y:24.991886928590233},{x:112,y:111.07572210208522},{x:91.65120236383285,y:384.3487976361671},{x:51,y:338}],deviations:[{x:78,y:31},{x:172,y:49},{x:116,y:277},{x:82,y:379}]},{bitmapId:335,corners:[{x:23,y:37},{x:132.5965826528119,y:19.8068346943762},{x:84.46735610115604,y:87},{x:75.35999117760555,y:306},{x:33,y:274}],deviations:[{x:49,y:36},{x:121,y:40},{x:100,y:239},{x:56,y:289}],contains:[143,211]},{bitmapId:336,corners:[{x:16,y:34},{x:110.56703897833037,y:12.432961021669623},{x:75,y:65.00563242140743},{x:65,y:194.61180581000195},{x:14,y:178}],deviations:[{x:40,y:32},{x:105,y:30},{x:81,y:152},{x:55,y:196}],contains:[143,211]},{bitmapId:337,corners:[{x:14,y:38},{x:112,y:20.203640274878836},{x:88,y:89.87449747262646},{x:92.03536735228975,y:184.96463264771026},{x:41.30003087383408,y:201},{x:314,y:244}],deviations:[{x:72,y:31},{x:111,y:33},{x:106,y:132},{x:84,y:190},{x:159,y:207}],contains:[294,232]},{bitmapId:338,corners:[{x:11,y:30},{x:89.92810752319701,y:18},{x:69,y:62.28518564475437},{x:78.03750718006671,y:143.4437392298999},{x:30.49640112458686,y:154},{x:219,y:191}],deviations:[{x:71,y:23},{x:72,y:41},{x:84,y:100},{x:63,y:152},{x:93,y:157}]},{bitmapId:339,corners:[{x:85,y:71},{x:298.756092167179,y:21.48781566564195},{x:11.28829077982476,y:212.71170922017524},{x:343,y:266}],deviations:[{x:125,y:66},{x:242,y:71},{x:135,y:202}]},{bitmapId:340,corners:[{x:24,y:69},{x:186.34472117017128,y:33.37888468068518},{x:87.10325871483612,y:219.8967412851639},{x:75,y:227}],deviations:[{x:163,y:33},{x:164,y:132},{x:78,y:226}],contains:[46,87]},{bitmapId:341,corners:[{x:272,y:21},{x:104.43286602424911,y:86.92785566262515},{x:15,y:341}],deviations:[{x:232,y:44},{x:69,y:270}]},{bitmapId:342,corners:[{x:165,y:22},{x:78.32825258873731,y:82.67174741126269},{x:11,y:357}],deviations:[{x:148,y:42},{x:52,y:272}]},{bitmapId:343,corners:[{x:143,y:27},{x:36,y:117.71289362745304},{x:26,y:302.33051829431906},{x:85,y:255}],deviations:[{x:55,y:99},{x:27,y:231},{x:50,y:288}]},{bitmapId:344,corners:[{x:103,y:19},{x:28,y:88.70840613304804},{x:24.187104810769682,y:220},{x:98,y:175}],deviations:[{x:80,y:45},{x:24,y:95},{x:73,y:197}]},{bitmapId:345,corners:[{x:106,y:22},{x:23.22055529734347,y:74.77944470265653},{x:22,y:150.34653101776735},{x:100,y:115}],deviations:[{x:83,y:39},{x:24,y:131},{x:55,y:133}]},{bitmapId:346,corners:[{x:142,y:25},{x:28.64222653997493,y:205},{x:164.9977699305232,y:203.0022300694768},{x:219.58815353923154,y:135.23553938230535},{x:33.34955925632072,y:342.3008814873586},{x:259,y:323}],deviations:[{x:102,y:99},{x:156,y:207},{x:200,y:163},{x:97,y:256},{x:157,y:342}]},{bitmapId:347,corners:[{x:101,y:22},{x:30.419166677945313,y:90},{x:116.62364999113859,y:93.37635000886141},{x:174.6326272073994,y:52.1836863963003},{x:36.018497531494035,y:158.990751234253},{x:183,y:132}],deviations:[{x:42,y:74},{x:105,y:96},{x:161,y:64},{x:98,y:102},{x:109,y:139}],contains:[201,196]},{bitmapId:348,corners:[{x:85,y:20},{x:16.030618479058667,y:145.908144562824},{x:98,y:134.27368011418955},{x:139,y:81.05525128861761},{x:26.420866604410172,y:231.57913339558982},{x:115,y:202}],deviations:[{x:61,y:76},{x:71,y:136},{x:121,y:113},{x:99,y:147},{x:90,y:207}]},{bitmapId:349,corners:[{x:94,y:26},{x:24.193040590659496,y:156.42087822802154},{x:102.38610811934824,y:153.30694594032587},{x:142,y:94.59090592218703},{x:46.08755963847365,y:229},{x:136,y:204}],deviations:[{x:94,y:33},{x:46,y:158},{x:111,y:150},{x:121,y:133},{x:70,y:225}]},{bitmapId:350,corners:[{x:56,y:13},{x:14.403408086166953,y:86},{x:67.0970735066301,y:83.9029264933699},{x:109,y:40.040601547931686},{x:19.848375567106135,y:147},{x:86,y:132}],deviations:[{x:24,y:64},{x:36,y:85},{x:83,y:71},{x:71,y:91},{x:29,y:147}],contains:[192,198]},{bitmapId:351,corners:[{x:63,y:16},{x:19,y:120.48783445170388},{x:70.03890404238871,y:114},{x:105,y:77.86895250284937},{x:19.151769116554036,y:208},{x:105,y:179}],deviations:[{x:49,y:60},{x:48,y:114},{x:90,y:97},{x:93,y:102},{x:25,y:209}]},{bitmapId:352,corners:[{x:18,y:15},{x:22,y:171}],deviations:[{x:22,y:31}]},{bitmapId:353,corners:[{x:8,y:7},{x:19,y:122}],deviations:[{x:16,y:44}]},{bitmapId:354,corners:[{x:18,y:20},{x:109,y:20.212612203576313},{x:70.455420985004,y:167.455420985004},{x:50,y:141}],deviations:[{x:109,y:20},{x:81,y:139},{x:59,y:151}]},{bitmapId:355,corners:[{x:14,y:50},{x:237.6427632497172,y:21},{x:212.00076543405942,y:187.99923456594058},{x:37,y:224}],deviations:[{x:113,y:34},{x:240,y:53},{x:115,y:212}],contains:[377,378]},{bitmapId:356,corners:[{x:9,y:37},{x:89.80876218099775,y:18},{x:85.10842957527841,y:102.89157042472159},{x:30,y:126}],deviations:[{x:35,y:33},{x:92,y:68},{x:41,y:122}],contains:[111,370]},{bitmapId:357,corners:[{x:24,y:42},{x:209,y:14.115591451029973},{x:158,y:132}],deviations:[{x:47,y:42},{x:192,y:60}]},{bitmapId:358,corners:[{x:148,y:21},{x:215.38092016828432,y:23.61907983171568},{x:22,y:218}],deviations:[{x:191,y:21},{x:162,y:135}]},{bitmapId:359,corners:[{x:12,y:32},{x:59.583461315760296,y:13},{x:22,y:128}],deviations:[{x:47,y:17},{x:46,y:50}]},{bitmapId:360,corners:[{x:40,y:10},{x:74.90108701072153,y:11.901087010721527},{x:9,y:153}],deviations:[{x:65,y:10},{x:52,y:98}]},{bitmapId:361,corners:[{x:13,y:47},{x:125.40256526922118,y:24.40256526922119},{x:121,y:152.6018262739719},{x:209,y:139}],deviations:[{x:45,y:39},{x:121,y:71},{x:169,y:141}]},{bitmapId:362,corners:[{x:28,y:23},{x:17,y:208}],deviations:[{x:31,y:94}]},{bitmapId:363,corners:[{x:15,y:41},{x:265.2165007577314,y:10.78349924226859},{x:208,y:215.8309625507448},{x:166,y:190}],deviations:[{x:193,y:11},{x:257,y:83},{x:206,y:217}]},{bitmapId:364,corners:[{x:19,y:15},{x:15,y:187}],deviations:[{x:19,y:112}]},{bitmapId:365,corners:[{x:7,y:29},{x:114,y:22.670168916139325},{x:79.9555717587139,y:169.9555717587139},{x:53,y:143}],deviations:[{x:95,y:21},{x:105,y:89},{x:59,y:146}],contains:[117,370]},{bitmapId:366,corners:[{x:23,y:15},{x:19,y:108}],deviations:[{x:21,y:28}]},{bitmapId:367,corners:[{x:12,y:32},{x:176,y:15.806362447998719},{x:144.50322974568255,y:139.50322974568255},{x:108,y:122}],deviations:[{x:147,y:15},{x:170,y:74},{x:130,y:130}]},{bitmapId:368,corners:[{x:11,y:31},{x:180,y:18.982455378686645},{x:174,y:59.31075390601886},{x:28,y:96}],deviations:[{x:64,y:31},{x:179,y:35},{x:46,y:95}],contains:[119,1]},{bitmapId:369,corners:[{x:14,y:34},{x:154,y:19.28887037693616},{x:139.01124955283785,y:103},{x:38,y:124}],deviations:[{x:116,y:18},{x:145,y:65},{x:124,y:103}],contains:[117,370]},{bitmapId:370,corners:[{x:14,y:31},{x:119,y:13}],deviations:[{x:68,y:19}]},{bitmapId:371,corners:[{x:13,y:35},{x:154.05620392967344,y:16},{x:143.2578778628892,y:97.8710610685554},{x:19,y:129}],deviations:[{x:116,y:18},{x:150,y:69},{x:60,y:123}],contains:[117,370]},{bitmapId:372,corners:[{x:12,y:9},{x:57,y:61}],deviations:[{x:15,y:52}]},{bitmapId:373,corners:[{x:24,y:13},{x:14,y:80.74197953834812},{x:167.18757312877034,y:63},{x:154,y:118}],deviations:[{x:15,y:64},{x:97,y:63},{x:167,y:73}]},{bitmapId:374,corners:[{x:29,y:11},{x:32,y:144.71222092722414},{x:321,y:111}],deviations:[{x:34,y:51},{x:72,y:133}]},{bitmapId:375,corners:[{x:22,y:41},{x:126.64564157863207,y:17.645641578632066},{x:127.29730425719602,y:97},{x:166.50741243696137,y:101.74629378151931},{x:169,y:76}],deviations:[{x:68,y:28},{x:119,y:82},{x:135,y:102},{x:169,y:100}]},{bitmapId:376,corners:[{x:18,y:22},{x:28.340278189759562,y:161.34027818975957},{x:211,y:177}],deviations:[{x:20,y:142},{x:68,y:174}]},{bitmapId:377,corners:[{x:14,y:46},{x:240,y:24.735078749843204},{x:208,y:188}],deviations:[{x:192,y:25},{x:225,y:88}]},{bitmapId:378,corners:[{x:18,y:37},{x:191,y:13}],deviations:[{x:150,y:16}]},{bitmapId:379,corners:[{x:6,y:19},{x:61,y:12.562117732263495},{x:53,y:49.291810095175244},{x:19,y:60}],deviations:[{x:36,y:18},{x:61,y:18},{x:53,y:51}]},{bitmapId:380,corners:[{x:5,y:39},{x:222,y:13.96413803786999},{x:212,y:64.35768231791121},{x:28,y:101}],deviations:[{x:104,y:24},{x:215,y:40},{x:148,y:86}],contains:[381,1]},{bitmapId:381,corners:[{x:9,y:36},{x:227.75663985851367,y:13.48672028297267},{x:211,y:64}],deviations:[{x:176,y:13},{x:216,y:43}]},{bitmapId:382,corners:[{x:9,y:19},{x:131,y:26.800071699225004},{x:18,y:169}],deviations:[{x:45,y:26},{x:68,y:125}]},{bitmapId:383,corners:[{x:34,y:27},{x:304,y:26}],deviations:[{x:160,y:22}]},{bitmapId:384,corners:[{x:23,y:312},{x:255,y:27}],deviations:[{x:61,y:250}]},{bitmapId:385,corners:[{x:36,y:24},{x:171.3501888811492,y:252.13358517486557},{x:302,y:30}],deviations:[{x:108,y:172},{x:199,y:195}]},{bitmapId:386,corners:[{x:25,y:24},{x:289,y:289}],deviations:[{x:112,y:177}]},{bitmapId:387,corners:[{x:26,y:15},{x:56,y:55}],deviations:[{x:29,y:14}]}];return e}),define("collection/StudyParams",["Params","model/StudyParam","backbone"],function(e,t){var n=Backbone.Collection.extend({model:t,loadAll:function(t){var n=e;Skritter.study.params.add(n),t(null,n)}});return n}),define("collection/StudyReviews",["model/StudyReview","backbone"],function(e){var t=Backbone.Collection.extend({model:e,cache:function(e){if(this.length===0){e();return}Skritter.storage.setItems("reviews",this.toJSON(),function(){typeof e=="function"&&e()})},filterBy:function(e,n){var r=this.filter(function(t){if(t.get(e)===n)return!0});return new t(r)},getCount:function(e){return e?this.length:this.filterBy("bearTime",!0).length},getTime:function(){var e=0,t=this.filterBy("bearTime",!0);for(var n in t.models)e+=parseInt(t.models[n].get("reviewTime"),10);return e*1e3},loadAll:function(e){Skritter.storage.getItems("reviews",function(t){Skritter.study.reviews.add(t),e(null,t)})},save:function(e){if(this.length===0){e();return}var t=[],n=[];Skritter.api.postReviews(this.toJSON(),Skritter.settings.get("date"),function(r){if(r.responseText){e();return}for(var i in r)t.push(Skritter.study.reviews.findWhere({itemId:r[i].itemId,submitTime:r[i].submitTime})),n.push([r[i].itemId,r[i].submitTime]);Skritter.storage.removeItems("reviews",n,function(){Skritter.study.reviews.remove(t,{silent:!0}),e()})})}});return t}),define("model/StudySRSConfig",["backbone"],function(){var e=Backbone.Model.extend({});return e}),define("collection/StudySRSConfigs",["model/StudySRSConfig","backbone"],function(e){var t=Backbone.Collection.extend({model:e,cache:function(e){if(this.length===0){e();return}Skritter.storage.setItems("srsconfigs",this.toJSON(),function(){typeof e=="function"&&e()})},fetch:function(e){Skritter.api.getSRSConfigs(function(t){Skritter.study.srsconfigs.add(t),e(null,t)})},loadAll:function(e){Skritter.storage.getItems("srsconfigs",function(t){Skritter.study.srsconfigs.add(t),e(null,t)})}});return t}),define("model/StudySentence",["backbone"],function(){var e=Backbone.Model.extend({});return e}),define("collection/StudySentences",["model/StudySentence","backbone"],function(e){var t=Backbone.Collection.extend({model:e,cache:function(e){if(this.length===0){e();return}Skritter.storage.setItems("sentences",this.toJSON(),function(){typeof e=="function"&&e()})},loadAll:function(e){Skritter.storage.getItems("sentences",function(t){Skritter.study.sentences.add(t),e(null,t)})}});return t}),define("model/StudyStroke",["backbone"],function(){var e=Backbone.Model.extend({idAttribute:"rune"});return e}),define("collection/StudyStrokes",["model/StudyStroke","backbone"],function(e){var t=Backbone.Collection.extend({initialize:function(){this.loadTones()},model:e,cache:function(e){if(this.length===0){e();return}Skritter.storage.setItems("strokes",this.toJSON(),function(){typeof e=="function"&&e()})},loadAll:function(e){Skritter.storage.getItems("strokes",function(t){Skritter.study.strokes.add(t),e(null,t)})},loadTones:function(){this.add((new e).set({lang:"zh",rune:"tone1",strokes:[[383,.2,.2,.6,.1,0]]})),this.add((new e).set({lang:"zh",rune:"tone2",strokes:[[384,.25,.25,.5,.5,0]]})),this.add((new e).set({lang:"zh",rune:"tone3",strokes:[[385,.15,.2,.7,.6,0]]})),this.add((new e).set({lang:"zh",rune:"tone4",strokes:[[386,.25,.25,.5,.5,0]]})),this.add((new e).set({lang:"zh",rune:"tone5",strokes:[[387,.4,.4,.2,.2,0]]}))}});return t}),define("model/StudyVocab",["collection/CanvasCharacter","model/CanvasStroke","backbone"],function(e,t){var n=Backbone.Model.extend({initialize:function(){this.on("change",this.cache)},cache:function(e){Skritter.storage.setItem("vocabs",this.toJSON(),function(){typeof e=="function"&&e()})},getCanvasCharacters:function(n,r){r=r?r:"rune",n=n?n:0;var i=[],s=this.getCharacterAt(n),o=[];if(r==="rune")o=Skritter.study.strokes.findWhere({rune:s}).get("strokes");else{var u=this.getPinyinAt(n).tone.split(",");for(var a in u){var f="tone"+u[a].replace(" ","");o.push(Skritter.study.strokes.findWhere({rune:f}).get("strokes"))}}for(var l in o){var c=new e,h=o[l],p=1;for(var d in h){var v=new t,m=parseInt(h[d][0],10),g=Skritter.study.params.findWhere({bitmapId:m});v.set({bitmapId:m,data:h[d],id:p+"|"+m,part:r,position:p,rune:s,sprite:Skritter.assets.getStroke(m)}),g.has("contains")&&p++,p++,c.add(v)}i.push(c)}return i},getCharacterAt:function(e){return this.get("writing").split("")[e]},getCharacterCount:function(){return this.get("writing").split("").length},getCharacters:function(){return this.get("writing").split("")},getItems:function(){return Skritter.study.items.filterBy("id",this.get("id"),!0)},getPinyinAt:function(e){e=e?e:0;var t=_.clone(this.get("reading")),n=_.clone(t),r=_.clone(t);return this.getCharacterCount()===1?(n=n.replace(/[0-9]+/g,""),r=r.replace(/[a-z]+/g,""),{syllable:n,tone:r,reading:t}):(t=t.split(","),n=n.split(/\d+/g),r=_.without(r.split(/[a-z]+/g),""),{syllable:n[e],tone:r[e]})},getReadingDisplayAt:function(e){var t="";for(var n=0;n<this.getCharacterCount();n++)e>n?this.getPinyinAt(n).reading?t+="<div class='prompt-display'>"+this.getPinyinAt(n).reading+"</div>":t+="<div class='prompt-display'>"+this.getPinyinAt(n).syllable+this.getPinyinAt(n).tone+"</div>":t+="<div class='prompt-hidden'></div>";return t},getSentence:function(){var e=Skritter.study.sentences.findWhere({id:this.get("sentenceId")});return e?e:""},getWritingDisplayAt:function(e){var t="";for(var n=0;n<this.getCharacterCount();n++)e>n?t+="<div class='prompt-display'>"+this.getCharacterAt(n)+"</div>":t+="<div class='prompt-hidden'></div>";return t},hasCharacterAt:function(e){return e>=this.getCharacterCount()?!1:!0},isSingleCharacter:function(){return this.getCharacterCount()===1?!0:!1},play:function(){this.has("audio")&&Skritter.assets.getAudio(this.get("audio").replace("/sounds?file=",""))}});return n}),define("collection/StudyVocabs",["model/StudyVocab","backbone"],function(e){var t=Backbone.Collection.extend({model:e,cache:function(e){if(this.length===0){e();return}Skritter.storage.setItems("vocabs",this.toJSON(),function(){typeof e=="function"&&e()})},comparator:function(e){return e.get("reading")},loadAll:function(e){Skritter.storage.getItems("vocabs",function(t){Skritter.study.vocabs.add(t),e(null,t)})}});return t}),define("model/User",["collection/Log","collection/StudyDecomps","collection/StudyItems","collection/StudyParams","collection/StudyReviews","collection/StudySRSConfigs","collection/StudySentences","collection/StudyStrokes","collection/StudyVocabs","backbone"],function(e,t,n,r,i,s,o,u,a){var f=Backbone.Model.extend({initialize:function(){Skritter.log=new e,Skritter.study={decomps:new t,items:new n,params:new r,reviews:new i,srsconfigs:new s,sentences:new o,strokes:new u,vocabs:new a},localStorage.getItem("activeUser")&&this.set(JSON.parse(localStorage.getItem(localStorage.getItem("activeUser")))),this.on("change",this.cache)},defaults:{access_token:null,audio:!0,expires_in:null,isSyncing:!1,lastLogin:null,lastReviewFix:null,lastSync:null,refresh_token:null,settings:null,token_type:null,user_id:null},cache:function(){this.isLoggedIn()&&localStorage.setItem(this.get("user_id"),JSON.stringify(this))},cacheAllData:function(e){Skritter.async.parallel([function(e){Skritter.study.decomps.cache(function(){e()})},function(e){Skritter.study.items.cache(function(){e()})},function(e){Skritter.study.reviews.cache(function(){e()})},function(e){Skritter.study.srsconfigs.cache(function(){e()})},function(e){Skritter.study.sentences.cache(function(){e()})},function(e){Skritter.study.strokes.cache(function(){e()})},function(e){Skritter.study.vocabs.cache(function(){e()})}],function(){e()})},checkReviewErrors:function(e,t){Skritter.api.getReviewErrors(this.get("lastReviewFix"),_.bind(function(n){n.length>0?(console.log("Review Errors",n),t?this.fixReviewErrors(n,function(t){e(n,t)}):e(n)):e(n)},this))},fetch:function(e){this.isLoggedIn()&&Skritter.api.getUser(this.get("user_id"),_.bind(function(t){this.set("settings",t),e(t)},this))},fixReviewErrors:function(e,t){var n=[];for(var r in e)n.push(e[r].itemId);Skritter.facade.show("fixing "+e.length+" sync issues"),Skritter.api.getItems(_.uniq(n),_.bind(function(n){var r=Skritter.study.items.set(n,{add:!1,remove:!1});this.set("lastReviewFix",parseInt(e[e.length-1].created+1,10)),t(r),Skritter.facade.hide()},this))},getAnimationSpeed:function(){var e=this.getSetting("animationSpeed");return Math.ceil(Math.abs(1e3-e*1e3))},getAvatar:function(e){return e?"<img src='data:image/png;base64,"+this.get("settings").avatar+"' />":"<img src='data:image/png;base64,"+this.get("settings").avatar+"' width='50' height='50' />"},getOrderStrictness:function(){var e=Skritter.user.getSetting("orderWeight");return e===1?0:Math.abs(4-Math.ceil(e*5))},getSetting:function(e){return this.get("settings")[e]},getStudyParts:function(){return this.get("settings").targetLang==="zh"?this.get("settings").chineseStudyParts:this.get("settings").japaneseStudyParts},isLoggedIn:function(){return this.get("access_token")?!0:!1},loadAllData:function(e){Skritter.async.parallel([Skritter.async.apply(Skritter.study.decomps.loadAll),Skritter.async.apply(Skritter.study.items.loadAll),Skritter.async.apply(Skritter.study.params.loadAll),Skritter.async.apply(Skritter.study.reviews.loadAll),Skritter.async.apply(Skritter.study.srsconfigs.loadAll),Skritter.async.apply(Skritter.study.sentences.loadAll),Skritter.async.apply(Skritter.study.strokes.loadAll),Skritter.async.apply(Skritter.study.vocabs.loadAll)],function(){e()})},login:function(e,t,n){Skritter.api.authenticateUser(e,t,_.bind(function(e){e.statusCode===200?(localStorage.setItem("activeUser",e.user_id),Skritter.api.token=e.access_token,this.set(e),this.fetch(function(){Skritter.storage.openDatabase("skritdata-"+Skritter.user.get("user_id"),function(){n(e)})})):n(e)},this))},logout:function(){Skritter.facade.show("logging out"),Skritter.storage.deleteDatabase(function(){localStorage.removeItem("activeUser"),Skritter.application.reload(function(){Skritter.facade.hide(),document.location.hash=""})})},resetAllData:function(){Skritter.log.reset(),Skritter.study.decomps.reset(),Skritter.study.items.reset(),Skritter.study.reviews.reset(),Skritter.study.srsconfigs.reset(),Skritter.study.sentences.reset(),Skritter.study.strokes.reset(),Skritter.study.strokes.loadTones(),Skritter.study.vocabs.reset()},setSetting:function(e,t){var n=this.get("settings");return n[e]=t,this.set("settings",n),this.get("settings")},sync:function(e,t){if(this.get("isSyncing")&&!t){e();return}this.set("isSyncing",!0);var n=this,r,i,s=0,o=function(t){Skritter.async.waterfall([function(e){Skritter.study.srsconfigs.fetch(function(){e()})},function(e){Skritter.api.requestBatch(t,function(t){e(null,t)})},function(e,t){Skritter.api.getBatch(e.id,function(e){s+=e.responseSize,r&&Skritter.facade.show("initial download <br />"+Skritter.fn.bytesToSize(s)),Skritter.study.decomps.add(e.Decomps),Skritter.study.items.add(e.Items),Skritter.study.srsconfigs.add(e.SRSConfigs),Skritter.study.sentences.add(e.Sentences),Skritter.study.strokes.add(e.Strokes),Skritter.study.vocabs.add(e.Vocabs)},function(){t()})},function(e){Skritter.user.cacheAllData(function(){e()})}],function(){Skritter.user.set("lastSync",Skritter.fn.getUnixTime()),r&&(Skritter.facade.hide(),n.set("isSyncing",!1),n.set("lastReviewFix",Skritter.fn.getUnixTime()),typeof e=="function"&&e())})};this.get("lastSync")&&!t?(e(),i=[{path:"api/v0/items",method:"GET",cache:!1,params:{sort:"changed",offset:this.get("lastSync"),include_vocabs:"true",include_strokes:"true",include_sentences:"true",include_heisigs:"true",include_top_mnemonics:"true",include_decomps:"true"},spawner:!0}],o(i)):(Skritter.facade.show("initial download <br />"),this.resetAllData(),r=!0,i=[{path:"api/v0/items",method:"GET",cache:!1,params:{sort:"last",include_vocabs:"true",include_strokes:"true",include_sentences:"true",include_heisigs:"true",include_top_mnemonics:"true",include_decomps:"true"},spawner:!0}],Skritter.storage.clear(function(){o(i)}))},unsetSetting:function(e){var t=this.get("settings");return delete t[e],this.set("settings",t),t}});return f}),define("storage/Storage",[],function(){function e(){this.database=null,this.name=null,this.version=1,this.schema={1:{decomps:{keys:["writing"],fields:{atomic:"boolean",Children:"object"}},items:{keys:["id"],fields:{part:"string",vocabIds:"array",style:"string",timeStudied:"string",next:"number",last:"number",interval:"number",vocabListIds:"array",sectionIds:"array",review:"number",successes:"number",created:"number",changed:"number",previousSuccess:"boolean",previousInterval:"number"}},log:{keys:["id"],fields:{userId:"string",timestamp:"number",data:"object"}},reviews:{keys:["itemId"],fields:{score:"number",bearTime:"boolean",submitTime:"number",reviewTime:"number",thinkingTime:"number",currentInterval:"number",actualInterval:"number",newInterval:"number",wordGroup:"string",previousInterval:"number",previousSuccess:"boolean"}},sentences:{keys:["id"],fields:{containedVocabIds:"array",definitions:"object",lang:"string",reading:"string",starred:"boolean",style:"string",toughness:"number",toughnessString:"string",writing:"string"}},srsconfigs:{keys:["part","lang"],fields:{initialRightInterval:"number",initialWrongInterval:"number",rightFactors:"array",wrongFactors:"array"}},strokes:{keys:["rune"],fields:{lang:"string",strokes:"array"}},vocabs:{keys:["id"],fields:{writing:"string",reading:"string",definitions:"object",customDefinitions:"string",lang:"string",audio:"string",rareKanji:"boolean",toughness:"number",toughnessString:"string",mnemonic:"string",starred:"boolean",style:"string",changed:"number",bannedParts:"array",containedVocabIds:"array",heisigDefinitions:"string",sentenceId:"string",topMnemonic:"object"}}}},this.schemaIndexedDB={1:function(e){var t=e.createObjectStore("decomps",{keyPath:"writing"});t.createIndex("atomic","atomic"),t.createIndex("Children","Children");var n=e.createObjectStore("items",{keyPath:"id"});n.createIndex("part","part"),n.createIndex("vocabIds","vocabIds"),n.createIndex("style","style"),n.createIndex("timeStudied","timeStudied"),n.createIndex("next","next"),n.createIndex("last","last"),n.createIndex("interval","interval"),n.createIndex("vocabListIds","vocabListIds"),n.createIndex("sectionIds","sectionIds"),n.createIndex("reviews","reviews"),n.createIndex("successes","successes"),n.createIndex("created","created"),n.createIndex("changed","changed"),n.createIndex("previousSuccess","previousSuccess"),n.createIndex("previousInterval","previousInterval");var r=e.createObjectStore("log",{keyPath:"id",autoIncrement:!0});r.createIndex("userId","userId"),r.createIndex("timestamp","timestamp"),r.createIndex("data","data");var i=e.createObjectStore("reviews",{keyPath:["itemId","submitTime"]});i.createIndex("score","score"),i.createIndex("bearTime","bearTime"),i.createIndex("reviewTime","reviewTime"),i.createIndex("thinkingTime","thinkingTime"),i.createIndex("currentInterval","currentInterval"),i.createIndex("actualInterval","actualInterval"),i.createIndex("newInterval","newInterval"),i.createIndex("wordGroup","wordGroup"),i.createIndex("previousInterval","previousInterval"),i.createIndex("previousSuccess","previousSuccess");var s=e.createObjectStore("sentences",{keyPath:"id"});s.createIndex("containedVocabIds","containedVocabIds"),s.createIndex("definitions","definitions"),s.createIndex("lang","lang"),s.createIndex("reading","reading"),s.createIndex("starred","starred"),s.createIndex("style","style"),s.createIndex("toughness","toughness"),s.createIndex("toughnessString","toughnessString"),s.createIndex("writing","writing");var o=e.createObjectStore("strokes",{keyPath:"rune"});o.createIndex("lang","lang"),o.createIndex("strokes","strokes");var u=e.createObjectStore("srsconfigs",{keyPath:["part","lang"]});u.createIndex("initialRightInterval","initialRightInterval"),u.createIndex("initialWrongInterval","initialWrongInterval"),u.createIndex("rightFactors","rightFactors"),u.createIndex("wrongFactors","wrongFactors");var a=e.createObjectStore("vocabs",{keyPath:"id"});a.createIndex("writing","writing"),a.createIndex("reading","reading"),a.createIndex("definitions","definitions"),a.createIndex("customDefinitions","customDefinitions"),a.createIndex("lang","lang"),a.createIndex("audio","audio"),a.createIndex("rareKanji","rareKanji"),a.createIndex("toughness","toughness"),a.createIndex("toughnessString","toughnessString"),a.createIndex("mnemonic","mnemonic"),a.createIndex("starred","starred"),a.createIndex("style","style"),a.createIndex("changed","changed"),a.createIndex("bannedParts","bannedParts"),a.createIndex("containedVocabIds","containedVocabIds"),a.createIndex("heisigDefinition","heisigDefinition"),a.createIndex("sentenceId","sentenceId"),a.createIndex("topMnemonic","topMnemonic")}}}return e.prototype.getTable=function(e){return this.schema[this.version][e]},e.prototype.getTableFieldNames=function(e,t){var n=[],r=this.schema[this.version][e];t||(n=n.concat(r.keys));var i=r.fields;for(var s in i)n.push(s);return n},e.prototype.getTableKeys=function(e){return this.schema[this.version][e].keys},e.prototype.getTableNames=function(){var e=[];for(var t in this.schema[this.version])e.push(t);return e},e}),function(e,t){function o(e){var t=null;switch(e){case 0:case 1:case"readwrite":case"readonly":t=e;break;default:t=s.READ_WRITE||"readwrite"}return t}var n=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,r=window.IDBKeyRange||window.webkitIDBKeyRange,i=window.IDBCursor||window.webkitIDBCursor||{};i.PREV=i.PREV||"prev",i.NEXT=i.NEXT||"next";var s=window.IDBTransaction||window.webkitIDBTransaction;e.extend({indexedDB:function(t,i){if(i){typeof i=="number"&&(i={version:i});var s=i.version;if(i.schema&&!s){var u=-1;for(var a in i.schema)u=u>a?u:a;s=i.version||u}}var f={request:function(t,n){return e.Deferred(function(e){try{var r=typeof t=="function"?t(n):t;r.onsuccess=function(t){e.resolveWith(r,[r.result,t])},r.onerror=function(t){e.rejectWith(r,[r.error,t])},typeof r.onblocked!="undefined"&&r.onblocked===null&&(r.onblocked=function(t){var n;try{n=r.result}catch(t){n=null}e.notifyWith(r,[n,t])}),typeof r.onupgradeneeded!="undefined"&&r.onupgradeneeded===null&&(r.onupgradeneeded=function(t){e.notifyWith(r,[r.result,t])})}catch(i){i.name="exception",e.rejectWith(r,["exception",i])}})},transaction:function(e){return{objectStore:function(t){try{return f.objectStore(e.objectStore(t))}catch(n){return e.readyState!==e.DONE&&e.abort(),f.objectStore(null)}},createObjectStore:function(t,n){try{return f.objectStore(e.db.createObjectStore(t,n))}catch(r){e.readyState!==e.DONE&&e.abort()}},deleteObjectStore:function(t){try{e.db.deleteObjectStore(t)}catch(n){e.readyState!==e.DONE&&e.abort()}},abort:function(){e.abort()}}},objectStore:function(e){var t={},n=["add","put","get","delete","clear","count"];for(var r=0;r<n.length;r++)t[n[r]]=function(t){return function(){return f.request(function(n){return e[t].apply(e,n)},arguments)}}(n[r]);return t.each=function(t,n,r){return f.cursor(function(){return r?e.openCursor(f.range(n),r):e.openCursor(f.range(n))},t)},t.index=function(t){return f.index(function(){return e.index(t)})},t.createIndex=function(t,n,r){return arguments.length===2&&typeof n=="string"&&(r=arguments[1],n=null),r||(r=t),f.index(function(){return e.createIndex(r,t,n)})},t.deleteIndex=function(t){return e.deleteIndex(t)},t},range:function(t){return e.isArray(t)?t.length===1?r.only(t[0]):r.bound(t[0],t[1],typeof t[2]=="undefined"?!1:t[2],typeof t[3]=="undefined"?!1:t[3]):typeof t=="undefined"?null:t},cursor:function(t,n){return e.Deferred(function(e){try{var r=typeof t=="function"?t():t;r.onsuccess=function(t){if(!r.result){e.resolveWith(r,[null,t]);return}var i={"delete":function(){return f.request(function(){return r.result["delete"]()})},update:function(e){return f.request(function(){return r.result.update(e)})},next:function(e){this.data=e},key:r.result.key,value:r.result.value};e.notifyWith(r,[i,t]);var s=n.apply(r,[i]);try{s===!1?e.resolveWith(r,[null,t]):typeof s=="number"?r.result.advance.apply(r.result,[s]):i.data?r.result["continue"].apply(r.result,[i.data]):r.result["continue"]()}catch(t){e.rejectWith(r,[r.result,t])}},r.onerror=function(t){e.rejectWith(r,[r.result,t])}}catch(i){i.type="exception",e.rejectWith(r,[null,i])}})},index:function(e){try{var t=typeof e=="function"?e():e}catch(n){t=null}return{each:function(e,n,r){return f.cursor(function(){return r?t.openCursor(f.range(n),r):t.openCursor(f.range(n))},e)},eachKey:function(e,n,r){return f.cursor(function(){return r?t.openKeyCursor(f.range(n),r):t.openKeyCursor(f.range(n))},e)},get:function(e){return typeof t.get=="function"?f.request(t.get(e)):t.openCursor(f.range(e))},count:function(){if(typeof t.count=="function")return f.request(t.count());throw"Count not implemented for cursors"},getKey:function(e){return typeof t.getKey=="function"?f.request(t.getKey(e)):t.openKeyCursor(f.range(e))}}}},l=f.request(function(){return s?n.open(t,parseInt(s)):n.open(t)});return l.then(function(e,t){e.onversionchange=function(){(!i||!i.onversionchange||i.onversionchange()===!1)&&e.close()}},function(e,t){},function(e,t){if(t&&t.type==="upgradeneeded"){if(i&&i.schema)for(var n=t.oldVersion+1;n<=t.newVersion;n++)typeof i.schema[n]=="function"&&i.schema[n].call(this,f.transaction(this.transaction));i&&typeof i.upgrade=="function"&&i.upgrade.call(this,f.transaction(this.transaction))}}),e.extend(l,{cmp:function(e,t){return n.cmp(e,t)},deleteDatabase:function(){return e.Deferred(function(e){l.then(function(r,i){r.close(),f.request(function(){return n.deleteDatabase(t)}).then(function(t,n){e.resolveWith(this,[t,n])},function(t,n){e.rejectWith(this,[t,n])},function(t,n){e.notifyWith(this,[t,n])})},function(t,n){e.rejectWith(this,[t,n])},function(t,n){e.notifyWith(this,[t,n])})})},transaction:function(t,n){return!e.isArray(t)&&(t=[t]),n=o(n),e.Deferred(function(e){l.then(function(r,i){var s;try{s=r.transaction(t,n),s.onabort=s.onerror=function(t){e.rejectWith(s,[t])},s.oncomplete=function(t){e.resolveWith(s,[t])}}catch(i){i.type="exception",e.rejectWith(this,[i]);return}try{e.notifyWith(s,[f.transaction(s)])}catch(i){i.type="exception",e.rejectWith(this,[i])}},function(t,n){e.rejectWith(this,[n,t])},function(e,t){})})},objectStore:function(r,s){function c(a){return e.Deferred(function(e){function c(t,n){try{n(t.objectStore(r)).then(function(t,n){e.resolveWith(this,[t,n])},function(t,n){e.rejectWith(this,[t,n])})}catch(i){i.name="exception",e.rejectWith(t,[i,i])}}u.transaction(r,o(s)).then(function(){},function(h,p){if(h.code!==h.NOT_FOUND_ERR||s!==!0&&typeof s!="object")e.rejectWith(this,[h,p]);else{var d=this.result;d.close(),l=f.request(function(){return n.open(t,(parseInt(d.version,10)||1)+1)}),l.then(function(t,n){t.onversionchange=function(){(!i||!i.onversionchange||i.onversionchange()===!1)&&t.close()},u.transaction(r,o(s)).then(function(){},function(t,n){e.rejectWith(this,[t,n])},function(e,t){c(e,a)})},function(t,n){e.rejectWith(this,[t,n])},function(t,n){if(n.type==="upgradeneeded")try{t.createObjectStore(r,s===!0?{autoIncrement:!0}:s)}catch(i){e.rejectWith(this,[i,n])}})}},function(e){c(e,a)})})}function h(e,t){return c(function(n){return n[e].apply(n,t)})}function p(e,t,n){return c(function(r){var i=r.index(t);return i[e].apply(i[e],n)})}var u=this,a={},d=["add","delete","get","put","clear","count","each"];for(var v=0;v<d.length;v++)a[d[v]]=function(e){return function(){return h(e,arguments)}}(d[v]);return a.index=function(e){return{each:function(t,n,r){return p("each",e,[t,n,r])},eachKey:function(t,n,r){return p("eachKey",e,[t,n,r])},get:function(t){return p("get",e,[t])},count:function(){return p("count",e,[])},getKey:function(t){return p("getKey",e,[t])}}},a}})}}),e.indexedDB.IDBCursor=i,e.indexedDB.IDBTransaction=s,e.idb=e.indexedDB}(jQuery),define("jquery.indexeddb",["jquery"],function(){});var idbModules={};(function(e){function t(e,t,n,r){n.target=t,"function"==typeof t[e]&&t[e].apply(t,[n]),"function"==typeof r&&r()}function n(t,n,r){var i=new DOMException.constructor(0,n);throw i.name=t,i.message=n,e.DEBUG&&(console.log(t,n,r,i),console.trace&&console.trace()),i}var r=function(){this.length=0,this._items=[],Object.defineProperty&&Object.defineProperty(this,"_items",{enumerable:!1})};if(r.prototype={contains:function(e){return-1!==this._items.indexOf(e)},item:function(e){return this._items[e]},indexOf:function(e){return this._items.indexOf(e)},push:function(e){this._items.push(e),this.length+=1;for(var t=0;this._items.length>t;t++)this[t]=this._items[t]},splice:function(){this._items.splice.apply(this._items,arguments),this.length=this._items.length;for(var e in this)e===parseInt(e,10)+""&&delete this[e];for(e=0;this._items.length>e;e++)this[e]=this._items[e]}},Object.defineProperty)for(var i in{indexOf:!1,push:!1,splice:!1})Object.defineProperty(r.prototype,i,{enumerable:!1});e.util={throwDOMException:n,callback:t,quote:function(e){return"'"+e+"'"},StringList:r}})(idbModules),function(idbModules){var Sca=function(){return{decycle:function(object,callback){function checkForCompletion(){0===queuedObjects.length&&returnCallback(derezObj)}function readBlobAsDataURL(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result,r="blob";updateEncodedBlob(n,t,r)},n.readAsDataURL(e)}function updateEncodedBlob(dataURL,path,blobtype){var encoded=queuedObjects.indexOf(path);path=path.replace("$","derezObj"),eval(path+'.$enc="'+dataURL+'"'),eval(path+'.$type="'+blobtype+'"'),queuedObjects.splice(encoded,1),checkForCompletion()}function derez(e,t){var n,r,i;if("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof Blob||e instanceof String)return e instanceof Blob?(queuedObjects.push(t),readBlobAsDataURL(e,t)):e instanceof Boolean?e={$type:"bool",$enc:""+e}:e instanceof Date?e={$type:"date",$enc:e.getTime()}:e instanceof Number?e={$type:"num",$enc:""+e}:e instanceof RegExp&&(e={$type:"regex",$enc:""+e}),e;for(n=0;objects.length>n;n+=1)if(objects[n]===e)return{$ref:paths[n]};if(objects.push(e),paths.push(t),"[object Array]"===Object.prototype.toString.apply(e))for(i=[],n=0;e.length>n;n+=1)i[n]=derez(e[n],t+"["+n+"]");else{i={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=derez(e[r],t+"["+JSON.stringify(r)+"]"))}return i}var objects=[],paths=[],queuedObjects=[],returnCallback=callback,derezObj=derez(object,"$");checkForCompletion()},retrocycle:function retrocycle($){function dataURLToBlob(e){var t,n,r,i=";base64,";if(-1===e.indexOf(i))return n=e.split(","),t=n[0].split(":")[1],r=n[1],new Blob([r],{type:t});n=e.split(i),t=n[0].split(":")[1],r=window.atob(n[1]);for(var s=r.length,o=new Uint8Array(s),u=0;s>u;++u)o[u]=r.charCodeAt(u);return new Blob([o.buffer],{type:t})}function rez(value){var i,item,name,path;if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;value.length>i;i+=1)item=value[i],item&&"object"==typeof item&&(path=item.$ref,value[i]="string"==typeof path&&px.test(path)?eval(path):rez(item));else if(void 0!==value.$type)switch(value.$type){case"blob":case"file":value=dataURLToBlob(value.$enc);break;case"bool":value=Boolean("true"===value.$enc);break;case"date":value=new Date(value.$enc);break;case"num":value=Number(value.$enc);break;case"regex":value=eval(value.$enc)}else for(name in value)"object"==typeof value[name]&&(item=value[name],item&&(path=item.$ref,value[name]="string"==typeof path&&px.test(path)?eval(path):rez(item)));return value}var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return rez($),$},encode:function(e,t){function n(e){t(JSON.stringify(e))}this.decycle(e,n)},decode:function(e){return this.retrocycle(JSON.parse(e))}}}();idbModules.Sca=Sca}(idbModules),function(e){var t=["","number","string","boolean","object","undefined"],n=function(){return{encode:function(e){return t.indexOf(typeof e)+"-"+JSON.stringify(e)},decode:function(e){return e===void 0?void 0:JSON.parse(e.substring(2))}}},r={number:n("number"),"boolean":n(),object:n(),string:{encode:function(e){return t.indexOf("string")+"-"+e},decode:function(e){return""+e.substring(2)}},"undefined":{encode:function(){return t.indexOf("undefined")+"-undefined"},decode:function(){return void 0}}},i=function(){return{encode:function(e){return r[typeof e].encode(e)},decode:function(e){return r[t[e.substring(0,1)]].decode(e)}}}();e.Key=i}(idbModules),function(e){var t=function(e,t){return{type:e,debug:t,bubbles:!1,cancelable:!1,eventPhase:0,timeStamp:new Date}};e.Event=t}(idbModules),function(e){var t=function(){this.onsuccess=this.onerror=this.result=this.error=this.source=this.transaction=null,this.readyState="pending"},n=function(){this.onblocked=this.onupgradeneeded=null};n.prototype=t,e.IDBRequest=t,e.IDBOpenRequest=n}(idbModules),function(e,t){var n=function(e,t,n,r){this.lower=e,this.upper=t,this.lowerOpen=n,this.upperOpen=r};n.only=function(e){return new n(e,e,!0,!0)},n.lowerBound=function(e,r){return new n(e,t,r,t)},n.upperBound=function(e){return new n(t,e,t,open)},n.bound=function(e,t,r,i){return new n(e,t,r,i)},e.IDBKeyRange=n}(idbModules),function(e,t){function n(n,r,i,s,o,u){this.__range=n,this.source=this.__idbObjectStore=i,this.__req=s,this.key=t,this.direction=r,this.__keyColumnName=o,this.__valueColumnName=u,this.source.transaction.__active||e.util.throwDOMException("TransactionInactiveError - The transaction this IDBObjectStore belongs to is not active."),this.__offset=-1,this.__lastKeyContinued=t,this["continue"]()}n.prototype.__find=function(n,r,i,s){var o=this,u=["SELECT * FROM ",e.util.quote(o.__idbObjectStore.name)],a=[];u.push("WHERE ",o.__keyColumnName," NOT NULL"),o.__range&&(o.__range.lower||o.__range.upper)&&(u.push("AND"),o.__range.lower&&(u.push(o.__keyColumnName+(o.__range.lowerOpen?" >":" >= ")+" ?"),a.push(e.Key.encode(o.__range.lower))),o.__range.lower&&o.__range.upper&&u.push("AND"),o.__range.upper&&(u.push(o.__keyColumnName+(o.__range.upperOpen?" < ":" <= ")+" ?"),a.push(e.Key.encode(o.__range.upper)))),n!==t&&(o.__lastKeyContinued=n,o.__offset=0),o.__lastKeyContinued!==t&&(u.push("AND "+o.__keyColumnName+" >= ?"),a.push(e.Key.encode(o.__lastKeyContinued))),u.push("ORDER BY ",o.__keyColumnName),u.push("LIMIT 1 OFFSET "+o.__offset),e.DEBUG&&console.log(u.join(" "),a),r.executeSql(u.join(" "),a,function(n,r){if(1===r.rows.length){var s=e.Key.decode(r.rows.item(0)[o.__keyColumnName]),u="value"===o.__valueColumnName?e.Sca.decode(r.rows.item(0)[o.__valueColumnName]):e.Key.decode(r.rows.item(0)[o.__valueColumnName]);i(s,u)}else e.DEBUG&&console.log("Reached end of cursors"),i(t,t)},function(t,n){e.DEBUG&&console.log("Could not execute Cursor.continue"),s(n)})},n.prototype["continue"]=function(e){var n=this;this.__idbObjectStore.transaction.__addToTransactionQueue(function(r,i,s,o){n.__offset++,n.__find(e,r,function(e,r){n.key=e,n.value=r,s(n.key!==t?n:t,n.__req)},function(e){o(e)})})},n.prototype.advance=function(n){0>=n&&e.util.throwDOMException("Type Error - Count is invalid - 0 or negative",n);var r=this;this.__idbObjectStore.transaction.__addToTransactionQueue(function(e,i,s,u){r.__offset+=n,r.__find(t,e,function(e,n){r.key=e,r.value=n,s(r.key!==t?r:t,r.__req)},function(e){u(e)})})},n.prototype.update=function(n){var r=this,i=this.__idbObjectStore.transaction.__createRequest(function(){});return e.Sca.encode(n,function(n){this.__idbObjectStore.__pushToQueue(i,function(i,s,u,a){r.__find(t,i,function(t){var s="UPDATE "+e.util.quote(r.__idbObjectStore.name)+" SET value = ? WHERE key = ?";e.DEBUG&&console.log(s,n,t),i.executeSql(s,[e.Sca.encode(n),e.Key.encode(t)],function(e,n){1===n.rowsAffected?u(t):a("No rowns with key found"+t)},function(e,t){a(t)})},function(e){a(e)})})}),i},n.prototype["delete"]=function(){var n=this;return this.__idbObjectStore.transaction.__addToTransactionQueue(function(r,i,s,o){n.__find(t,r,function(i){var u="DELETE FROM  "+e.util.quote(n.__idbObjectStore.name)+" WHERE key = ?";e.DEBUG&&console.log(u,i),r.executeSql(u,[e.Key.encode(i)],function(e,n){1===n.rowsAffected?s(t):o("No rowns with key found"+i)},function(e,t){o(t)})},function(e){o(e)})})},e.IDBCursor=n}(idbModules),function(idbModules,undefined){function IDBIndex(e,t){this.indexName=this.name=e,this.__idbObjectStore=this.objectStore=this.source=t;var n=t.__storeProps&&t.__storeProps.indexList;n&&(n=JSON.parse(n)),this.keyPath=n&&n[e]&&n[e].keyPath||e,["multiEntry","unique"].forEach(function(t){this[t]=!!(n&&n[e]&&n[e].optionalParams&&n[e].optionalParams[t])},this)}IDBIndex.prototype.__createIndex=function(indexName,keyPath,optionalParameters){var me=this,transaction=me.__idbObjectStore.transaction;transaction.__addToTransactionQueue(function(tx,args,success,failure){me.__idbObjectStore.__getStoreProps(tx,function(){function error(){idbModules.util.throwDOMException(0,"Could not create new index",arguments)}2!==transaction.mode&&idbModules.util.throwDOMException(0,"Invalid State error, not a version transaction",me.transaction);var idxList=JSON.parse(me.__idbObjectStore.__storeProps.indexList);idxList[indexName]!==undefined&&idbModules.util.throwDOMException(0,"Index already exists on store",idxList);var columnName=indexName;idxList[indexName]={columnName:columnName,keyPath:keyPath,optionalParams:optionalParameters},me.__idbObjectStore.__storeProps.indexList=JSON.stringify(idxList);var sql=["ALTER TABLE",idbModules.util.quote(me.__idbObjectStore.name),"ADD",columnName,"BLOB"].join(" ");idbModules.DEBUG&&console.log(sql),tx.executeSql(sql,[],function(tx,data){tx.executeSql("SELECT * FROM "+idbModules.util.quote(me.__idbObjectStore.name),[],function(tx,data){(function initIndexForRow(i){if(data.rows.length>i)try{var value=idbModules.Sca.decode(data.rows.item(i).value),indexKey=eval("value['"+keyPath+"']");tx.executeSql("UPDATE "+idbModules.util.quote(me.__idbObjectStore.name)+" set "+columnName+" = ? where key = ?",[idbModules.Key.encode(indexKey),data.rows.item(i).key],function(){initIndexForRow(i+1)},error)}catch(e){initIndexForRow(i+1)}else idbModules.DEBUG&&console.log("Updating the indexes in table",me.__idbObjectStore.__storeProps),tx.executeSql("UPDATE __sys__ set indexList = ? where name = ?",[me.__idbObjectStore.__storeProps.indexList,me.__idbObjectStore.name],function(){me.__idbObjectStore.__setReadyState("createIndex",!0),success(me)},error)})(0)},error)},error)},"createObjectStore")})},IDBIndex.prototype.openCursor=function(e,t){var n=new idbModules.IDBRequest;return new idbModules.IDBCursor(e,t,this.source,n,this.indexName,"value"),n},IDBIndex.prototype.openKeyCursor=function(e,t){var n=new idbModules.IDBRequest;return new idbModules.IDBCursor(e,t,this.source,n,this.indexName,"key"),n},IDBIndex.prototype.__fetchIndexData=function(e,t){var n=this;return n.__idbObjectStore.transaction.__addToTransactionQueue(function(r,i,s,o){var u=["SELECT * FROM ",idbModules.util.quote(n.__idbObjectStore.name)," WHERE",n.indexName,"NOT NULL"],a=[];e!==undefined&&(u.push("AND",n.indexName," = ?"),a.push(idbModules.Key.encode(e))),idbModules.DEBUG&&console.log("Trying to fetch data for Index",u.join(" "),a),r.executeSql(u.join(" "),a,function(e,n){var r;r="count"==typeof t?n.rows.length:0===n.rows.length?undefined:"key"===t?idbModules.Key.decode(n.rows.item(0).key):idbModules.Sca.decode(n.rows.item(0).value),s(r)},o)})},IDBIndex.prototype.get=function(e){return this.__fetchIndexData(e,"value")},IDBIndex.prototype.getKey=function(e){return this.__fetchIndexData(e,"key")},IDBIndex.prototype.count=function(e){return this.__fetchIndexData(e,"count")},idbModules.IDBIndex=IDBIndex}(idbModules),function(idbModules){var IDBObjectStore=function(e,t,n){this.name=e,this.transaction=t,this.__ready={},this.__setReadyState("createObjectStore",n===void 0?!0:n),this.indexNames=new idbModules.util.StringList};IDBObjectStore.prototype.__setReadyState=function(e,t){this.__ready[e]=t},IDBObjectStore.prototype.__waitForReady=function(e,t){var n=!0;if(t!==void 0)n=this.__ready[t]===void 0?!0:this.__ready[t];else for(var r in this.__ready)this.__ready[r]||(n=!1);if(n)e();else{idbModules.DEBUG&&console.log("Waiting for to be ready",t);var i=this;window.setTimeout(function(){i.__waitForReady(e,t)},100)}},IDBObjectStore.prototype.__getStoreProps=function(e,t,n){var r=this;this.__waitForReady(function(){r.__storeProps?(idbModules.DEBUG&&console.log("Store properties - cached",r.__storeProps),t(r.__storeProps)):e.executeSql("SELECT * FROM __sys__ where name = ?",[r.name],function(e,n){1!==n.rows.length?t():(r.__storeProps={name:n.rows.item(0).name,indexList:n.rows.item(0).indexList,autoInc:n.rows.item(0).autoInc,keyPath:n.rows.item(0).keyPath},idbModules.DEBUG&&console.log("Store properties",r.__storeProps),t(r.__storeProps))},function(){t()})},n)},IDBObjectStore.prototype.__deriveKey=function(tx,value,key,callback){function getNextAutoIncKey(){tx.executeSql("SELECT * FROM sqlite_sequence where name like ?",[me.name],function(e,t){1!==t.rows.length?callback(0):callback(t.rows.item(0).seq)},function(e,t){idbModules.util.throwDOMException(0,"Data Error - Could not get the auto increment value for key",t)})}var me=this;me.__getStoreProps(tx,function(props){if(props||idbModules.util.throwDOMException(0,"Data Error - Could not locate defination for this table",props),props.keyPath)if(key!==void 0&&idbModules.util.throwDOMException(0,"Data Error - The object store uses in-line keys and the key parameter was provided",props),value)try{var primaryKey=eval("value['"+props.keyPath+"']");primaryKey?callback(primaryKey):"true"===props.autoInc?getNextAutoIncKey():idbModules.util.throwDOMException(0,"Data Error - Could not eval key from keyPath")}catch(e){idbModules.util.throwDOMException(0,"Data Error - Could not eval key from keyPath",e)}else idbModules.util.throwDOMException(0,"Data Error - KeyPath was specified, but value was not");else key!==void 0?callback(key):"false"===props.autoInc?idbModules.util.throwDOMException(0,"Data Error - The object store uses out-of-line keys and has no key generator and the key parameter was not provided. ",props):getNextAutoIncKey()})},IDBObjectStore.prototype.__insertData=function(tx,value,primaryKey,success,error){var paramMap={};primaryKey!==void 0&&(paramMap.key=idbModules.Key.encode(primaryKey));var indexes=JSON.parse(this.__storeProps.indexList);for(var key in indexes)try{paramMap[indexes[key].columnName]=idbModules.Key.encode(eval("value['"+indexes[key].keyPath+"']"))}catch(e){error(e)}var sqlStart=["INSERT INTO ",idbModules.util.quote(this.name),"("],sqlEnd=[" VALUES ("],sqlValues=[];for(key in paramMap)sqlStart.push(key+","),sqlEnd.push("?,"),sqlValues.push(paramMap[key]);sqlStart.push("value )"),sqlEnd.push("?)"),sqlValues.push(value);var sql=sqlStart.join(" ")+sqlEnd.join(" ");idbModules.DEBUG&&console.log("SQL for adding",sql,sqlValues),tx.executeSql(sql,sqlValues,function(){success(primaryKey)},function(e,t){error(t)})},IDBObjectStore.prototype.add=function(e,t){var n=this,r=n.transaction.__createRequest(function(){});return idbModules.Sca.encode(e,function(i){n.transaction.__pushToQueue(r,function(r,s,o,u){n.__deriveKey(r,e,t,function(e){n.__insertData(r,i,e,o,u)})})}),r},IDBObjectStore.prototype.put=function(e,t){var n=this,r=n.transaction.__createRequest(function(){});return idbModules.Sca.encode(e,function(i){n.transaction.__pushToQueue(r,function(r,s,o,u){n.__deriveKey(r,e,t,function(e){var t="DELETE FROM "+idbModules.util.quote(n.name)+" where key = ?";r.executeSql(t,[idbModules.Key.encode(e)],function(t,r){idbModules.DEBUG&&console.log("Did the row with the",e,"exist? ",r.rowsAffected),n.__insertData(t,i,e,o,u)},function(e,t){u(t)})})})}),r},IDBObjectStore.prototype.get=function(e){var t=this;return t.transaction.__addToTransactionQueue(function(n,r,i,s){t.__waitForReady(function(){var r=idbModules.Key.encode(e);idbModules.DEBUG&&console.log("Fetching",t.name,r),n.executeSql("SELECT * FROM "+idbModules.util.quote(t.name)+" where key = ?",[r],function(e,t){idbModules.DEBUG&&console.log("Fetched data",t);try{if(0===t.rows.length)return i();i(idbModules.Sca.decode(t.rows.item(0).value))}catch(n){idbModules.DEBUG&&console.log(n),i(void 0)}},function(e,t){s(t)})})})},IDBObjectStore.prototype["delete"]=function(e){var t=this;return t.transaction.__addToTransactionQueue(function(n,r,i,s){t.__waitForReady(function(){var r=idbModules.Key.encode(e);idbModules.DEBUG&&console.log("Fetching",t.name,r),n.executeSql("DELETE FROM "+idbModules.util.quote(t.name)+" where key = ?",[r],function(e,t){idbModules.DEBUG&&console.log("Deleted from database",t.rowsAffected),i()},function(e,t){s(t)})})})},IDBObjectStore.prototype.clear=function(){var e=this;return e.transaction.__addToTransactionQueue(function(t,n,r,i){e.__waitForReady(function(){t.executeSql("DELETE FROM "+idbModules.util.quote(e.name),[],function(e,t){idbModules.DEBUG&&console.log("Cleared all records from database",t.rowsAffected),r()},function(e,t){i(t)})})})},IDBObjectStore.prototype.count=function(e){var t=this;return t.transaction.__addToTransactionQueue(function(n,r,i,s){t.__waitForReady(function(){var r="SELECT * FROM "+idbModules.util.quote(t.name)+(e!==void 0?" WHERE key = ?":""),o=[];e!==void 0&&o.push(idbModules.Key.encode(e)),n.executeSql(r,o,function(e,t){i(t.rows.length)},function(e,t){s(t)})})})},IDBObjectStore.prototype.openCursor=function(e,t){var n=new idbModules.IDBRequest;return new idbModules.IDBCursor(e,t,this,n,"key","value"),n},IDBObjectStore.prototype.index=function(e){var t=new idbModules.IDBIndex(e,this);return t},IDBObjectStore.prototype.createIndex=function(e,t,n){var r=this;n=n||{},r.__setReadyState("createIndex",!1);var i=new idbModules.IDBIndex(e,r);return r.__waitForReady(function(){i.__createIndex(e,t,n)},"createObjectStore"),r.indexNames.push(e),i},IDBObjectStore.prototype.deleteIndex=function(e){var t=new idbModules.IDBIndex(e,this,!1);return t.__deleteIndex(e),t},idbModules.IDBObjectStore=IDBObjectStore}(idbModules),function(e){var t=0,n=1,r=2,i=function(r,i,s){if("number"==typeof i)this.mode=i,2!==i&&e.DEBUG&&console.log("Mode should be a string, but was specified as ",i);else if("string"==typeof i)switch(i){case"readwrite":this.mode=n;break;case"readonly":this.mode=t;break;default:this.mode=t}this.storeNames="string"==typeof r?[r]:r;for(var o=0;this.storeNames.length>o;o++)s.objectStoreNames.contains(this.storeNames[o])||e.util.throwDOMException(0,"The operation failed because the requested database object could not be found. For example, an object store did not exist but was being opened.",this.storeNames[o]);this.__active=!0,this.__running=!1,this.__requests=[],this.__aborted=!1,this.db=s,this.error=null,this.onabort=this.onerror=this.oncomplete=null};i.prototype.__executeRequests=function(){if(this.__running&&this.mode!==r)return e.DEBUG&&console.log("Looks like the request set is already running",this.mode),void 0;this.__running=!0;var t=this;window.setTimeout(function(){2===t.mode||t.__active||e.util.throwDOMException(0,"A request was placed against a transaction which is currently not active, or which is finished",t.__active),t.db.__db.transaction(function(n){function r(t,n){n&&(o.req=n),o.req.readyState="done",o.req.result=t,delete o.req.error;var r=e.Event("success");e.util.callback("onsuccess",o.req,r),u++,s()}function i(){o.req.readyState="done",o.req.error="DOMError";var t=e.Event("error",arguments);e.util.callback("onerror",o.req,t),u++,s()}function s(){return u>=t.__requests.length?(t.__active=!1,t.__requests=[],void 0):(o=t.__requests[u],o.op(n,o.args,r,i),void 0)}t.__tx=n;var o=null,u=0;try{s()}catch(a){e.DEBUG&&console.log("An exception occured in transaction",arguments),"function"==typeof t.onerror&&t.onerror()}},function(){e.DEBUG&&console.log("An error in transaction",arguments),"function"==typeof t.onerror&&t.onerror()},function(){e.DEBUG&&console.log("Transaction completed",arguments),"function"==typeof t.oncomplete&&t.oncomplete()})},1)},i.prototype.__addToTransactionQueue=function(t,n){this.__active||this.mode===r||e.util.throwDOMException(0,"A request was placed against a transaction which is currently not active, or which is finished.",this.__mode);var i=this.__createRequest();return this.__pushToQueue(i,t,n),i},i.prototype.__createRequest=function(){var t=new e.IDBRequest;return t.source=this.db,t},i.prototype.__pushToQueue=function(e,t,n){this.__requests.push({op:t,args:n,req:e}),this.__executeRequests()},i.prototype.objectStore=function(t){return new e.IDBObjectStore(t,this)},i.prototype.abort=function(){!this.__active&&e.util.throwDOMException(0,"A request was placed against a transaction which is currently not active, or which is finished",this.__active)},i.prototype.READ_ONLY=0,i.prototype.READ_WRITE=1,i.prototype.VERSION_CHANGE=2,e.IDBTransaction=i}(idbModules),function(e){var t=function(t,n,r,i){this.__db=t,this.version=r,this.__storeProperties=i,this.objectStoreNames=new e.util.StringList;for(var s=0;i.rows.length>s;s++)this.objectStoreNames.push(i.rows.item(s).name);this.name=n,this.onabort=this.onerror=this.onversionchange=null};t.prototype.createObjectStore=function(t,n){var r=this;n=n||{},n.keyPath=n.keyPath||null;var i=new e.IDBObjectStore(t,r.__versionTransaction,!1),s=r.__versionTransaction;return s.__addToTransactionQueue(function(s,u,a){function f(){e.util.throwDOMException(0,"Could not create new object store",arguments)}r.__versionTransaction||e.util.throwDOMException(0,"Invalid State error",r.transaction);var l=["CREATE TABLE",e.util.quote(t),"(key BLOB",n.autoIncrement?", inc INTEGER PRIMARY KEY AUTOINCREMENT":"PRIMARY KEY",", value BLOB)"].join(" ");e.DEBUG&&console.log(l),s.executeSql(l,[],function(e){e.executeSql("INSERT INTO __sys__ VALUES (?,?,?,?)",[t,n.keyPath,n.autoIncrement?!0:!1,"{}"],function(){i.__setReadyState("createObjectStore",!0),a(i)},f)},f)}),r.objectStoreNames.push(t),i},t.prototype.deleteObjectStore=function(t){var n=function(){e.util.throwDOMException(0,"Could not delete ObjectStore",arguments)},r=this;!r.objectStoreNames.contains(t)&&n("Object Store does not exist"),r.objectStoreNames.splice(r.objectStoreNames.indexOf(t),1);var i=r.__versionTransaction;i.__addToTransactionQueue(function(){r.__versionTransaction||e.util.throwDOMException(0,"Invalid State error",r.transaction),r.__db.transaction(function(r){r.executeSql("SELECT * FROM __sys__ where name = ?",[t],function(r,i){i.rows.length>0&&r.executeSql("DROP TABLE "+e.util.quote(t),[],function(){r.executeSql("DELETE FROM __sys__ WHERE name = ?",[t],function(){},n)},n)})})})},t.prototype.close=function(){},t.prototype.transaction=function(t,n){var r=new e.IDBTransaction(t,n||1,this);return r},e.IDBDatabase=t}(idbModules),function(e){var t=4194304;if(window.openDatabase){var n=window.openDatabase("__sysdb__",1,"System Database",t);n.transaction(function(t){t.executeSql("SELECT * FROM dbVersions",[],function(){},function(){n.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS dbVersions (name VARCHAR(255), version INT);",[],function(){},function(){e.util.throwDOMException("Could not create table __sysdb__ to save DB versions")})})})},function(){e.DEBUG&&console.log("Error in sysdb transaction - when selecting from dbVersions",arguments)});var r={open:function(r,i){function s(){if(!a){var t=e.Event("error",arguments);u.readyState="done",u.error="DOMError",e.util.callback("onerror",u,t),a=!0}}function o(o){var a=window.openDatabase(r,1,r,t);u.readyState="done",i===void 0&&(i=o||1),(0>=i||o>i)&&e.util.throwDOMException(0,"An attempt was made to open a database using a lower version than the existing version.",i),a.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS __sys__ (name VARCHAR(255), keyPath VARCHAR(255), autoInc BOOLEAN, indexList BLOB)",[],function(){t.executeSql("SELECT * FROM __sys__",[],function(t,f){var l=e.Event("success");u.source=u.result=new e.IDBDatabase(a,r,i,f),i>o?n.transaction(function(t){t.executeSql("UPDATE dbVersions set version = ? where name = ?",[i,r],function(){var t=e.Event("upgradeneeded");t.oldVersion=o,t.newVersion=i,u.transaction=u.result.__versionTransaction=new e.IDBTransaction([],2,u.source),e.util.callback("onupgradeneeded",u,t,function(){var t=e.Event("success");e.util.callback("onsuccess",u,t)})},s)},s):e.util.callback("onsuccess",u,l)},s)},s)},s)}var u=new e.IDBOpenRequest,a=!1;return n.transaction(function(e){e.executeSql("SELECT * FROM dbVersions where name = ?",[r],function(e,t){0===t.rows.length?e.executeSql("INSERT INTO dbVersions VALUES (?,?)",[r,i||1],function(){o(0)},s):o(t.rows.item(0).version)},s)},s),u},deleteDatabase:function(r){function i(t){if(!u){o.readyState="done",o.error="DOMError";var n=e.Event("error");n.message=t,n.debug=arguments,e.util.callback("onerror",o,n),u=!0}}function s(){n.transaction(function(t){t.executeSql("DELETE FROM dbVersions where name = ? ",[r],function(){o.result=void 0;var t=e.Event("success");t.newVersion=null,t.oldVersion=a,e.util.callback("onsuccess",o,t)},i)},i)}var o=new e.IDBOpenRequest,u=!1,a=null;return n.transaction(function(n){n.executeSql("SELECT * FROM dbVersions where name = ?",[r],function(n,u){if(0===u.rows.length){o.result=void 0;var f=e.Event("success");return f.newVersion=null,f.oldVersion=a,e.util.callback("onsuccess",o,f),void 0}a=u.rows.item(0).version;var l=window.openDatabase(r,1,r,t);l.transaction(function(t){t.executeSql("SELECT * FROM __sys__",[],function(t,n){var r=n.rows;(function o(n){n>=r.length?t.executeSql("DROP TABLE __sys__",[],function(){s()},i):t.executeSql("DROP TABLE "+e.util.quote(r.item(n).name),[],function(){o(n+1)},function(){o(n+1)})})(0)},function(){s()})},i)})},i),o},cmp:function(t,n){return e.Key.encode(t)>e.Key.encode(n)?1:t===n?0:-1}};e.shimIndexedDB=r}}(idbModules),function(e,t){e.openDatabase!==void 0&&(e.shimIndexedDB=t.shimIndexedDB,e.shimIndexedDB&&(e.shimIndexedDB.__useShim=function(){e.indexedDB=t.shimIndexedDB,e.IDBDatabase=t.IDBDatabase,e.IDBTransaction=t.IDBTransaction,e.IDBCursor=t.IDBCursor,e.IDBKeyRange=t.IDBKeyRange},e.shimIndexedDB.__debug=function(e){t.DEBUG=e})),e.indexedDB=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.oIndexedDB||e.msIndexedDB,e.indexedDB===void 0&&e.openDatabase!==void 0?e.shimIndexedDB.__useShim():(e.IDBDatabase=e.IDBDatabase||e.webkitIDBDatabase,e.IDBTransaction=e.IDBTransaction||e.webkitIDBTransaction,e.IDBCursor=e.IDBCursor||e.webkitIDBCursor,e.IDBKeyRange=e.IDBKeyRange||e.webkitIDBKeyRange,e.IDBTransaction||(e.IDBTransaction={}),e.IDBTransaction.READ_ONLY=e.IDBTransaction.READ_ONLY||"readonly",e.IDBTransaction.READ_WRITE=e.IDBTransaction.READ_WRITE||"readwrite")}(window,idbModules),define("indexeddb.shim",function(){}),define("storage/IndexedDBAdapter",["storage/Storage","jquery.indexeddb","indexeddb.shim"],function(e){function t(){}return t.prototype=new e,t.constructor=t,t.prototype.clear=function(e,t){if(t){var n=$.indexedDB(this.name).objectStore(t).each(function(e){return e.delete(),!0});n.fail(function(e){console.error(e)}),n.done(function(){e()})}else{var r=0,i=this.getTableNames();for(var s in i)$.indexedDB(this.name).objectStore(i[s]).each(function(e){return e.delete(),!0}).then(function(){r++,r>=i.length&&e()},function(e){console.error(e)})}},t.prototype.deleteDatabase=function(e,t){var n;t?n=$.indexedDB(t).deleteDatabase():n=$.indexedDB(this.name).deleteDatabase(),n.fail(function(e){console.error(e)}),n.done(function(){typeof e=="function"&&e()})},t.prototype.getItem=function(e,t,n){var r=$.indexedDB(this.name).objectStore(e).get(t);r.fail(function(e){console.error(e)}),r.done(function(e){n(e)})},t.prototype.getItems=function(e,t,n){var r=[],i=$.indexedDB(this.name).objectStore(e).each(function(e){(!n||_.contains(n,e.key))&&r.push(e.value)});i.fail(function(e){console.error(e)}),i.done(function(){t(r)})},t.prototype.openDatabase=function(e,t){var n=this,r=$.indexedDB(e,{version:this.version,upgrade:function(e){},schema:this.schemaIndexedDB});r.fail(function(r){console.error(r),n.deleteDatabase(function(){n.openDatabase(e,function(){t()})},e)}),r.done(function(e){n.database=e,n.name=e.name,typeof t=="function"&&t(e)})},t.prototype.removeItem=function(e,t,n){var r=$.indexedDB(this.name).objectStore(e,!0).delete(t);r.fail(function(e){console.error(t,e)}),r.done(function(e){n(e)})},t.prototype.removeItems=function(e,t,n){var r=[],i=0;for(var s in t){var o=t[s];this.removeItem(e,o,function(e){i++,r.push(e),i>=t.length&&n(r)})}},t.prototype.setItem=function(e,t,n){var r=$.indexedDB(this.name).objectStore(e,!0).put(t);r.fail(function(e){console.error(e)}),r.done(function(e){n(e)})},t.prototype.setItems=function(e,t,n){var r=[],i=0;for(var s in t){var o=t[s];this.setItem(e,o,function(e){i++,r.push(e),i===t.length&&n(r)})}},t}),function(){function r(e){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,e.apply(t,arguments)}}var e={},t,n;t=this,t!=null&&(n=t.async),e.noConflict=function(){return t.async=n,e};var i=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},s=function(e,t){if(e.map)return e.map(t);var n=[];return i(e,function(e,r,i){n.push(t(e,r,i))}),n},o=function(e,t,n){return e.reduce?e.reduce(t,n):(i(e,function(e,r,i){n=t(n,e,r,i)}),n)},u=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};typeof process=="undefined"||!process.nextTick?typeof setImmediate=="function"?(e.nextTick=function(e){setImmediate(e)},e.setImmediate=e.nextTick):(e.nextTick=function(e){setTimeout(e,0)},e.setImmediate=e.nextTick):(e.nextTick=process.nextTick,typeof setImmediate!="undefined"?e.setImmediate=setImmediate:e.setImmediate=e.nextTick),e.each=function(e,t,n){n=n||function(){};if(!e.length)return n();var s=0;i(e,function(i){t(i,r(function(t){t?(n(t),n=function(){}):(s+=1,s>=e.length&&n(null))}))})},e.forEach=e.each,e.eachSeries=function(e,t,n){n=n||function(){};if(!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r>=e.length?n(null):i())})};i()},e.forEachSeries=e.eachSeries,e.eachLimit=function(e,t,n,r){var i=a(t);i.apply(null,[e,n,r])},e.forEachLimit=e.eachLimit;var a=function(e){return function(t,n,r){r=r||function(){};if(!t.length||e<=0)return r();var i=0,s=0,o=0;(function u(){if(i>=t.length)return r();while(o<e&&s<t.length)s+=1,o+=1,n(t[s-1],function(e){e?(r(e),r=function(){}):(i+=1,o-=1,i>=t.length?r():u())})})()}},f=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.each].concat(n))}},l=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[a(e)].concat(n))}},c=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.eachSeries].concat(n))}},h=function(e,t,n,r){var i=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})};e.map=f(h),e.mapSeries=c(h),e.mapLimit=function(e,t,n,r){return p(t)(e,n,r)};var p=function(e){return l(e,h)};e.reduce=function(t,n,r,i){e.eachSeries(t,function(e,t){r(n,e,function(e,r){n=r,t(e)})},function(e){i(e,n)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(t,n,r,i){var o=s(t,function(e){return e}).reverse();e.reduce(o,n,r,i)},e.foldr=e.reduceRight;var d=function(e,t,n,r){var i=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){r(s(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.filter=f(d),e.filterSeries=c(d),e.select=e.filter,e.selectSeries=e.filterSeries;var v=function(e,t,n,r){var i=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){r(s(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.reject=f(v),e.rejectSeries=c(v);var m=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(e){r()})};e.detect=f(m),e.detectSeries=c(m),e.some=function(t,n,r){e.each(t,function(e,t){n(e,function(e){e&&(r(!0),r=function(){}),t()})},function(e){r(!1)})},e.any=e.some,e.every=function(t,n,r){e.each(t,function(e,t){n(e,function(e){e||(r(!1),r=function(){}),t()})},function(e){r(!0)})},e.all=e.every,e.sortBy=function(t,n,r){e.map(t,function(e,t){n(e,function(n,r){n?t(n):t(null,{value:e,criteria:r})})},function(e,t){if(e)return r(e);var n=function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0};r(null,s(t.sort(n),function(e){return e.value}))})},e.auto=function(t,n){n=n||function(){};var r=u(t);if(!r.length)return n(null);var s={},a=[],f=function(e){a.unshift(e)},l=function(e){for(var t=0;t<a.length;t+=1)if(a[t]===e){a.splice(t,1);return}},c=function(){i(a.slice(0),function(e){e()})};f(function(){u(s).length===r.length&&(n(null,s),n=function(){})}),i(r,function(r){var a=t[r]instanceof Function?[t[r]]:t[r],h=function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]);if(t){var a={};i(u(s),function(e){a[e]=s[e]}),a[r]=o,n(t,a),n=function(){}}else s[r]=o,e.setImmediate(c)},p=a.slice(0,Math.abs(a.length-1))||[],d=function(){return o(p,function(e,t){return e&&s.hasOwnProperty(t)},!0)&&!s.hasOwnProperty(r)};if(d())a[a.length-1](h,s);else{var v=function(){d()&&(l(v),a[a.length-1](h,s))};f(v)}})},e.waterfall=function(t,n){n=n||function(){};if(t.constructor!==Array){var r=new Error("First argument to waterfall must be an array of functions");return n(r)}if(!t.length)return n();var i=function(t){return function(r){if(r)n.apply(null,arguments),n=function(){};else{var s=Array.prototype.slice.call(arguments,1),o=t.next();o?s.push(i(o)):s.push(n),e.setImmediate(function(){t.apply(null,s)})}}};i(e.iterator(t))()};var g=function(e,t,n){n=n||function(){};if(t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(u(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}};e.parallel=function(t,n){g({map:e.map,each:e.each},t,n)},e.parallelLimit=function(e,t,n){g({map:p(t),each:a(t)},e,n)},e.series=function(t,n){n=n||function(){};if(t.constructor===Array)e.mapSeries(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.eachSeries(u(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}},e.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},e.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var y=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};e.concat=f(y),e.concatSeries=c(y),e.whilst=function(t,n,r){t()?n(function(i){if(i)return r(i);e.whilst(t,n,r)}):r()},e.doWhilst=function(t,n,r){t(function(i){if(i)return r(i);n()?e.doWhilst(t,n,r):r()})},e.until=function(t,n,r){t()?r():n(function(i){if(i)return r(i);e.until(t,n,r)})},e.doUntil=function(t,n,r){t(function(i){if(i)return r(i);n()?r():e.doUntil(t,n,r)})},e.queue=function(t,n){function s(t,r,s,o){r.constructor!==Array&&(r=[r]),i(r,function(r){var i={data:r,callback:typeof o=="function"?o:null};s?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===n&&t.saturated(),e.setImmediate(t.process)})}n===undefined&&(n=1);var o=0,u={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(e,t){s(u,e,!1,t)},unshift:function(e,t){s(u,e,!0,t)},process:function(){if(o<u.concurrency&&u.tasks.length){var e=u.tasks.shift();u.empty&&u.tasks.length===0&&u.empty(),o+=1;var n=function(){o-=1,e.callback&&e.callback.apply(e,arguments),u.drain&&u.tasks.length+o===0&&u.drain(),u.process()},i=r(n);t(e.data,i)}},length:function(){return u.tasks.length},running:function(){return o}};return u},e.cargo=function(t,n){var r=!1,o=[],u={tasks:o,payload:n,saturated:null,empty:null,drain:null,push:function(t,r){t.constructor!==Array&&(t=[t]),i(t,function(e){o.push({data:e,callback:typeof r=="function"?r:null}),u.saturated&&o.length===n&&u.saturated()}),e.setImmediate(u.process)},process:function a(){if(r)return;if(o.length===0){u.drain&&u.drain();return}var e=typeof n=="number"?o.splice(0,n):o.splice(0),f=s(e,function(e){return e.data});u.empty&&u.empty(),r=!0,t(f,function(){r=!1;var t=arguments;i(e,function(e){e.callback&&e.callback.apply(null,t)}),a()})},length:function(){return o.length},running:function(){return r}};return u};var b=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);typeof console!="undefined"&&(t?console.error&&console.error(t):console[e]&&i(n,function(t){console[e](t)}))}]))}};e.log=b("log"),e.dir=b("dir"),e.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),s=i.pop(),o=t.apply(null,i);o in n?s.apply(null,n[o]):o in r?r[o].push(s):(r[o]=[s],e.apply(null,i.concat([function(){n[o]=arguments;var e=r[o];delete r[o];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=e,i},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},e.times=function(t,n,r){var i=[];for(var s=0;s<t;s++)i.push(s);return e.map(i,n,r)},e.timesSeries=function(t,n,r){var i=[];for(var s=0;s<t;s++)i.push(s);return e.mapSeries(i,n,r)},e.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();e.reduce(t,r,function(e,t,r){t.apply(n,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,t){i.apply(n,[e].concat(t))})}};var w=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};e.applyEach=f(w),e.applyEachSeries=c(w),e.forever=function(e,t){function n(r){if(r){if(t)return t(r);throw r}e(n)}n()},typeof define!="undefined"&&define.amd?define("async",[],function(){return e}):typeof module!="undefined"&&module.exports?module.exports=e:t.async=e}();if(!jQuery)throw new Error("Bootstrap requires jQuery");+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]}}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t()})}(window.jQuery),+function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){s.trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i);t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one(e.support.transition.end,n).emulateTransitionEnd(150):n())};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),"string"==typeof t&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(window.jQuery),+function(e){var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r)};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.is("input")?"val":"html",i=n.data();e+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var t=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===t.prop("type")&&e.find(".active").removeClass("active")}this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof n&&n;i||r.data("bs.button",i=new t(this,s)),"toggle"==n?i.toggle():n&&i.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(window.jQuery),+function(e){var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,r=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid",function(){n.to(t)}):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o="next"==t?"left":"right",u="next"==t?"first":"last",f=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[u]()}this.sliding=!0,s&&this.pause();var l=e.Event("slide.bs.carousel",{relatedTarget:i[0],direction:o});if(!i.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(f.$indicators.children()[f.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(l),l.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),r.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(l),l.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n),o="string"==typeof n?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),"number"==typeof n?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,r=e(this),i=e(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),r.data()),o=r.attr("data-slide-to");o&&(s.interval=!1),i.carousel(s),(o=r.attr("data-slide-to"))&&i.data("bs.carousel").to(o),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(window.jQuery),+function(e){var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;n.collapse("hide"),r||n.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",i].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[i](this.$element[0][o])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?(this.$element[n](0).one(e.support.transition.end,e.proxy(r,this)).emulateTransitionEnd(350),void 0):r.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);i||r.data("bs.collapse",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,r=e(this),i=r.attr("data-target")||t.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(i),o=s.data("bs.collapse"),u=o?"toggle":r.data(),f=r.attr("data-parent"),l=f&&e(f);o&&o.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+f+'"]').not(r).addClass("collapsed"),r[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(u)})}(window.jQuery),+function(e){function t(){e(r).remove(),e(i).each(function(t){var r=n(e(this));r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown")),t.isDefaultPrevented()||r.removeClass("open").trigger("hidden.bs.dropdown"))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}var r=".dropdown-backdrop",i="[data-toggle=dropdown]",s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){if("ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t),s.trigger(r=e.Event("show.bs.dropdown")),r.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown"),i.focus()}return!1}},s.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var s=n(r),o=s.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&s.find(i).focus(),r.click();var u=e("[role=menu] li:not(.divider):visible a",s);if(u.length){var f=u.index(u.filter(":focus"));38==t.keyCode&&f>0&&f--,40==t.keyCode&&f<u.length-1&&f++,~f||(f=0),u.eq(f).focus()}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new s(this)),"string"==typeof t&&r[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",i,s.prototype.toggle).on("keydown.bs.dropdown.data-api",i+", [role=menu]",s.prototype.keydown)}(window.jQuery),+function(e){var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(i)}).emulateTransitionEnd(300):n.$element.focus().trigger(i)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);s||i.data("bs.modal",s=new t(this,o)),"string"==typeof n?s[n](r):o.show&&s.show(r)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(window.jQuery),+function(e){var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r);for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focus",f="hover"==o?"mouseleave":"blur";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,s=i.test(r);s&&(r=r.replace(i,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var o=this.getPosition(),u=n[0].offsetWidth,f=n[0].offsetHeight;if(s){var l=this.$element.parent(),c=r,h=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:l.outerWidth(),d="body"==this.options.container?window.innerHeight:l.outerHeight(),v="body"==this.options.container?0:l.offset().left;r="bottom"==r&&o.top+o.height+f-h>d?"top":"top"==r&&o.top-h-f<0?"bottom":"right"==r&&o.right+u>p?"left":"left"==r&&o.left-u<v?"right":r,n.removeClass(c).addClass(r)}var m=this.getCalculatedOffset(r,o,u,f);this.applyPlacement(m,r),this.$element.trigger("shown.bs."+this.type)}},t.prototype.applyPlacement=function(e,t){var n,r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),e.top=e.top+o,e.left=e.left+u,r.offset(e).addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;if("top"==t&&f!=s&&(n=!0,e.top=e.top+s-f),/bottom|top/.test(t)){var l=0;e.left<0&&(l=-2*e.left,e.left=0,r.offset(e),a=r[0].offsetWidth,f=r[0].offsetHeight),this.replaceArrow(l-i+a,a,"left")}else this.replaceArrow(f-s,f,"top");n&&r.offset(e)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&r.detach()}var n=this,r=this.tip(),i=e.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.$element.trigger("hidden.bs."+this.type),this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof n&&n;i||r.data("bs.tooltip",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),+function(e){var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof n&&n;i||r.data("bs.popover",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),+function(e){function t(n,r){var i,s=e.proxy(this.process,this);this.$element=e(n).is("body")?e(window):e(n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||(i=e(n).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this;this.$body.find(this.selector).map(function(){var r=e(this),i=r.data("target")||r.attr("href"),s=/^#\w/.test(i)&&e(i);return s&&s.length&&[[s[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,r=n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(t>=r)return o!=(e=s.last()[0])&&this.activate(e);for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(!i[e+1]||t<=i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parents(".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),+function(e){var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:i});if(t.trigger(s),!s.isDefaultPrevented()){var o=e(r);this.activate(t.parent("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})}}},t.prototype.activate=function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one(e.support.transition.end,i).emulateTransitionEnd(150):i(),s.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),"string"==typeof n&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),+function(e){var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),r=this.$window.scrollTop(),i=this.$element.offset(),s=this.options.offset,o=s.top,u=s.bottom;"object"!=typeof s&&(u=o=s),"function"==typeof o&&(o=s.top()),"function"==typeof u&&(u=s.bottom());var f=null!=this.unpin&&r+this.unpin<=i.top?!1:null!=u&&i.top+this.$element.height()>=n-u?"bottom":null!=o&&o>=r?"top":!1;this.affixed!==f&&(this.unpin&&this.$element.css("top",""),this.affixed=f,this.unpin="bottom"==f?i.top-r:null,this.$element.removeClass(t.RESET).addClass("affix"+(f?"-"+f:"")),"bottom"==f&&this.$element.offset({top:document.body.offsetHeight-u-this.$element.height()}))}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof n&&n;i||r.data("bs.affix",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),define("bootstrap",["jquery"],function(){}),define("Application",["Api","Functions","Router","component/Facade","component/Timer","model/Assets","model/Settings","model/User","storage/IndexedDBAdapter","async","bootstrap","jquery"],function(e,t,n,r,i,s,o,u,a,f){window.Skritter=function(e){return e}(window.Skritter||{});var l={loadApi:function(t){Skritter.api=new e(Skritter.settings.get("apiClientId"),Skritter.settings.get("apiClientSecret")),Skritter.api.domain=Skritter.settings.get("apiDomain"),Skritter.api.root=Skritter.settings.get("apiRoot"),Skritter.api.version=Skritter.settings.get("apiVersion"),t()},loadAsync:function(){Skritter.async=f},loadAssets:function(e){Skritter.assets=new s,Skritter.async.parallel([Skritter.async.apply(Skritter.assets.loadStrokes)],function(){e()})},loadFacade:function(){return Skritter.facade=new r,Skritter.facade},loadFunctions:function(e){Skritter.fn=t,e()},loadRouter:function(e){n.initialize(),e()},loadSettings:function(e){Skritter.settings=new o,e()},loadStorage:function(e){Skritter.storage=new a,e()},loadTimer:function(e){Skritter.timer=new i,Skritter.user.isLoggedIn()&&Skritter.timer.sync(!0),e()},loadUser:function(e){Skritter.user=new u,Skritter.user.isLoggedIn()?(Skritter.api.token=Skritter.user.get("access_token"),Skritter.storage.openDatabase("skritdata-"+Skritter.user.get("user_id"),function(){Skritter.user.loadAllData(function(){Skritter.user.sync(function(){e()})})})):e()},initialize:function(){this.loadFacade().show("loading"),this.loadAsync(),Skritter.async.series([Skritter.async.apply(this.loadFunctions),Skritter.async.apply(this.loadAssets),Skritter.async.apply(this.loadSettings),Skritter.async.apply(this.loadStorage),Skritter.async.apply(this.loadApi),Skritter.async.apply(this.loadUser),Skritter.async.apply(this.loadTimer),Skritter.async.apply(this.loadRouter)],function(){Skritter.facade.hide()})},reload:function(e){Skritter.async.series([Skritter.async.apply(this.loadUser)],function(){Skritter.facade.hide(),e()})}};$(document).ready(function(){Skritter.application=l,Skritter.application.initialize()})});